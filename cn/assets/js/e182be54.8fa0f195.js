"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3769],{9045:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"minio","metadata":{"permalink":"/cn/blog/minio","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-07-16_minio-test/2022-07-16_minio-test.md","source":"@site/i18n/cn/docusaurus-plugin-content-blog/2022-07-16_minio-test/2022-07-16_minio-test.md","title":"HwameiStor \u5bf9 Minio \u7684\u652f\u6301","description":"\u672c\u6587\u8bb2\u8ff0\u5982\u4f55\u4ee5 HwameiStor \u4e3a\u5e95\u5ea7\uff0c\u642d\u5efa MinIO \u5b58\u50a8\u89e3\u51b3\u65b9\u6848\uff0c\u5b9e\u8df5\u9a8c\u8bc1\u4e86 MinIO \u7684\u5404\u9879\u57fa\u672c\u529f\u80fd\u548c\u591a\u79df\u6237\u9694\u79bb\u6d4b\u8bd5\u3002","date":"2022-07-16T00:00:00.000Z","formattedDate":"July 16, 2022","tags":[{"label":"Test","permalink":"/cn/blog/tags/test"}],"readingTime":10.815,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u71d5\u5b81","title":"\u5f00\u53d1\u8005","url":"https://github.com/zhaosimon","imageURL":"https://avatars.githubusercontent.com/u/36882380?v=4","key":"Simon"}],"frontMatter":{"slug":"minio","title":"HwameiStor \u5bf9 Minio \u7684\u652f\u6301","authors":["Simon"],"tags":["Test"]},"nextItem":{"title":"\u76f4\u64ad\u56de\u987e\u8bba\u9053\u539f\u751f\uff1a\u4e91\u539f\u751f\u5b58\u50a8","permalink":"/cn/blog/live"}},"content":"\u672c\u6587\u8bb2\u8ff0\u5982\u4f55\u4ee5 HwameiStor \u4e3a\u5e95\u5ea7\uff0c\u642d\u5efa MinIO \u5b58\u50a8\u89e3\u51b3\u65b9\u6848\uff0c\u5b9e\u8df5\u9a8c\u8bc1\u4e86 MinIO \u7684\u5404\u9879\u57fa\u672c\u529f\u80fd\u548c\u591a\u79df\u6237\u9694\u79bb\u6d4b\u8bd5\u3002\\r\\n\\r\\n## MinIO \u7b80\u4ecb\\r\\n\\r\\nMinIO \u662f\u4e00\u6b3e\u9ad8\u6027\u80fd\u3001\u5206\u5e03\u5f0f\u3001\u517c\u5bb9 S3 \u7684\u591a\u4e91\u5bf9\u8c61\u5b58\u50a8\u7cfb\u7edf\u5957\u4ef6\u3002MinIO \u539f\u751f\u652f\u6301 Kubernetes\uff0c\u80fd\u591f\u652f\u6301\u6240\u6709\u516c\u6709\u4e91\u3001\u79c1\u6709\u4e91\u53ca\u8fb9\u7f18\u8ba1\u7b97\u73af\u5883\u3002\\r\\nMinIO \u662f GNU AGPL v3 \u5f00\u6e90\u7684\u8f6f\u4ef6\u5b9a\u4e49\u4ea7\u54c1\uff0c\u80fd\u591f\u5f88\u597d\u5730\u8fd0\u884c\u5728\u6807\u51c6\u786c\u4ef6\u5982 X86 \u7b49\u8bbe\u5907\u4e0a\u3002\\r\\n\\r\\n![MinIO \u67b6\u6784](minio-design.png)\\r\\n\\r\\nMinIO \u7684\u67b6\u6784\u8bbe\u8ba1\u4ece\u4e00\u5f00\u59cb\u5c31\u662f\u9488\u5bf9\u6027\u80fd\u8981\u6c42\u5f88\u9ad8\u7684\u79c1\u6709\u4e91\u6807\u51c6\uff0c\u5728\u5b9e\u73b0\u5bf9\u8c61\u5b58\u50a8\u6240\u9700\u8981\u7684\u5168\u90e8\u529f\u80fd\u7684\u57fa\u7840\u4e0a\u8ffd\u6c42\u6781\u81f4\u7684\u6027\u80fd\u3002\\r\\nMinIO \u5177\u5907\u6613\u7528\u6027\u3001\u9ad8\u6548\u6027\u53ca\u9ad8\u6027\u80fd\uff0c\u80fd\u591f\u4ee5\u66f4\u7b80\u5355\u7684\u65b9\u5f0f\u63d0\u4f9b\u5177\u6709\u5f39\u6027\u4f38\u7f29\u80fd\u529b\u7684\u4e91\u539f\u751f\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u3002\\r\\n\\r\\nMinIO \u5728\u4f20\u7edf\u5bf9\u8c61\u5b58\u50a8\u573a\u666f\uff08\u5982\u8f85\u52a9\u5b58\u50a8\u3001\u707e\u96be\u6062\u590d\u548c\u5f52\u6863\uff09\u65b9\u9762\u8868\u73b0\u51fa\u8272\uff0c\u540c\u65f6\u5728\u673a\u5668\u5b66\u4e60\u3001\u5927\u6570\u636e\u3001\u79c1\u6709\u4e91\u3001\u6df7\u5408\u4e91\u7b49\u65b9\u9762\u7684\u5b58\u50a8\u6280\u672f\u4e0a\u4e5f\u72ec\u6811\u4e00\u5e1c\uff0c\u5305\u62ec\u6570\u636e\u5206\u6790\u3001\u9ad8\u6027\u80fd\u5e94\u7528\u8d1f\u8f7d\u3001\u539f\u751f\u4e91\u5e94\u7528\u7b49\u3002\\r\\n\\r\\n### MinIO \u67b6\u6784\u8bbe\u8ba1\\r\\n\\r\\nMinIO \u4e3a\u4e91\u539f\u751f\u67b6\u6784\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u8f7b\u91cf\u7ea7\u5bb9\u5668\u8fd0\u884c\u5e76\u7531\u5916\u90e8\u7f16\u6392\u670d\u52a1\u5982 Kubernetes \u7ba1\u7406\u3002\\r\\nMinIO \u6574\u4e2a\u670d\u52a1\u5305\u7ea6\u4e3a\u4e0d\u5230 100 MB \u7684\u9759\u6001\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5373\u4f7f\u5728\u5f88\u9ad8\u8d1f\u8f7d\u4e0b\u4e5f\u53ef\u4ee5\u9ad8\u6548\u5229\u7528 CPU \u548c\u5185\u5b58\u8d44\u6e90\u5e76\u53ef\u4ee5\u5728\u5171\u4eab\u786c\u4ef6\u4e0a\u5171\u540c\u6258\u7ba1\u5927\u91cf\u79df\u6237\u3002\\r\\n\u5bf9\u5e94\u7684\u67b6\u6784\u56fe\u5982\u4e0b\uff1a\\r\\n\\r\\n![\u67b6\u6784\u56fe](architect.png)\\r\\n\\r\\nMinIO \u7528\u4f5c\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u7684\u4e3b\u8981\u5b58\u50a8\uff0c\u4e0e\u4f20\u7edf\u5bf9\u8c61\u5b58\u50a8\u76f8\u6bd4\uff0c\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u66f4\u9ad8\u7684\u541e\u5410\u91cf\u548c\u66f4\u4f4e\u7684\u5ef6\u8fdf\uff0c\u800c\u8fd9\u4e9b\u90fd\u662f MinIO \u80fd\u591f\u8fbe\u6210\u7684\u6027\u80fd\u6307\u6807\uff0c\u8bfb/\u5199\u901f\u5ea6\u9ad8\u8fbe 183 GB/\u79d2\u548c 171 GB/\u79d2\u3002\\r\\n\\r\\nMinIO \u6781\u81f4\u7684\u9ad8\u6027\u80fd\u79bb\u4e0d\u5f00\u5e95\u5c42\u5b58\u50a8\u57fa\u7840\u5e73\u53f0\u3002\u672c\u5730\u5b58\u50a8\u5728\u4f17\u591a\u7684\u5b58\u50a8\u534f\u8bae\u4e2d\u5177\u6709\u6700\u9ad8\u7684\u8bfb\u5199\u6027\u80fd\u65e0\u7591\u80fd\u4e3a MinIO \u63d0\u4f9b\u6027\u80fd\u4fdd\u969c\u3002\\r\\nHwameiStor \u6b63\u662f\u6ee1\u8db3\u4e91\u539f\u751f\u65f6\u4ee3\u8981\u6c42\u7684\u50a8\u5b58\u7cfb\u7edf\u3002\u5b83\u5177\u6709\u9ad8\u6027\u80fd\u3001\u9ad8\u53ef\u7528\u3001\u81ea\u52a8\u5316\u3001\u4f4e\u6210\u672c\u3001\u5feb\u901f\u90e8\u7f72\u7b49\u4f18\u70b9\uff0c\u53ef\u4ee5\u66ff\u4ee3\u6602\u8d35\u7684\u4f20\u7edf SAN \u5b58\u50a8\u3002\\r\\n\\r\\nMinIO \u53ef\u4ee5\u5728\u5e26\u6709\u672c\u5730\u9a71\u52a8\u5668\uff08JBOD/JBOF\uff09\u7684\u6807\u51c6\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u3002\\r\\n\u96c6\u7fa4\u4e3a\u5b8c\u5168\u5bf9\u79f0\u7684\u4f53\u7cfb\u67b6\u6784\uff0c\u5373\u6240\u6709\u670d\u52a1\u5668\u7684\u529f\u80fd\u5747\u76f8\u540c\uff0c\u6ca1\u6709\u540d\u79f0\u8282\u70b9\u6216\u5143\u6570\u636e\u670d\u52a1\u5668\u3002\\r\\n\\r\\nMinIO \u5c06\u6570\u636e\u548c\u5143\u6570\u636e\u4f5c\u4e3a\u5bf9\u8c61\u4e00\u8d77\u5199\u5165\u4ece\u800c\u65e0\u9700\u4f7f\u7528\u5143\u6570\u636e\u6570\u636e\u5e93\u3002\\r\\nMinIO \u4ee5\u5185\u8054\u3001\u4e25\u683c\u4e00\u81f4\u7684\u64cd\u4f5c\u6267\u884c\u6240\u6709\u529f\u80fd\uff0c\u5305\u62ec\u64e6\u9664\u4ee3\u7801\u3001\u4f4d rotrot \u68c0\u67e5\u3001\u52a0\u5bc6\u7b49\u3002\\r\\n\\r\\n\u6bcf\u4e2a MinIO \u96c6\u7fa4\u90fd\u662f\u5206\u5e03\u5f0f MinIO \u670d\u52a1\u5668\u7684\u96c6\u5408\uff0c\u6bcf\u4e2a\u8282\u70b9\u4e00\u4e2a\u8fdb\u7a0b\u3002\\r\\nMinIO \u4f5c\u4e3a\u5355\u4e2a\u8fdb\u7a0b\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\u8fd0\u884c\uff0c\u5e76\u4f7f\u7528\u8f7b\u91cf\u7ea7\u7684\u534f\u540c\u4f8b\u7a0b\u6765\u5b9e\u73b0\u9ad8\u5e76\u53d1\u3002\\r\\n\u5c06\u9a71\u52a8\u5668\u5206\u7ec4\u5230\u64e6\u9664\u96c6\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u7ec4 16 \u4e2a\u9a71\u52a8\u5668\uff09\uff0c\u7136\u540e\u4f7f\u7528\u786e\u5b9a\u6027\u54c8\u5e0c\u7b97\u6cd5\u5c06\u5bf9\u8c61\u653e\u7f6e\u5728\u8fd9\u4e9b\u64e6\u9664\u96c6\u4e0a\u3002\\r\\n\\r\\nMinIO \u4e13\u4e3a\u5927\u89c4\u6a21\u3001\u591a\u6570\u636e\u4e2d\u5fc3\u4e91\u5b58\u50a8\u670d\u52a1\u800c\u8bbe\u8ba1\u3002\\r\\n\u6bcf\u4e2a\u79df\u6237\u90fd\u8fd0\u884c\u81ea\u5df1\u7684 MinIO \u96c6\u7fa4\uff0c\u8be5\u96c6\u7fa4\u4e0e\u5176\u4ed6\u79df\u6237\u5b8c\u5168\u9694\u79bb\uff0c\u4ece\u800c\u4f7f\u79df\u6237\u80fd\u591f\u514d\u53d7\u5347\u7ea7\u3001\u66f4\u65b0\u548c\u5b89\u5168\u4e8b\u4ef6\u7684\u4efb\u4f55\u5e72\u6270\u3002\\r\\n\u6bcf\u4e2a\u79df\u6237\u901a\u8fc7\u8054\u5408\u8de8\u5730\u7406\u533a\u57df\u7684\u96c6\u7fa4\u6765\u72ec\u7acb\u6269\u5c55\u3002\\r\\n\\r\\n![node-distribution-setup](node-setup.png)\\r\\n\\r\\n### \u4ee5 HwameiStor \u4e3a\u5e95\u5ea7\u642d\u5efa MinIO \u7684\u4f18\u52bf\\r\\n\\r\\n\u4ee5 HwameiStor \u4e3a\u5e95\u5ea7\u642d\u5efa MinIO \u5b58\u50a8\u65b9\u6848\uff0c\u6784\u5efa\u667a\u3001\u7a33\u3001\u654f\u5168\u9762\u589e\u5f3a\u672c\u5730\u5b58\u50a8\uff0c\u5177\u5907\u4ee5\u4e0b\u4f18\u52bf\u3002\\r\\n\\r\\n- \u81ea\u52a8\u5316\u8fd0\u7ef4\u7ba1\u7406\\r\\n\\r\\n  \u53ef\u4ee5\u81ea\u52a8\u53d1\u73b0\u3001\u8bc6\u522b\u3001\u7ba1\u7406\u3001\u5206\u914d\u78c1\u76d8\u3002 \u6839\u636e\u4eb2\u548c\u6027\uff0c\u667a\u80fd\u8c03\u5ea6\u5e94\u7528\u548c\u6570\u636e\u3002\u81ea\u52a8\u76d1\u6d4b\u78c1\u76d8\u72b6\u6001\uff0c\u5e76\u53ca\u65f6\u9884\u8b66\u3002\\r\\n\\r\\n- \u9ad8\u53ef\u7528\u7684\u6570\u636e\\r\\n\\r\\n  \u4f7f\u7528\u8de8\u8282\u70b9\u526f\u672c\u540c\u6b65\u6570\u636e\uff0c \u5b9e\u73b0\u9ad8\u53ef\u7528\u3002\u53d1\u751f\u95ee\u9898\u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u5e94\u7528\u8c03\u5ea6\u5230\u9ad8\u53ef\u7528\u6570\u636e\u8282\u70b9\u4e0a\uff0c\u4fdd\u8bc1\u5e94\u7528\u7684\u8fde\u7eed\u6027\u3002\\r\\n\\r\\n- \u4e30\u5bcc\u7684\u6570\u636e\u5377\u7c7b\u578b\\r\\n\\r\\n  \u805a\u5408 HDD\u3001SSD\u3001NVMe \u7c7b\u578b\u7684\u78c1\u76d8\uff0c\u63d0\u4f9b\u975e\u4f4e\u5ef6\u65f6\uff0c\u9ad8\u541e\u5410\u7684\u6570\u636e\u670d\u52a1\u3002\\r\\n\\r\\n- \u7075\u6d3b\u52a8\u6001\u7684\u7ebf\u6027\u6269\u5c55\\r\\n\\r\\n  \u53ef\u4ee5\u6839\u636e\u96c6\u7fa4\u89c4\u6a21\u5927\u5c0f\u8fdb\u884c\u52a8\u6001\u7684\u6269\u5bb9\uff0c\u7075\u6d3b\u6ee1\u8db3\u5e94\u7528\u7684\u6570\u636e\u6301\u4e45\u5316\u9700\u6c42\u3002\\r\\n\\r\\n- \u4e30\u5bcc\u7684\u5e94\u7528\u573a\u666f\uff0c\u5e7f\u6cdb\u9002\u914d\u4f01\u4e1a\u9700\u6c42\uff0c\u9002\u914d\u9ad8\u53ef\u7528\u67b6\u6784\u4e2d\u95f4\u4ef6\\r\\n\\r\\n  \u7c7b\u4f3c Kafka\u3001ElasticSearch\u3001Redis \u7b49\u8fd9\u7c7b\u4e2d\u95f4\u4ef6\u81ea\u8eab\u5177\u5907\u9ad8\u53ef\u7528\u67b6\u6784\uff0c\u540c\u65f6\u5bf9\u6570\u636e\u7684 IO \u8bbf\u95ee\u6709\u5f88\u9ad8\u8981\u6c42\u3002\\r\\n  HwameiStor \u63d0\u4f9b\u7684\u57fa\u4e8e LVM \u7684\u5355\u526f\u672c\u672c\u5730\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u6ee1\u8db3\u5b83\u4eec\u7684\u8981\u6c42\u3002\\r\\n\\r\\n- \u4e3a\u5e94\u7528\u63d0\u4f9b\u9ad8\u53ef\u7528\u6570\u636e\u5377\\r\\n\\r\\n  MySQL \u7b49 OLTP \u6570\u636e\u5e93\u8981\u6c42\u5e95\u5c42\u5b58\u50a8\u63d0\u4f9b\u9ad8\u53ef\u7528\u7684\u6570\u636e\u5b58\u50a8\uff0c\u5f53\u53d1\u751f\u95ee\u9898\u65f6\u53ef\u5feb\u901f\u6062\u590d\u6570\u636e\uff0c\u540c\u65f6\u4e5f\u8981\u6c42\u4fdd\u8bc1\u9ad8\u6027\u80fd\u7684\u6570\u636e\u8bbf\u95ee\u3002\\r\\n  HwameiStor \u63d0\u4f9b\u7684\u53cc\u526f\u672c\u7684\u9ad8\u53ef\u7528\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u6ee1\u8db3\u6b64\u7c7b\u9700\u6c42\u3002\\r\\n\\r\\n- \u81ea\u52a8\u5316\u8fd0\u7ef4\u4f20\u7edf\u5b58\u50a8\u8f6f\u4ef6\\r\\n\\r\\n  MinIO\u3001Ceph \u7b49\u5b58\u50a8\u8f6f\u4ef6\uff0c\u9700\u8981\u4f7f\u7528 Kubernetes \u8282\u70b9\u4e0a\u7684\u78c1\u76d8\uff0c\u53ef\u4ee5\u91c7\u7528 PVC/PV \u7684\u65b9\u5f0f\uff0c\\r\\n  \u901a\u8fc7 CSI \u9a71\u52a8\u81ea\u52a8\u5316\u5730\u4f7f\u7528 HwameiStor \u7684\u5355\u526f\u672c\u672c\u5730\u5377\uff0c\u5feb\u901f\u54cd\u5e94\u4e1a\u52a1\u7cfb\u7edf\u63d0\u51fa\u7684\u90e8\u7f72\u3001\u6269\u5bb9\u3001\u8fc1\u79fb\u7b49\u9700\u6c42\uff0c\u5b9e\u73b0\u57fa\u4e8e Kubernetes \u7684\u81ea\u52a8\u5316\u8fd0\u7ef4\u3002\\r\\n\\r\\n## \u6d4b\u8bd5\u73af\u5883\\r\\n\\r\\n\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4f9d\u6b21\u90e8\u7f72 Kubernetes \u96c6\u7fa4\u3001HwameiStor \u672c\u5730\u5b58\u50a8\u548c MinIO\u3002\\r\\n\\r\\n### \u90e8\u7f72 Kubernetes \u96c6\u7fa4\\r\\n\\r\\n\u672c\u6b21\u6d4b\u8bd5\u4f7f\u7528\u4e86\u4e09\u53f0\u865a\u62df\u673a\u8282\u70b9\u90e8\u7f72\u4e86 Kubernetes \u96c6\u7fa4\uff1a1 Master + 2 Worker \u8282\u70b9\uff0ckubelet \u7248\u672c\u4e3a 1.22.0\u3002\\r\\n\\r\\n![k8s-cluster](k8s-cluster.png)\\r\\n\\r\\n### \u90e8\u7f72 HwameiStor \u672c\u5730\u5b58\u50a8\\r\\n\\r\\n\u5728 Kubernetes \u4e0a\u90e8\u7f72 HwameiStor \u672c\u5730\u5b58\u50a8\u3002\\r\\n\\r\\n![\u67e5\u770b HwameiStor \u672c\u5730\u5b58\u50a8](kubectl-get-hwamei-pod.png)\\r\\n\\r\\n\u4e24\u53f0 Worker \u8282\u70b9\u5404\u914d\u7f6e\u4e86\u4e94\u5757\u78c1\u76d8\uff08SDB\u3001SDC\u3001SDD\u3001SDE\u3001SDF\uff09\u7528\u4e8e HwameiStor \u672c\u5730\u78c1\u76d8\u7ba1\u7406\u3002\\r\\n\\r\\n![lsblk](lsblk01.png)\\r\\n\\r\\n![lsblk](lsblk02.png)\\r\\n\\r\\n\u67e5\u770b local storage node \u72b6\u6001\u3002\\r\\n\\r\\n![get-lsn](kubectl-get-lsn.png)\\r\\n\\r\\n\u521b\u5efa\u4e86 storagClass\u3002\\r\\n\\r\\n![get-sc](kubectl-get-sc.png)\\r\\n\\r\\n## \u5206\u5e03\u5f0f\u591a\u79df\u6237\u6e90\u7801\u90e8\u7f72\u5b89\u88c5\uff08minio operator\uff09\\r\\n\\r\\n\u672c\u8282\u8bf4\u660e\u5982\u4f55\u90e8\u7f72 minio operator\uff0c\u5982\u4f55\u521b\u5efa\u79df\u6237\uff0c\u5982\u4f55\u914d\u7f6e HwameiStor \u672c\u5730\u5377\u3002\\r\\n\\r\\n### \u90e8\u7f72 minio operator\\r\\n\\r\\n\u53c2\u7167\u4ee5\u4e0b\u6b65\u9aa4\u90e8\u7f72 minio operator\u3002\\r\\n\\r\\n1. \u590d\u5236 minio operator \u4ed3\u5e93\u5230\u672c\u5730\u3002\\r\\n\\r\\n  ```\\r\\n  git clone <https://github.com/minio/operator.git>\\r\\n  ```\\r\\n\\r\\n  ![helm-repo-list](helm-repo-list.png)\\r\\n\\r\\n  ![ls-operator](ls-opeartor.png)\\r\\n\\r\\n2. \u8fdb\u5165 helm operator \u76ee\u5f55\uff1a`/root/operator/helm/operator`\u3002\\r\\n\\r\\n  ![ls-pwd](ls-pwd.png)\\r\\n\\r\\n3. \u90e8\u7f72 minio-operator \u5b9e\u4f8b\u3002\\r\\n\\r\\n  ```\\r\\n  helm install minio-operator \\\\\\r\\n  --namespace minio-operator \\\\\\r\\n  --create-namespace \\\\\\r\\n  --generate-name .\\r\\n  --set persistence.storageClass=local-storage-hdd-lvm .\\r\\n  ```\\r\\n\\r\\n4. \u68c0\u67e5 minio-operator \u8d44\u6e90\u8fd0\u884c\u60c5\u51b5\u3002\\r\\n\\r\\n  ![get-all](kubectl-get-all.png)\\r\\n\\r\\n### \u521b\u5efa\u79df\u6237\\r\\n\\r\\n\u53c2\u7167\u4ee5\u4e0b\u6b65\u9aa4\u521b\u5efa\u4e00\u4e2a\u79df\u6237\u3002\\r\\n\\r\\n1. \u8fdb\u5165 `/root/operator/examples/kustomization/base` \u76ee\u5f55\u3002\u5982\u4e0b\u4fee\u6539 tenant.yaml\u3002\\r\\n\\r\\n  ![git-diff-yaml](git-diff-tenant-yaml.png)\\r\\n\\r\\n2. \u8fdb\u5165 `/root/operator/helm/tenant/` \u76ee\u5f55\u3002\u5982\u4e0b\u4fee\u6539 `values.yaml` \u6587\u4ef6\u3002\\r\\n\\r\\n  ![git-diff-values.yaml](git-diff-values-yaml.png)\\r\\n\\r\\n3. \u8fdb\u5165 `/root/operator/examples/kustomization/tenant-lite` \u76ee\u5f55\u3002\u5982\u4e0b\u4fee\u6539 `kustomization.yaml` \u6587\u4ef6\u3002\\r\\n\\r\\n  ![git-diff-kustomization-yaml](git-diff-kustomization-yaml.png)\\r\\n\\r\\n4. \u5982\u4e0b\u4fee\u6539 `tenant.yaml` \u6587\u4ef6\u3002\\r\\n\\r\\n  ![git-diff-tenant-yaml02](git-diff-tenant-yaml02.png)\\r\\n\\r\\n5. \u5982\u4e0b\u4fee\u6539 `tenantNamePatch.yaml` \u6587\u4ef6\u3002\\r\\n\\r\\n  ![git-diff-tenant-name-patch-yaml](git-diff-tenant-name-patch-yaml.png)\\r\\n\\r\\n6. \u521b\u5efa\u79df\u6237\uff1a\\r\\n\\r\\n  ```\\r\\n  kubectl apply \u2013k . \\r\\n  ```\\r\\n\\r\\n7. \u68c0\u67e5\u79df\u6237 minio-t1 \u8d44\u6e90\u72b6\u6001\uff1a\\r\\n\\r\\n  ![kubectl-get-all-nminio-tenant](kubectl-get-all-nminio-tenant.png)\\r\\n\\r\\n8. \u5982\u8981\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u79df\u6237\u53ef\u4ee5\u5728 `/root/operator/examples/kustomization` \u76ee\u5f55\u4e0b\u5efa\u4e00\u4e2a\u65b0\u7684 `tenant` \u76ee\u5f55\uff08\u672c\u6848\u4f8b\u4e3a `tenant-lite-2`\uff09\u5e76\u5bf9\u76f8\u5e94\u6587\u4ef6\u505a\u5bf9\u5e94\u4fee\u6539\u3002\\r\\n\\r\\n  ![pwd-ls-ls](pwd-ls-ls.png)\\r\\n\\r\\n9. \u6267\u884c `kubectl apply \u2013k .` \u521b\u5efa\u65b0\u7684\u79df\u6237 `minio-t2`\u3002\\r\\n\\r\\n  ![kubectl-get-all-nminio](kubectl-get-all-minio.png)\\r\\n\\r\\n### \u914d\u7f6e HwameiStor \u672c\u5730\u5377\\r\\n\\r\\n\u4f9d\u6b21\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u914d\u7f6e\u672c\u5730\u5377\u3002\\r\\n\\r\\n```\\r\\nkubectl get statefulset.apps/minio-t1-pool-0 -nminio-tenant -oyaml\\r\\n```\\r\\n\\r\\n![local-storage-hdd-lvm](local-storage-hdd-lvm.png)\\r\\n\\r\\n```\\r\\nkubectl get pvc \u2013A\\r\\n```\\r\\n\\r\\n![kubectl-get-pvc](kubectl-get-pvc.png)\\r\\n\\r\\n```\\r\\nkubectl get pvc export-minio6-0 -nminio-6 -oyaml\\r\\n```\\r\\n\\r\\n![kubectl-get-pvc-export-oyaml](kubectl-get-pvc-export-oyaml.png)\\r\\n\\r\\n```\\r\\nkubectl get pv\\r\\n```\\r\\n\\r\\n![kubectl-get-pv](kubectl-get-pv.png)\\r\\n\\r\\n```\\r\\nkubectl get pvc data0-minio-t1-pool-0-0 -nminio-tenant -oyaml\\r\\n```\\r\\n\\r\\n![kubectl-get-pvc-oyaml](kubectl-get-pvc-oyaml.png)\\r\\n\\r\\n```\\r\\nkubectl get lv\\r\\n```\\r\\n\\r\\n![kubectl-get-lv](kubectl-get-lv.png)\\r\\n\\r\\n```\\r\\nkubect get lvr\\r\\n```\\r\\n\\r\\n![kubectl-get-lvr](kubectl-get-lvr.png)\\r\\n\\r\\n## HwameiStor \u4e0e MinIo \u6d4b\u8bd5\u9a8c\u8bc1\\r\\n\\r\\n\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u4e4b\u540e\uff0c\u6267\u884c\u4e86\u57fa\u672c\u529f\u80fd\u6d4b\u8bd5\u548c\u591a\u79df\u6237\u9694\u79bb\u6d4b\u8bd5\u3002\\r\\n\\r\\n### \u57fa\u672c\u529f\u80fd\u6d4b\u8bd5\\r\\n\\r\\n\u57fa\u672c\u529f\u80fd\u6d4b\u8bd5\u7684\u6b65\u9aa4\u5982\u4e0b\u3002\\r\\n\\r\\n1. \u4ece\u6d4f\u89c8\u5668\u767b\u5f55 `minio console\uff1a10.6.163.52:30401/login`\u3002\\r\\n\\r\\n  ![minio-opeartor-console-login](minio-opeartor-console-login.png)\\r\\n\\r\\n2. \u901a\u8fc7 `kubectl minio proxy -n minio-operator `\u83b7\u53d6 JWT\u3002\\r\\n\\r\\n  ![minio-opeartor-console-login](kubectl-minio-proxy-jwt.png)\\r\\n\\r\\n3. \u6d4f\u89c8\u53ca\u7ba1\u7406\u521b\u5efa\u7684\u79df\u6237\u4fe1\u606f\u3002\\r\\n\\r\\n  ![tenant01](tenant01.png)\\r\\n\\r\\n  ![tenant02](tenant02.png)\\r\\n\\r\\n  ![tenant03](tenant03.png)\\r\\n\\r\\n  ![tenant04](tenant04.png)\\r\\n\\r\\n  ![tenant05](tenant05.png)\\r\\n\\r\\n  ![tenant06](tenant06.png)\\r\\n\\r\\n4. \u767b\u5f55 minio-t1 \u79df\u6237\uff08\u7528\u6237\u540d minio\uff0c\u5bc6\u7801 minio123\uff09\u3002\\r\\n\\r\\n  ![login-minio](login-minio-t1-01.png)\\r\\n\\r\\n  ![login-minio](login-minio-t1-02.png)\\r\\n\\r\\n5. \u6d4f\u89c8 bucket bk-1\u3002\\r\\n\\r\\n  ![view-bucket-1](view-bucket-01.png)\\r\\n\\r\\n  ![view-bucket-1](view-bucket-02.png)\\r\\n\\r\\n  ![view-bucket-1](view-bucket-03.png)\\r\\n\\r\\n6. \u521b\u5efa\u65b0\u7684 bucket bk-1-1\u3002\\r\\n\\r\\n  ![create-bucket-1-1](create-bucket-1-1.png)\\r\\n\\r\\n  ![create-bucket-1-1](create-bucket-1-2.png)\\r\\n\\r\\n  ![create-bucket-1-1](create-bucket-1-3.png)\\r\\n\\r\\n7. \u521b\u5efa path path-1-2\u3002\\r\\n\\r\\n  ![create-path-1-2](create-path-1-2-01.png)\\r\\n\\r\\n  ![create-path-1-2](create-path-1-2-02.png)\\r\\n\\r\\n8. \u4e0a\u4f20\u6587\u4ef6\u6210\u529f\uff1a\\r\\n\\r\\n  ![upload-file](upload-file-success.png)\\r\\n\\r\\n  ![upload-file](upload-file-success-02.png)\\r\\n\\r\\n  ![upload-file](upload-file-success-03.png)\\r\\n\\r\\n9. \u4e0a\u4f20\u6587\u4ef6\u5939\u6210\u529f\uff1a\\r\\n\\r\\n  ![upload-folder](upload-folder-success-01.png)\\r\\n\\r\\n  ![upload-folder](upload-folder-success-02.png)\\r\\n\\r\\n  ![upload-folder](upload-folder-success-03.png)\\r\\n\\r\\n  ![upload-folder](upload-folder-success-04.png)\\r\\n\\r\\n10. \u521b\u5efa\u53ea\u8bfb\u7528\u6237\uff1a\\r\\n\\r\\n  ![create-user](create-readonly-user-01.png)\\r\\n\\r\\n  ![create-user](create-readonly-user-02.png)\\r\\n\\r\\n### \u591a\u79df\u6237\u9694\u79bb\u6d4b\u8bd5\\r\\n\\r\\n\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u591a\u79df\u6237\u9694\u79bb\u6d4b\u8bd5\u3002\\r\\n\\r\\n1. \u767b\u5f55 minio-t2 \u79df\u6237\u3002\\r\\n\\r\\n  ![login-t2](login-minio-t2-01.png)\\r\\n\\r\\n  ![login-t2](login-minio-t2-02.png)\\r\\n\\r\\n2. \u6b64\u65f6\u53ea\u80fd\u770b\u5230 minio-t2 \u5185\u5bb9\uff0cminio-t1 \u7684\u5185\u5bb9\u88ab\u5c4f\u853d\u3002\\r\\n\\r\\n  ![only-t2](only-t2.png)\\r\\n\\r\\n3. \u521b\u5efa bucket\u3002\\r\\n\\r\\n  ![create-bucket](create-bucket01.png)\\r\\n\\r\\n  ![create-bucket](createbucket02.png)\\r\\n\\r\\n4. \u521b\u5efa path\u3002\\r\\n\\r\\n  ![create-path](create-path01.png)\\r\\n\\r\\n  ![create-path](create-path02.png)\\r\\n\\r\\n5. \u4e0a\u4f20\u6587\u4ef6\u3002\\r\\n\\r\\n  ![upload-file](upload-file01.png)\\r\\n\\r\\n  ![upload-file](upload-file02.png)\\r\\n\\r\\n6. \u521b\u5efa\u7528\u6237\u3002\\r\\n\\r\\n  ![create-user](create-user01.png)\\r\\n\\r\\n  ![create-user](create-user02.png)\\r\\n\\r\\n  ![create-user](create-user03.png)\\r\\n\\r\\n  ![create-user](create-user04.png)\\r\\n\\r\\n  ![create-user](create-user05.png)\\r\\n\\r\\n7. \u914d\u7f6e\u7528\u6237 policy\u3002\\r\\n\\r\\n  ![user-policy](user-policy01.png)\\r\\n\\r\\n  ![user-policy](user-policy02.png)\\r\\n\\r\\n8. \u5220\u9664 bucket\u3002\\r\\n\\r\\n  ![delete-bucket](delete-bk01.png)\\r\\n\\r\\n  ![delete-bucket](delete-bk02.png)\\r\\n\\r\\n  ![delete-bucket](delete-bk03.png)\\r\\n\\r\\n  ![delete-bucket](delete-bk04.png)\\r\\n\\r\\n  ![delete-bucket](delete-bk05.png)\\r\\n\\r\\n  ![delete-bucket](delete-bk06.png)\\r\\n\\r\\n## \u7ed3\u8bba\\r\\n\\r\\n\u672c\u6b21\u6d4b\u8bd5\u662f\u5728 Kubernetes 1.22 \u5e73\u53f0\u4e0a\u90e8\u7f72\u4e86 MinIO \u5206\u5e03\u5f0f\u5bf9\u8c61\u5b58\u50a8\u5e76\u5bf9\u63a5 HwameiStor \u672c\u5730\u5b58\u50a8\u3002\u5728\u6b64\u73af\u5883\u4e2d\u5b8c\u6210\u4e86\u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\u3001\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5\u53ca\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u3002\\r\\n\\r\\n\u5168\u90e8\u6d4b\u8bd5\u6210\u529f\u901a\u8fc7\uff0c\u8bc1\u5b9e\u4e86 HwameiStor \u80fd\u591f\u5b8c\u7f8e\u9002\u914d MinIO \u5b58\u50a8\u65b9\u6848\u3002"},{"id":"live","metadata":{"permalink":"/cn/blog/live","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-06-20_livestream.md","source":"@site/i18n/cn/docusaurus-plugin-content-blog/2022-06-20_livestream.md","title":"\u76f4\u64ad\u56de\u987e\u8bba\u9053\u539f\u751f\uff1a\u4e91\u539f\u751f\u5b58\u50a8","description":"\u76f4\u64ad\u56de\u987e","date":"2022-06-20T00:00:00.000Z","formattedDate":"June 20, 2022","tags":[{"label":"livestream","permalink":"/cn/blog/tags/livestream"}],"readingTime":15.57,"hasTruncateMarker":false,"authors":[{"name":"\u5218\u4e1a\u7433","title":"\u7f16\u8f91","url":"https://github.com/AdaLiuyl","image-url":"https://avatars.githubusercontent.com/u/95339758?v=4","key":"Ada"},{"name":"\u5434\u6167","title":"\u7f16\u8f91","url":"https://github.com/Michelle951","imageURL":"https://avatars.githubusercontent.com/u/35519562?v=4","key":"Michelle"}],"frontMatter":{"slug":"live","title":"\u76f4\u64ad\u56de\u987e\u8bba\u9053\u539f\u751f\uff1a\u4e91\u539f\u751f\u5b58\u50a8","authors":["Ada","Michelle"],"tags":["livestream"]},"prevItem":{"title":"HwameiStor \u5bf9 Minio \u7684\u652f\u6301","permalink":"/cn/blog/minio"},"nextItem":{"title":"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5","permalink":"/cn/blog/test"}},"content":"![\u76f4\u64ad\u56de\u987e](img/livestream-highlights.png)\\r\\n\\r\\n\u4e91\u539f\u751f\u4ea7\u4e1a\u7684\u5feb\u901f\u53d1\u5c55\uff0c\u4e3a\u884c\u4e1a\u5e94\u7528\u7684\u5b9e\u73b0\u5e26\u6765\u4e86\u66f4\u591a\u53ef\u80fd\u6027\uff0c\u4f46\u4e5f\u9762\u4e34\u66f4\u591a\u7684\u6311\u6218\u3002\u5b58\u50a8\u662f\u5e94\u7528\u8fd0\u884c\u7684\u57fa\u77f3\uff0c\u968f\u7740\u4e91\u539f\u751f\u6280\u672f\u7684\u5e7f\u6cdb\u5e94\u7528\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u6709\u72b6\u6001\u5e94\u7528\u88ab\u642c\u4e0a\u5bb9\u5668\u5e73\u53f0\uff0c\u6709\u72b6\u6001\u5e94\u7528\u5df2\u6210\u4e3a\u4e86\u5b58\u50a8\u7684\u4e3b\u8981\u5bf9\u8c61\uff0c\u5b58\u50a8\u4e5f\u6210\u4e3a\u5e94\u7528\u5bb9\u5668\u5316\u8fc7\u7a0b\u4e2d\u7684\u4e3b\u8981\u96be\u70b9\u3002\u5728\u4e91\u539f\u751f\u65f6\u4ee3\u4e0b\uff0c\u5bf9\u5b58\u50a8\u7cfb\u7edf\u63d0\u51fa\u4e86\u54ea\u4e9b\u65b0\u7684\u8981\u6c42\uff1f\u4e91\u539f\u751f\u5b58\u50a8\u9762\u4e34\u54ea\u4e9b\u65b0\u673a\u9047\u548c\u65b0\u6311\u6218\uff1f\u76ee\u524d\u6709\u54ea\u4e9b\u70ed\u95e8\u7684\u4e91\u539f\u751f\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\uff1f\\r\\n\\r\\n\u5728 6 \u6708 20 \u65e5\u7684\u8bba\u9053\u539f\u751f\u76f4\u64ad\u95f4\uff0c\u6211\u4eec\u643a\u624b[\u9e4f\u4e91\u7f51\u7edc](https://www.pengyunnetwork.cn/#/Main)\uff0c\u5206\u4eab\u4e86\u4e09\u4e2a\u65b9\u9762\u5185\u5bb9\uff0c\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u3001 Kubernetes (K8s) \u573a\u666f\u4e0b\u4e91\u539f\u751f\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\uff0c\u4ee5\u53ca \u201c\u4e91\u539f\u751f\u65f6\u4ee3\u9700\u8981\u4ec0\u4e48\u6837\u7684\u5b58\u50a8\u7cfb\u7edf\u201d \u7684\u5706\u684c\u8ba8\u8bba\uff0c\u5171\u8bdd\u4e91\u539f\u751f\u5b58\u50a8\u672a\u6765\u3002\\r\\n\\r\\n## \u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8 HwameiStor\\r\\n\\r\\n\u4e91\u539f\u751f\u5b58\u50a8\u4f5c\u4e3a\u4e91\u539f\u751f\u5806\u6808\u4e2d\u5bb9\u5668\u5316\u64cd\u4f5c\u7684\u5e95\u5c42\u67b6\u6784\u4e4b\u4e00\uff0c\u5c06\u5e95\u5c42\u5b58\u50a8\u670d\u52a1\u66b4\u9732\u7ed9\u5bb9\u5668\u548c\u5fae\u670d\u52a1\uff0c\u53ef\u4ee5\u805a\u5408\u6765\u81ea\u4e0d\u540c\u4ecb\u8d28\u7684\u5b58\u50a8\u8d44\u6e90\uff0c\u901a\u8fc7\u63d0\u4f9b\u6301\u4e45\u5377\u4f7f\u6709\u72b6\u6001\u7684\u5de5\u4f5c\u8d1f\u8f7d\u80fd\u591f\u5728\u5bb9\u5668\u5185\u8fd0\u884c\u3002CNCF \u5b98\u65b9\u5bf9\u4e8e\u4e91\u539f\u751f\u5b58\u50a8\u5f62\u6001\u7684\u5b9a\u4e49\uff0c\u4e00\u822c\u5305\u62ec\u4e09\u70b9\uff0c\u7b2c\u4e00\u662f\u8fd0\u884c\u5728 K8s \u4e0a\uff0c\u5373\u5176\u672c\u8eab\u662f\u5bb9\u5668\u5f62\u6001\u3002\u7b2c\u4e8c\u662f\u4f7f\u7528 K8s \u5bf9\u8c61\u7c7b\uff0c\u4e3b\u8981\u662f\u81ea\u5b9a\u4e49\u8d44\u6e90 Custom Resource Define (CRD)\u3002\u7b2c\u4e09\u662f\u6700\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u5fc5\u987b\u4f7f\u7528\u5bb9\u5668\u5b58\u50a8\u63a5\u53e3 Container Storage Interface (CSI) \u3002HwameiStor \u6b63\u662f\u57fa\u4e8e\u4ee5\u4e0a\u5b9a\u4e49\u5f00\u53d1\u7684\uff0c\u4e00\u4e2a\u7aef\u5230\u7aef\u7684\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7cfb\u7edf\u3002\\r\\n\\r\\n![HwameiStor \u7cfb\u7edf\u67b6\u6784](img/hwameistor-architecture.png)\\r\\n\\r\\nHwameiStor \u6700\u5e95\u5c42\u662f\u4e00\u4e2a\u672c\u5730\u78c1\u76d8\u7ba1\u7406\u5668 Local Disk Manager (LDM)\uff0c\u7ba1\u7406\u5668\u5c06\u5404\u79cd\u5b58\u50a8\u4ecb\u8d28 (\u6bd4\u5982 HDD\u3001SSD \u548c NVMe \u78c1\u76d8) \u5f62\u6210\u672c\u5730\u5b58\u50a8\u8d44\u6e90\u6c60\u8fdb\u884c\u7edf\u4e00\u7ba1\u7406\uff0c\u7ba1\u7406\u548c\u63a5\u5165\u5b8c\u5168\u81ea\u52a8\u3002\u90e8\u7f72\u5b8c HwameiStor \u540e\uff0c\u5373\u53ef\u6839\u636e\u4ecb\u8d28\u7684\u4e0d\u540c\uff0c\u5206\u914d\u81f3\u4e0d\u540c\u7684\u8d44\u6e90\u6c60\u3002\u8d44\u6e90\u6c60\u4e4b\u4e0a\u91c7\u7528\u903b\u8f91\u5377\u7ba1\u7406 Logical Volume Manager (LVM) \u8fdb\u884c\u7ba1\u7406\uff0c\u4f7f\u7528 CSI \u67b6\u6784\u63d0\u4f9b\u5206\u5e03\u5f0f\u7684\u672c\u5730\u6570\u636e\u5377\u670d\u52a1\uff0c\u4e3a\u6709\u72b6\u6001\u7684\u4e91\u539f\u751f\u5e94\u7528\u6216\u7ec4\u4ef6\uff0c\u63d0\u4f9b\u6570\u636e\u6301\u4e45\u5316\u80fd\u529b\u3002\\r\\n\\r\\nHwameiStor \u662f\u4e13\u95e8\u4e3a\u4e91\u539f\u751f\u9700\u6c42\u8bbe\u8ba1\u7684\u5b58\u50a8\u7cfb\u7edf\uff0c\u6709\u9ad8\u53ef\u7528\u3001\u81ea\u52a8\u5316\u3001\u4f4e\u6210\u672c\u3001\u5feb\u901f\u90e8\u7f72\u3001\u9ad8\u6027\u80fd\u7b49\u4f18\u70b9\uff0c\u53ef\u4ee5\u66ff\u4ee3\u6602\u8d35\u7684\u4f20\u7edf\u5b58\u50a8\u533a\u57df\u7f51\u7edc Storage Area Network (SAN)\u3002\u5b83\u6709\u4e09\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a\\r\\n\\r\\n- \u672c\u5730\u76d8\u7ba1\u7406 (LDM)\uff0c\u4f7f\u7528 CRD \u5b9a\u4e49\u53ca\u7ba1\u7406\u672c\u5730\u6570\u636e\u76d8\uff0c\u901a\u8fc7 LDM\uff0c\u5728 K8s\u5185\u90e8\u53ef\u660e\u786e\u83b7\u53d6\u5230\u672c\u5730\u78c1\u76d8\u7684\u5c5e\u6027\u3001\u5927\u5c0f\u7b49\u4fe1\u606f\u3002\\r\\n\\r\\n- \u672c\u5730\u5b58\u50a8 (LS)\uff0c\u5728\u5b9e\u73b0\u672c\u5730\u76d8\u7ba1\u7406\u4e4b\u540e\uff0c\u901a\u8fc7 LVM \u5377\u7ec4\u7ba1\u7406\uff0c\u5c06\u903b\u8f91\u5377 LV \u5206\u914d\u7ed9\u7269\u7406\u5377 PV \u3002\\r\\n\\r\\n- \u8c03\u5ea6\u5668 (Scheduler)\uff0c\u628a\u5bb9\u5668\u8c03\u5ea6\u5230\u672c\u5730\u6709\u6570\u636e\u7684\u8282\u70b9\u4e0a\u3002\\r\\n\\r\\nHwameiStor \u7684\u6838\u5fc3\u5728\u4e8e\u81ea\u5b9a\u4e49\u8d44\u6e90 CRD \u7684\u5b9a\u4e49\u53ca\u5b9e\u73b0\uff0c\u5728 K8s \u5df2\u6709 PersistentVolume (PV) \u548c PersistentVolumeClaim (PVC) \u5bf9\u8c61\u7c7b\u4e4b\u4e0a\uff0cHwameistor \u5b9a\u4e49\u4e86\u66f4\u4e30\u5bcc\u7684\u5bf9\u8c61\u7c7b\u628a PV/PVC \u548c\u672c\u5730\u6570\u636e\u76d8\u5173\u8054\u8d77\u6765\u3002\\r\\n\\r\\nHwameiStor \u6709\u56db\u70b9\u7279\u6027\uff1a\\r\\n\\r\\n- \u81ea\u52a8\u5316\u8fd0\u7ef4\u7ba1\u7406\uff0c\u81ea\u52a8\u53d1\u73b0\u3001\u8bc6\u522b\u3001\u7ba1\u7406\u3001\u5206\u914d\u78c1\u76d8\uff0c\u6839\u636e\u4eb2\u548c\u6027\u667a\u80fd\u8c03\u5ea6\u5e94\u7528\u548c\u6570\u636e\uff0c\u8fd8\u53ef\u81ea\u52a8\u76d1\u6d4b\u78c1\u76d8\u72b6\u6001\u5e76\u53ca\u65f6\u9884\u8b66\u3002\\r\\n- \u9ad8\u53ef\u7528\u7684\u6570\u636e\u652f\u6301\uff0cHwameiStor \u4f7f\u7528\u8de8\u8282\u70b9\u526f\u672c\u540c\u6b65\u6570\u636e\uff0c\u5b9e\u73b0\u9ad8\u53ef\u7528\uff0c\u53d1\u751f\u95ee\u9898\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u5c06\u5e94\u7528\u8c03\u5ea6\u5230\u9ad8\u53ef\u7528\u6570\u636e\u8282\u70b9\u4e0a\uff0c\u4fdd\u8bc1\u5e94\u7528\u7684\u8fde\u7eed\u6027\u3002\\r\\n- \u4e30\u5bcc\u7684\u6570\u636e\u5377\u7c7b\u578b\uff0cHwameiStor \u805a\u5408 HDD\u3001SSD\u3001NVMe \u7c7b\u578b\u7684\u78c1\u76d8\uff0c\u63d0\u4f9b\u4f4e\u5ef6\u65f6\uff0c\u9ad8\u541e\u5410\u7684\u6570\u636e\u670d\u52a1\u3002\\r\\n- \u7075\u6d3b\u52a8\u6001\u7684\u7ebf\u6027\u6269\u5c55\uff0cHwameiStor \u6839\u636e\u96c6\u7fa4\u89c4\u6a21\u5927\u5c0f\u8fdb\u884c\u52a8\u6001\u7684\u6269\u5bb9\uff0c\u7075\u6d3b\u6ee1\u8db3\u5e94\u7528\u7684\u6570\u636e\u6301\u4e45\u5316\u9700\u6c42\u3002\\r\\n\\r\\nHwameiStor \u7684\u5e94\u7528\u573a\u666f\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u4e09\u7c7b\uff1a\\r\\n\\r\\n- \u9002\u914d\u9ad8\u53ef\u7528\u67b6\u6784\u4e2d\u95f4\u4ef6\\r\\n  Kafka\u3001ElasticSearch\u3001Redis \u7b49\uff0c\u8fd9\u7c7b\u4e2d\u95f4\u4ef6\u5e94\u7528\u81ea\u8eab\u5177\u5907\u9ad8\u53ef\u7528\u67b6\u6784\uff0c\u540c\u65f6\u5bf9\u6570\u636e\u7684 IO \u8bbf\u95ee\u6709\u5f88\u9ad8\u8981\u6c42\u3002HwameiStor \u63d0\u4f9b\u7684\u57fa\u4e8e LVM \u7684\u5355\u526f\u672c\u672c\u5730\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u6ee1\u8db3\u5b83\u4eec\u7684\u8981\u6c42\u3002\\r\\n\\r\\n- \u4e3a\u5e94\u7528\u63d0\u4f9b\u9ad8\u53ef\u7528\u6570\u636e\u5377\\r\\n  MySQL \u7b49 OLTP \u6570\u636e\u5e93\uff0c\u8981\u6c42\u5e95\u5c42\u5b58\u50a8\u63d0\u4f9b\u9ad8\u53ef\u7528\u7684\u6570\u636e\u5b58\u50a8\uff0c\u5f53\u53d1\u751f\u95ee\u9898\u65f6\u53ef\u5feb\u901f\u6062\u590d\u6570\u636e\uff0c\u540c\u65f6\uff0c\u4e5f\u8981\u6c42\u4fdd\u8bc1\u9ad8\u6027\u80fd\u7684\u6570\u636e\u8bbf\u95ee\u3002HwameiStor \u63d0\u4f9b\u7684\u53cc\u526f\u672c\u7684\u9ad8\u53ef\u7528\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u6ee1\u8db3\u6b64\u7c7b\u9700\u6c42\u3002\\r\\n\\r\\n- \u81ea\u52a8\u5316\u8fd0\u7ef4\u4f20\u7edf\u5b58\u50a8\u8f6f\u4ef6\\r\\n  MinIO\u3001Ceph \u7b49\u5b58\u50a8\u8f6f\u4ef6\uff0c\u9700\u8981\u4f7f\u7528 K8s \u8282\u70b9\u4e0a\u7684\u78c1\u76d8\uff0c\u53ef\u4ee5\u91c7\u7528 PVC/PV \u7684\u65b9\u5f0f\uff0c\u901a\u8fc7 CSI \u9a71\u52a8\u81ea\u52a8\u5316\u5730\u4f7f\u7528 HwameiStor \u7684\u5355\u526f\u672c\u672c\u5730\u5377\uff0c\u5feb\u901f\u54cd\u5e94\u4e1a\u52a1\u7cfb\u7edf\u63d0\u51fa\u7684\u90e8\u7f72\u3001\u6269\u5bb9\u3001\u8fc1\u79fb\u7b49\u9700\u6c42\uff0c\u5b9e\u73b0\u57fa\u4e8e K8s \u7684\u81ea\u52a8\u5316\u8fd0\u7ef4\u3002\\r\\n\\r\\n## K8s \u573a\u666f\u4e0b\u7684\u4e91\u539f\u751f\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u2014\u2014\u2014\u2014ZettaStor HASP\\r\\n\\r\\n\u6839\u636e\u4e91\u539f\u751f\u57fa\u91d1\u4f1a (CNCF) 2020 \u5e74\u5ea6\u62a5\u544a\uff0c\u6709\u72b6\u6001\u5e94\u7528\u5df2\u7ecf\u6210\u4e3a\u4e86\u5bb9\u5668\u5e94\u7528\u7684\u4e3b\u6d41\uff0c\u5360\u6bd4\u8fbe\u5230\u4e86 55%\uff0c\u5176\u4e2d\u6709 29% \u5c06\u5b58\u50a8\u5217\u4e3a\u4e86\u91c7\u7528\u5bb9\u5668\u6280\u672f\u7684\u4e3b\u8981\u6311\u6218\uff0c\u800c\u73b0\u6709\u4e91\u539f\u751f\u73af\u5883\u9762\u4e34\u7684\u4e00\u4e2a\u5b58\u50a8\u96be\u9898\uff0c\u5c31\u662f\u6027\u80fd\u4e0e\u53ef\u7528\u6027\u96be\u4ee5\u517c\u987e\uff0c\u5355\u7eaf\u4f7f\u7528\u4e00\u79cd\u5b58\u50a8\uff0c\u65e0\u6cd5\u6ee1\u8db3\u6240\u6709\u9700\u6c42\u3002\u56e0\u6b64\u5728\u6709\u72b6\u6001\u5e94\u7528\u7684\u5b9e\u9645\u843d\u5730\u8fc7\u7a0b\u4e2d\uff0c\u6570\u636e\u5b58\u50a8\u6280\u672f\u662f\u5173\u952e\u3002\\r\\n\\r\\n![\u5b58\u50a8\u65b9\u6848\u5bf9\u6bd4](img/compare-storage.png)\\r\\n\\r\\nZettaStor HASP \u662f\u4e00\u4e2a\u4e91\u539f\u751f\u9ad8\u6027\u80fd\u6570\u636e\u805a\u5408\u5b58\u50a8\u5e73\u53f0\uff0c\u5b83\u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u7528\u6237\u6001\u6587\u4ef6\u7cfb\u7edf\uff0c\u5177\u5907\u8de8\u5f02\u6784\u5b58\u50a8\u591a\u526f\u672c\u5197\u4f59\u4fdd\u62a4\u7684\u80fd\u529b\u3002\u76f8\u6bd4\u4f20\u7edf\u7684\u5206\u5e03\u5f0f\u5b58\u50a8\u7cfb\u7edf\u800c\u8a00\uff0c\u6570\u636e\u526f\u672c\u53ef\u4ee5\u5728\u4e0d\u540c\u7c7b\u578b\u7684\u5b58\u50a8\u7cfb\u7edf\u4e4b\u95f4\u6d41\u52a8\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u5b9e\u73b0\u5b58\u50a8\u8d44\u6e90\u7edf\u4e00\u7075\u6d3b\u7f16\u6392\uff0c\u5e76\u4e0e\u5bb9\u5668\u5e73\u53f0\u7d27\u5bc6\u96c6\u6210\u3002\\r\\n\\r\\n\u4ee5\u4e09\u4e2a\u573a\u666f\u4e3a\u4f8b\uff1a\\r\\n\\r\\n- \u5bf9\u4e8e Kafka\u3001Redis\u3001MongoDB\u3001HDFS \u7b49\u6027\u80fd\u8981\u6c42\u9ad8\uff0c\u4e14\u81ea\u8eab\u5177\u5907\u6570\u636e\u5197\u4f59\u673a\u5236\u7684\u5206\u5e03\u5f0f\u5e94\u7528\uff0cZettaStor HASP \u62e5\u6709\u66f4\u9ad8\u7684\u6570\u636e\u8bbf\u95ee\u6027\u80fd\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5b58\u50a8\u8d44\u6e90\u52a8\u6001\u5206\u914d\u53ca\u7cbe\u7ec6\u5316\u7ba1\u7406\u3002\\r\\n- MySQL\u3001PostgreSQL \u7b49\u81ea\u8eab\u4e0d\u63d0\u4f9b\u6570\u636e\u5197\u4f59\u673a\u5236\uff0c\u53ea\u80fd\u4f9d\u8d56\u5916\u90e8\u5b58\u50a8\uff0c\u820d\u5f03\u672c\u5730\u5b58\u50a8\u7684\u9ad8\u6027\u80fd\uff0cZettaStor HASP \u53ef\u901a\u8fc7\u8de8\u8282\u70b9\u5197\u4f59\u4fdd\u62a4\uff0c\u5b9e\u73b0\u6570\u636e\u7684\u9ad8\u53ef\u7528\uff0c\u540c\u65f6\u517c\u5177\u672c\u5730\u5b58\u50a8\u7684\u9ad8\u6027\u80fd\u3002\\r\\n\\r\\n- \u5bf9\u4e8e\u5173\u952e\u4e1a\u52a1\u800c\u8a00\uff0c\u9700\u8981\u9632\u8303\u4e24\u8282\u70b9\u540c\u65f6\u6545\u969c\u7684\u98ce\u9669\uff0c\u800c ZettaStor HASP \u8de8\u672c\u5730\u53ca\u5916\u90e8\u5b58\u50a8\u7684\u526f\u672c\u5197\u4f59\u4fdd\u62a4\uff0c\u53ef\u4fdd\u969c\u5173\u952e\u4e1a\u52a1\u8fd0\u884c\u65e0\u5fe7\u3002\\r\\n\\r\\n![ZettaStor HASP \u7cfb\u7edf\u67b6\u6784](img/zettastor.png)\\r\\n\\r\\nZettaStor HASP \u5206\u4e3a\u4e09\u5c42\u67b6\u6784\uff0c\u6700\u4e0a\u5c42\u662f\u9ad8\u6027\u80fd\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u662f HASP \u7684\u6838\u5fc3\uff0c\u8fd9\u4e2a\u7528\u6237\u6001\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u5b8c\u5168\u81ea\u4e3b\u7814\u53d1\u7684\uff0c\u5168\u9762\u517c\u5bb9 POSIX \u6807\u51c6\uff0c\u5728\u7528\u6237\u6001\u4e0e\u5185\u6838\u6001\u4e4b\u95f4\u5b9e\u73b0\u96f6\u6570\u636e\u62f7\u8d1d\uff0c\u53ef\u5f7b\u5e95\u53d1\u6325 NVMe SSD/SCM/PM \u7b49\u9ad8\u901f\u4ecb\u8d28\u7684\u6027\u80fd\u3002\u7b2c\u4e8c\u5c42\u662f\u6570\u636e\u670d\u52a1\u5c42\uff0c\u9664\u4e86\u5728\u4e0d\u540c\u8282\u70b9\u7684\u672c\u5730\u5b58\u50a8\u4e4b\u95f4\u3001\u672c\u5730\u5b58\u50a8\u4e0e\u5916\u90e8\u5b58\u50a8\u4e4b\u95f4\u3001\u5f02\u6784\u5916\u90e8\u5b58\u50a8\u4e4b\u95f4\u63d0\u4f9b\u670d\u52a1\uff0c\u8fd8\u53ef\u9488\u5bf9\u5355\u526f\u672c\u548c\u591a\u526f\u672c\u3001\u5f3a\u4e00\u81f4\u6027\u548c\u5f31\u4e00\u81f4\u6027\u5206\u522b\u63d0\u4f9b\u5b58\u50a8\u65b9\u6848\u3002\u7b2c\u4e09\u5c42\u662f\u5b58\u50a8\u7ba1\u7406\u5c42\uff0c\u8d1f\u8d23\u5bf9\u4e0d\u540c\u7684\u5b58\u50a8\u8bbe\u5907\u8fdb\u884c\u4ea4\u4e92\uff0c\u901a\u8fc7\u7edf\u4e00\u7684\u6570\u636e\u683c\u5f0f\u6253\u7834\u8bbe\u5907\u58c1\u5792\u53ca\u6570\u636e\u5b64\u5c9b\uff0c\u8ba9\u6570\u636e\u53ca\u4e1a\u52a1\u80fd\u591f\u8de8\u5f02\u6784\u8bbe\u5907\u81ea\u7531\u6d41\u52a8\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8be5\u7cfb\u7edf\u8fd8\u53ef\u901a\u8fc7 CSI \u63a5\u53e3\u8fdb\u884c\u5b58\u50a8\u8bbe\u5907\u7684\u8c03\u5ea6\u3002\\r\\n\\r\\nZettaStor HASP \u662f\u4e00\u4e2a\u4e0e\u5bb9\u5668\u5e73\u53f0\u7d27\u5bc6\u7ed3\u5408\u7684\u5206\u5e03\u5f0f\u5b58\u50a8\u5e73\u53f0\uff0c\u53ef\u8fdb\u884c\u8d85\u878d\u5408\u90e8\u7f72\u548c CSI \u96c6\u6210\uff0c\u5177\u5907\u8282\u70b9\u4eb2\u548c\u6027\uff0c\u53ef\u5bf9\u7528\u6237 Pod \u8fd0\u884c\u72b6\u6001\u8fdb\u884c\u611f\u77e5\uff0c\u4f7f\u5f97\u5b58\u50a8\u884c\u4e3a\u66f4\u52a0\u9002\u914d\u3002\\r\\n\\r\\n## \u5706\u684c\u8ba8\u8bba\\r\\n\\r\\n### Q1: \u4ec0\u4e48\u662f\u4e91\u539f\u751f\u5b58\u50a8\uff1f\\r\\n\\r\\n[\u90d1\u6cd3\u8d85](https://github.com/alexzhc)\uff1a\u72ed\u4e49\u7684\u4e91\u539f\u751f\u5b58\u50a8\u9700\u8981\u6ee1\u8db3\u4e09\u70b9\uff0c\u7b2c\u4e00\uff0c\u4e0e CSI \u63a5\u53e3\u5b9e\u73b0\u826f\u597d\u7684\u5bf9\u63a5\uff0c\u6ee1\u8db3 CSI \u89c4\u8303\uff1b\u5176\u6b21\uff0c\u9700\u8981\u4ee5\u5bb9\u5668\u7684\u5f62\u5f0f\u90e8\u7f72\u5728 K8s \u4e0a\uff1b\u7b2c\u4e09\uff0c\u5b58\u50a8\u7cfb\u7edf\u5185\u90e8\u7684\u4fe1\u606f\uff0c\u4e5f\u9700\u8981\u901a\u8fc7 CRD \u4ea7\u751f\u65b0\u7684\u5bf9\u8c61\u7c7b\uff0c\u5e76\u6700\u7ec8\u5b58\u50a8\u5728 K8s \u4e2d\u3002\\r\\n\\r\\n[\u51af\u94a6](https://github.com/fengqinah)\uff1a\u4e91\u539f\u751f\u4e0a\u7684\u5b58\u50a8\u662f\u6ee1\u8db3\u591a\u79cd\u7279\u6027\u3001\u591a\u79cd\u9700\u6c42\u7684\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\uff0c\u9664\u4e86\u63d0\u4f9b\u7edf\u4e00\u7684\u5b58\u50a8\u5e73\u53f0\uff0c\u5e94\u5bf9\u4e0d\u540c\u7684\u5b58\u50a8\u5e94\u7528\uff0c\u63d0\u4f9b\u4e0d\u540c\u7684\u5b58\u50a8\u7279\u6027\uff0c\u5b9e\u73b0\u7edf\u4e00\u7eb3\u7ba1\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u5bf9\u63a5 CSI \u63a5\u53e3\uff0c\u5e76\u6253\u901a\u5b58\u50a8\u4e0e K8s \u4e4b\u95f4\u7684\u4ea4\u6d41\u3002\\r\\n\\r\\n[\u725b\u4e50\u5ddd](https://github.com/niulechuan)\uff1a\u73b0\u5728\u5e94\u7528\u6700\u5e7f\u7684\u4e91\u539f\u751f\u5b58\u50a8\uff0c\u8fd8\u662f\u5728\u4e91\u5b58\u50a8\u548c\u6216\u8005\u5206\u5e03\u5f0f\u5b58\u50a8\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u4e91\u539f\u751f\u5316\u3002\u540c\u65f6\uff0c\u4e5f\u6709\u5382\u5546\u5728\u4f20\u7edf\u5b58\u50a8\u5177\u5907\u7684\u7279\u6b8a\u80fd\u529b\u65b9\u9762\u8fdb\u884c\u4e00\u4e9b\u5ef6\u4f38\u7684\u5c1d\u8bd5\u3002\\r\\n\\r\\n### Q2: \u4e91\u539f\u751f\u5b58\u50a8\u5e94\u8be5\u5982\u4f55\u652f\u6301\u4e91\u539f\u751f\u5e94\u7528\uff1f\\r\\n\\r\\n\u51af\u94a6\uff1a\u4e3b\u8981\u5206\u4e3a\u4e24\u4e2a\u65b9\u9762\uff0c\u7b2c\u4e00\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u9700\u8981\u652f\u6301\u4e91\u539f\u751f\u5e94\u7528\u7684\u7279\u6027\uff0c\u7279\u6027\u51b3\u5b9a\u4e86\u5e94\u7528\u5bf9\u4e8e\u5b58\u50a8\u7684\u8981\u6c42\u3002\u7b2c\u4e8c\uff0c\u9700\u8981\u6ee1\u8db3 CSI \u7684\u8981\u6c42\uff0c\u4ee5\u652f\u6301\u4e91\u539f\u751f\u7279\u6b8a\u7684\u9700\u6c42\u3002\\r\\n\\r\\n[\u725b\u4e50\u5ddd](https://github.com/niulechuan)\uff1a\u4ece\u6027\u80fd\u89d2\u5ea6\u6765\u770b\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u9700\u8981\u5168\u65b9\u4f4d\u6ee1\u8db3 CSI \u67b6\u6784\u7684\u8981\u6c42\uff0c\u4ee5\u5e94\u5bf9\u591a\u6837\u5316\u7684\u4e91\u539f\u751f\u573a\u666f\u3002\u4e3a\u4e86\u7ed9\u4e91\u539f\u751f\u5e94\u7528\u63d0\u4f9b\u826f\u597d\u7684\u5e95\u5c42\u652f\u6301\u548c\u54cd\u5e94\u4fdd\u969c\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u9700\u8981\u5b9e\u73b0\u9ad8\u6548\u8fd0\u7ef4\u3002\u6839\u636e\u73b0\u5b9e\u60c5\u51b5\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u5728\u6210\u672c\u3001\u8fc1\u79fb\u6027\u548c\u6280\u672f\u652f\u6301\u65b9\u9762\u4e5f\u6709\u8003\u91cf\u3002\u548c\u4e91\u539f\u751f\u5e94\u7528\u4e00\u6837\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u9700\u8981 \u201c\u5f39\u6027\u201d\uff0c\u8fd0\u7b97\u65b9\u9762\u5e94\u5f53\u5177\u5907\u5f39\u6027\u6269\u5c55\u80fd\u529b\uff0c\u6570\u636e\u65b9\u9762\u4e5f\u9700\u8981\u5b9e\u73b0\u6269\u5bb9\u7f29\u5bb9\uff0c\u4ee5\u53ca\u51b7\u70ed\u6570\u636e\u4e4b\u95f4\u7684\u8f6c\u6362\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u5e94\u5f53\u5177\u5907\u4e00\u4e2a\u5f00\u653e\u7684\u751f\u6001\u3002\\r\\n\\r\\n### Q3:\u4e91\u539f\u751f\u5b58\u50a8\u548c\u4f20\u7edf\u5b58\u50a8\u4e4b\u95f4\u7684\u5f02\u540c\u70b9\u53ca\u4f18\u52a3\u52bf\uff1f\\r\\n\\r\\n[\u90d1\u6cd3\u8d85](https://github.com/alexzhc)\uff1a\u4e91\u539f\u751f\u5b58\u50a8\u90e8\u7f72\u4e4b\u540e\u662f\u805a\u5408\u5f62\u6001\uff0c\u800c\u4f20\u7edf\u5b58\u50a8\u63a5\u5165 K8s \u4e00\u822c\u662f\u5206\u79bb\u5f62\u6001\u3002\u4e91\u539f\u751f\u5b58\u50a8\u56e0\u4e3a\u8fd0\u884c\u5728 K8s \u4e0a\uff0c\u6709\u5229\u4e8e\u5f00\u53d1\u5fae\u670d\u52a1\uff0c\u800c\u4f20\u7edf\u5b58\u50a8\u5f80\u5f80\u9700\u8981\u5f00\u53d1\u8005\u8fdb\u884c\u5b58\u50a8\u7684 API \u6269\u5c55\u3002\u4f46\u662f\uff0c\u805a\u5408\u5f62\u6001\u4e5f\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\uff0c\u5bfc\u81f4 K8s \u7684\u95ee\u9898\u5bb9\u6613\u8513\u5ef6\u5230\u5b58\u50a8\u5f53\u4e2d\uff0c\u7ed9\u8fd0\u7ef4\u5e26\u6765\u56f0\u96be\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u4e91\u539f\u751f\u5b58\u50a8\u8fd8\u5b58\u5728\u7f51\u7edc\u5171\u4eab\u548c\u786c\u76d8\u8d1f\u8f7d\u65b9\u9762\u7684\u95ee\u9898\u3002\\r\\n\\r\\n[\u51af\u94a6](https://github.com/fengqinah)\uff1a\u5916\u90e8\u5b58\u50a8\u4e2d\uff0c\u5b58\u50a8\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u4e4b\u95f4\u7684\u5f71\u54cd\u5f88\u4f4e\uff0c\u540e\u7aef\u5b58\u50a8\u4e00\u822c\u4e3a\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u76f8\u5bf9\u8f83\u9ad8\u3002\u4f46\u5728\u4e91\u539f\u751f\u573a\u666f\u4e0b\uff0c\u5355\u4e00\u4f7f\u7528\u5916\u90e8\u5b58\u50a8\u5b58\u5728\u4e00\u5b9a\u7684\u52a3\u52bf\uff0c\u6027\u80fd\u4e0a\u4f1a\u589e\u52a0\u7f51\u7edc\u7684\u6d88\u8017\uff0c\u540c\u65f6\u8fd8\u5b58\u5728\u989d\u5916\u6210\u672c\u589e\u52a0\u4ee5\u53ca\u4e0e K8s \u7684\u8054\u52a8\u4e0d\u8db3\u7684\u95ee\u9898\u3002\\r\\n\\r\\n### Q4: \u4e91\u539f\u751f\u5b58\u50a8\u4e2d\u5e94\u8be5\u5982\u4f55\u8d4b\u80fd\u4f20\u7edf\u5b58\u50a8\uff1f\\r\\n\\r\\n[\u725b\u4e50\u5ddd](https://github.com/niulechuan)\uff1a\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u8feb\u5207\u7684\u9700\u6c42\uff0c\u5bf9\u4e8e K8s \u539f\u751f\u7684\u80fd\u529b\uff0c\u6bd4\u5982\u5220\u9664\u3001\u521b\u5efa\u3001\u6269\u5bb9\u7684\u80fd\u529b\uff0c\u4e3b\u8981\u662f\u901a\u8fc7 CRD \u8fdb\u884c\u5b9e\u73b0\uff0c\u793e\u533a\u4e5f\u5728\u79ef\u6781\u90e8\u7f72\u3002\u540c\u65f6\uff0c\u4f20\u7edf\u5b58\u50a8\u4e2d\u79ef\u6512\u7684\u4e00\u4e9b\u80fd\u529b\uff0c\u5c1a\u672a\u5728\u4e91\u539f\u751f\u5b58\u50a8\u4f53\u7cfb\u4e2d\u5f97\u5230\u4f53\u73b0\uff0c\u6bd4\u5982\u5b9a\u65f6\u4efb\u52a1\u3001\u53ef\u89c2\u6d4b\u6027\u7b49\u3002\u5982\u4f55\u5728\u5e73\u53f0\u4fa7\u66f4\u597d\u5730\u8ba9\u4e91\u539f\u751f\u8d4b\u80fd\u4f20\u7edf\u5b58\u50a8\uff0c\u5145\u5206\u53d1\u6325\u53cc\u65b9\u7684\u4f18\u52bf\u80fd\u529b\uff0c\u5c06\u4e91\u539f\u751f\u5b58\u50a8\u53d1\u5c55\u6210\u719f\uff0c\u8fd8\u6709\u5f88\u591a\u9700\u8981\u52aa\u529b\u7684\u7a7a\u95f4\uff0c\u6211\u4eec\u56e2\u961f\u4e5f\u6b63\u5728\u8fdb\u884c\u8fd9\u65b9\u9762\u7684\u7814\u53d1\u3002\\r\\n\\r\\n[\u90d1\u6cd3\u8d85](https://github.com/alexzhc)\uff1a\u518d\u603b\u7ed3\u4e00\u4e2a\u70b9\uff0c\u5728\u5e38\u89c4\u7684\u505a\u6cd5\u91cc\uff0cK8s \u5bf9\u63a5\u4f20\u7edf\u5b58\u50a8\uff0c\u9700\u8981\u5b8c\u6210\u7684\u662f CSI \u9a71\u52a8\u96c6\u5408\uff0c\u4f46\u8fd9\u53ea\u5c40\u9650\u4e8e\u8868\u9762\uff0cCSI \u5b9a\u4e49\u4e86\u4e00\u90e8\u5206\u5b58\u50a8\u7684\u64cd\u4f5c\u6d41\u7a0b\uff0c\u4f46\u66f4\u591a\u8fd8\u53ea\u662f\u4e00\u4e2a\u63a5\u53e3\u3002\u6240\u4ee5\uff0cCSI \u793e\u533a\u662f\u5426\u5e94\u8be5\u5bf9\u5e38\u89c4\u5b58\u50a8\u7684\u4e00\u4e9b\u529f\u80fd (\u4f8b\u5982\u5b9a\u65f6\u5907\u4efd\u3001\u9ad8\u53ef\u7528\u7b49) \u7528 CRD \u8fdb\u884c\u5b9a\u4e49\uff1f\u800c\u5382\u5546\u80fd\u5426\u505a\u4e00\u90e8\u5206\u5de5\u4f5c\uff0c\u628a\u4e00\u4e9b\u9ad8\u7ea7\u7684\u3001\u7279\u6b8a\u7684\u6d41\u7a0b\u7528 CRD \u8fdb\u884c\u5b9a\u4e49\uff1f\u4ece\u800c\u4f7f\u5f97 K8s \u80fd\u5728\u5b58\u50a8\u9886\u57df\u5f97\u5230\u66f4\u5e7f\u6cdb\u7684\u5e94\u7528\uff0c\u662f\u503c\u5f97\u6211\u4eec\u53bb\u601d\u8003\u548c\u5b9e\u8df5\u7684\u3002"},{"id":"test","metadata":{"permalink":"/cn/blog/test","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-06-06_tidb-test.md","source":"@site/i18n/cn/docusaurus-plugin-content-blog/2022-06-06_tidb-test.md","title":"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5","description":"\u672c\u6b21\u6d4b\u8bd5\u73af\u5883\u4e3a Kubernetes 1.22\uff0c\u5bf9\u63a5 HwameiStor \u672c\u5730\u5b58\u50a8\u540e\uff0c\u6210\u529f\u90e8\u7f72 TiDB 1.3\uff0c\u968f\u540e\u6267\u884c\u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\u3001\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5\u53ca\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u3002","date":"2022-06-06T00:00:00.000Z","formattedDate":"June 6, 2022","tags":[{"label":"Test","permalink":"/cn/blog/tags/test"}],"readingTime":19.785,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u71d5\u5b81","title":"\u5f00\u53d1\u8005","url":"https://github.com/zhaosimon","imageURL":"https://avatars.githubusercontent.com/u/36882380?v=4","key":"Simon"},{"name":"\u8981\u6d77\u5cf0","title":"\u7f16\u8f91","url":"https://github.com/windsonsea","imageURL":"https://github.com/windsonsea.png","key":"Michael"}],"frontMatter":{"slug":"test","title":"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5","authors":["Simon","Michael"],"tags":["Test"]},"prevItem":{"title":"\u76f4\u64ad\u56de\u987e\u8bba\u9053\u539f\u751f\uff1a\u4e91\u539f\u751f\u5b58\u50a8","permalink":"/cn/blog/live"},"nextItem":{"title":"LV \u548c LVReplica","permalink":"/cn/blog/3"}},"content":"\u672c\u6b21\u6d4b\u8bd5\u73af\u5883\u4e3a Kubernetes 1.22\uff0c\u5bf9\u63a5 HwameiStor \u672c\u5730\u5b58\u50a8\u540e\uff0c\u6210\u529f\u90e8\u7f72 TiDB 1.3\uff0c\u968f\u540e\u6267\u884c\u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\u3001\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5\u53ca\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u3002\\r\\n\\r\\n\u5168\u90e8\u6d4b\u8bd5\u6210\u529f\u901a\u8fc7\uff0c\u8bc1\u5b9e HwameiStor \u80fd\u591f\u5b8c\u7f8e\u652f\u6491 TiDB \u8fd9\u7c7b\u9ad8\u53ef\u7528\u3001\u5f3a\u4e00\u81f4\u8981\u6c42\u8f83\u9ad8\u3001\u6570\u636e\u89c4\u6a21\u8f83\u5927\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5e94\u7528\u573a\u666f\u3002\\r\\n\\r\\n## TiDB \u7b80\u4ecb\\r\\n\\r\\nTiDB \u662f\u4e00\u6b3e\u540c\u65f6\u652f\u6301\u5728\u7ebf\u4e8b\u52a1\u5904\u7406 (OLTP) \u4e0e\u5728\u7ebf\u5206\u6790\u5904\u7406 (OATP) \u7684\u878d\u5408\u578b\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u4ea7\u54c1\uff0c\u5177\u5907\u6c34\u5e73\u6269\u7f29\u5bb9\u3001\u91d1\u878d\u7ea7\u9ad8\u53ef\u7528\u3001\u5b9e\u65f6 HTAP\uff08\u5373\u540c\u65f6\u652f\u6301 OLTP \u548c OATP\uff09\u3001\u4e91\u539f\u751f\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\uff0c\u517c\u5bb9 MySQL 5.7 \u534f\u8bae\u548c MySQL \u751f\u6001\u7b49\u91cd\u8981\u7279\u6027\u3002TiDB \u7684\u76ee\u6807\u662f\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u7ad9\u5f0f\u7684 OLTP\u3001OLAP\u3001HTAP \u89e3\u51b3\u65b9\u6848\uff0c\u9002\u5408\u9ad8\u53ef\u7528\u3001\u5f3a\u4e00\u81f4\u8981\u6c42\u8f83\u9ad8\u3001\u6570\u636e\u89c4\u6a21\u8f83\u5927\u7b49\u5404\u79cd\u5e94\u7528\u573a\u666f\u3002\\r\\n\\r\\n### TiDB \u6574\u4f53\u67b6\u6784\\r\\n\\r\\nTiDB \u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5c06\u6574\u4f53\u67b6\u6784\u62c6\u5206\u6210\u4e86\u591a\u4e2a\u6a21\u5757\uff0c\u5404\u6a21\u5757\u4e4b\u95f4\u4e92\u76f8\u901a\u4fe1\uff0c\u7ec4\u6210\u5b8c\u6574\u7684 TiDB \u7cfb\u7edf\u3002\u5bf9\u5e94\u7684\u67b6\u6784\u56fe\u5982\u4e0b\uff1a\\r\\n\\r\\n![TiDB \u67b6\u6784\u56fe](img/architecture.png)\\r\\n\\r\\n- **TiDB Server**\\r\\n  \\r\\n  SQL \u5c42\u5bf9\u5916\u66b4\u9732 MySQL \u534f\u8bae\u7684\u8fde\u63a5\u7aef\u70b9\uff0c\u8d1f\u8d23\u63a5\u53d7\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\uff0c\u6267\u884c SQL \u89e3\u6790\u548c\u4f18\u5316\uff0c\u6700\u7ec8\u751f\u6210\u5206\u5e03\u5f0f\u6267\u884c\u8ba1\u5212\u3002TiDB \u5c42\u672c\u8eab\u662f\u65e0\u72b6\u6001\u7684\uff0c\u5b9e\u8df5\u4e2d\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a TiDB \u5b9e\u4f8b\uff0c\u901a\u8fc7\u8d1f\u8f7d\u5747\u8861\u7ec4\u4ef6\uff08\u5982 LVS\u3001HAProxy \u6216 F5\uff09\u5bf9\u5916\u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u5165\u5730\u5740\uff0c\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u53ef\u4ee5\u5747\u5300\u5730\u5206\u644a\u5728\u591a\u4e2a TiDB \u5b9e\u4f8b\u4e0a\u4ee5\u8fbe\u5230\u8d1f\u8f7d\u5747\u8861\u7684\u6548\u679c\u3002TiDB Server \u672c\u8eab\u5e76\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u53ea\u662f\u89e3\u6790 SQL\uff0c\u5c06\u5b9e\u9645\u7684\u6570\u636e\u8bfb\u53d6\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5e95\u5c42\u7684\u5b58\u50a8\u8282\u70b9 TiKV\uff08\u6216 TiFlash\uff09\u3002\\r\\n\\r\\n- **PD (Placement Driver) Server**\\r\\n  \\r\\n  \u6574\u4e2a TiDB \u96c6\u7fa4\u7684\u5143\u4fe1\u606f\u7ba1\u7406\u6a21\u5757\uff0c\u8d1f\u8d23\u5b58\u50a8\u6bcf\u4e2a TiKV \u8282\u70b9\u5b9e\u65f6\u7684\u6570\u636e\u5206\u5e03\u60c5\u51b5\u548c\u96c6\u7fa4\u7684\u6574\u4f53\u62d3\u6251\u7ed3\u6784\uff0c\u63d0\u4f9b TiDB Dashboard \u7ba1\u63a7\u754c\u9762\uff0c\u5e76\u4e3a\u5206\u5e03\u5f0f\u4e8b\u52a1\u5206\u914d\u4e8b\u52a1 ID\u3002PD \u4e0d\u4ec5\u5b58\u50a8\u5143\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u4f1a\u6839\u636e TiKV \u8282\u70b9\u5b9e\u65f6\u4e0a\u62a5\u7684\u6570\u636e\u5206\u5e03\u72b6\u6001\uff0c\u4e0b\u53d1\u6570\u636e\u8c03\u5ea6\u547d\u4ee4\u7ed9\u5177\u4f53\u7684 TiKV \u8282\u70b9\uff0c\u53ef\u4ee5\u8bf4\u662f\u6574\u4e2a\u96c6\u7fa4\u7684\u201c\u5927\u8111\u201d\u3002\u6b64\u5916\uff0cPD \u672c\u8eab\u4e5f\u662f\u7531\u81f3\u5c11 3 \u4e2a\u8282\u70b9\u6784\u6210\uff0c\u62e5\u6709\u9ad8\u53ef\u7528\u7684\u80fd\u529b\u3002\u5efa\u8bae\u90e8\u7f72\u5947\u6570\u4e2a PD \u8282\u70b9\u3002\\r\\n\\r\\n- **\u5b58\u50a8\u8282\u70b9**\\r\\n\\t\\r\\n\\t- TiKV Server\uff1a\u8d1f\u8d23\u5b58\u50a8\u6570\u636e\uff0c\u4ece\u5916\u90e8\u770b TiKV \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u63d0\u4f9b\u4e8b\u52a1\u7684 Key-Value \u5b58\u50a8\u5f15\u64ce\u3002\u5b58\u50a8\u6570\u636e\u7684\u57fa\u672c\u5355\u4f4d\u662f Region\uff0c\u6bcf\u4e2a Region \u8d1f\u8d23\u5b58\u50a8\u4e00\u4e2a Key Range\uff08\u4ece StartKey \u5230 EndKey \u7684\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\uff09\u7684\u6570\u636e\uff0c\u6bcf\u4e2a TiKV \u8282\u70b9\u4f1a\u8d1f\u8d23\u591a\u4e2a Region\u3002TiKV \u7684 API \u5728 KV \u952e\u503c\u5bf9\u5c42\u9762\u63d0\u4f9b\u5bf9\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u539f\u751f\u652f\u6301\uff0c\u9ed8\u8ba4\u63d0\u4f9b\u4e86 SI (Snapshot Isolation) \u7684\u9694\u79bb\u7ea7\u522b\uff0c\u8fd9\u4e5f\u662f TiDB \u5728 SQL \u5c42\u9762\u652f\u6301\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u6838\u5fc3\u3002TiDB \u7684 SQL \u5c42\u505a\u5b8c SQL \u89e3\u6790\u540e\uff0c\u4f1a\u5c06 SQL \u7684\u6267\u884c\u8ba1\u5212\u8f6c\u6362\u4e3a\u5bf9 TiKV API \u7684\u5b9e\u9645\u8c03\u7528\u3002\u6240\u4ee5\uff0c\u6570\u636e\u90fd\u5b58\u50a8\u5728 TiKV \u4e2d\u3002\u53e6\u5916\uff0cTiKV \u4e2d\u7684\u6570\u636e\u90fd\u4f1a\u81ea\u52a8\u7ef4\u62a4\u591a\u526f\u672c\uff08\u9ed8\u8ba4\u4e3a\u4e09\u526f\u672c\uff09\uff0c\u5929\u7136\u652f\u6301\u9ad8\u53ef\u7528\u548c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u3002\\r\\n\\r\\n\\t- TiFlash\uff1aTiFlash \u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u5b58\u50a8\u8282\u70b9\u3002\u548c\u666e\u901a TiKV \u8282\u70b9\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u5728 TiFlash \u5185\u90e8\uff0c\u6570\u636e\u662f\u4ee5\u5217\u5f0f\u7684\u5f62\u5f0f\u8fdb\u884c\u5b58\u50a8\uff0c\u4e3b\u8981\u7684\u529f\u80fd\u662f\u4e3a\u5206\u6790\u578b\u7684\u573a\u666f\u52a0\u901f\u3002\\r\\n\\r\\n### TiDB \u6570\u636e\u5e93\u7684\u5b58\u50a8\\r\\n\\r\\n![TiDB\u6570\u636e\u5e93\u7684\u5b58\u50a8](img/storage.png)\\r\\n\\r\\n- **\u952e\u503c\u5bf9 (Key-Value Pair)**\\r\\n\\r\\n  TiKV \u7684\u9009\u62e9\u662f Key-Value \u6a21\u578b\uff0c\u5e76\u4e14\u63d0\u4f9b\u6709\u5e8f\u904d\u5386\u65b9\u6cd5\u3002TiKV \u6570\u636e\u5b58\u50a8\u7684\u4e24\u4e2a\u5173\u952e\u70b9\uff1a\\r\\n\\r\\n  - \u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684 Map\uff08\u53ef\u4ee5\u7c7b\u6bd4\u4e00\u4e0b C++ \u7684 std::map\uff09\uff0c\u4e5f\u5c31\u662f\u5b58\u50a8\u7684\u662f Key-Value Pairs\u3002\\r\\n\\r\\n  - \u8fd9\u4e2a Map \u4e2d\u7684 Key-Value pair \u6309\u7167 Key \u7684\u4e8c\u8fdb\u5236\u987a\u5e8f\u6709\u5e8f\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5 Seek \u5230\u67d0\u4e00\u4e2a Key \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u4e0d\u65ad\u5730\u8c03\u7528 Next \u65b9\u6cd5\u4ee5\u9012\u589e\u7684\u987a\u5e8f\u83b7\u53d6\u6bd4\u8fd9\u4e2a Key \u5927\u7684 Key-Value\u3002\\r\\n\\r\\n- **\u672c\u5730\u5b58\u50a8\uff08Rocks DB\uff09**\\r\\n  \\r\\n  \u4efb\u4f55\u6301\u4e45\u5316\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u6570\u636e\u7ec8\u5f52\u8981\u4fdd\u5b58\u5728\u78c1\u76d8\u4e0a\uff0cTiKV \u4e5f\u4e0d\u4f8b\u5916\u3002\u4f46\u662f TiKV \u6ca1\u6709\u9009\u62e9\u76f4\u63a5\u5411\u78c1\u76d8\u4e0a\u5199\u6570\u636e\uff0c\u800c\u662f\u628a\u6570\u636e\u4fdd\u5b58\u5728 RocksDB \u4e2d\uff0c\u5177\u4f53\u7684\u6570\u636e\u843d\u5730\u7531 RocksDB \u8d1f\u8d23\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u662f\u5f00\u53d1\u4e00\u4e2a\u5355\u673a\u5b58\u50a8\u5f15\u64ce\u5de5\u4f5c\u91cf\u5f88\u5927\uff0c\u7279\u522b\u662f\u8981\u505a\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u5355\u673a\u5f15\u64ce\uff0c\u9700\u8981\u505a\u5404\u79cd\u7ec6\u81f4\u7684\u4f18\u5316\uff0c\u800c RocksDB \u662f\u7531 Facebook \u5f00\u6e90\u7684\u4e00\u4e2a\u975e\u5e38\u4f18\u79c0\u7684\u5355\u673a KV \u5b58\u50a8\u5f15\u64ce\uff0c\u53ef\u4ee5\u6ee1\u8db3 TiKV \u5bf9\u5355\u673a\u5f15\u64ce\u7684\u5404\u79cd\u8981\u6c42\u3002\u8fd9\u91cc\u53ef\u4ee5\u7b80\u5355\u5730\u8ba4\u4e3a RocksDB \u662f\u4e00\u4e2a\u5355\u673a\u7684\u6301\u4e45\u5316 Key-Value Map\u3002\\r\\n\\r\\n- **Raft \u534f\u8bae**\\r\\n  \\r\\n  TiKV \u9009\u62e9\u4e86 Raft \u7b97\u6cd5\u6765\u4fdd\u8bc1\u5355\u673a\u5931\u6548\u7684\u60c5\u51b5\u4e0b\u6570\u636e\u4e0d\u4e22\u5931\u4e0d\u51fa\u9519\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u628a\u6570\u636e\u590d\u5236\u5230\u591a\u53f0\u673a\u5668\u4e0a\uff0c\u8fd9\u6837\u67d0\u4e00\u53f0\u673a\u5668\u65e0\u6cd5\u63d0\u4f9b\u670d\u52a1\u65f6\uff0c\u5176\u4ed6\u673a\u5668\u4e0a\u7684\u526f\u672c\u8fd8\u80fd\u63d0\u4f9b\u670d\u52a1\u3002\u8fd9\u4e2a\u6570\u636e\u590d\u5236\u65b9\u6848\u53ef\u9760\u5e76\u4e14\u9ad8\u6548\uff0c\u80fd\u5904\u7406\u526f\u672c\u5931\u6548\u7684\u60c5\u51b5\u3002\\r\\n\\r\\n- **Region**\\r\\n  \\r\\n  TiKV \u9009\u62e9\u4e86\u6309\u7167 Key \u5212\u5206 Range\u3002\u67d0\u4e00\u6bb5\u8fde\u7eed\u7684 Key \u90fd\u4fdd\u5b58\u5728\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4e0a\u3002\u5c06\u6574\u4e2a Key-Value \u7a7a\u95f4\u5206\u6210\u5f88\u591a\u6bb5\uff0c\u6bcf\u4e00\u6bb5\u662f\u4e00\u7cfb\u5217\u8fde\u7eed\u7684 Key\uff0c\u79f0\u4e3a\u4e00\u4e2a Region\u3002\u5c3d\u91cf\u8ba9\u6bcf\u4e2a Region \u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u4e0d\u8d85\u8fc7\u4e00\u5b9a\u7684\u5927\u5c0f\uff0c\u76ee\u524d\u5728 TiKV \u4e2d\u9ed8\u8ba4\u662f\u4e0d\u8d85\u8fc7 96MB\u3002\u6bcf\u4e00\u4e2a Region \u90fd\u53ef\u4ee5\u7528 [StartKey\uff0cEndKey] \u8fd9\u6837\u7684\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\u6765\u63cf\u8ff0\u3002\\r\\n\\r\\n- **MVCC**\\r\\n  \\r\\n  TiKV\u5b9e\u73b0\u4e86\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236 (MVCC)\u3002\\r\\n\\r\\n- **\u5206\u5e03\u5f0f ACID \u4e8b\u52a1**\\r\\n  \\r\\n  TiKV \u7684\u4e8b\u52a1\u91c7\u7528\u7684\u662f Google \u5728 BigTable \u4e2d\u4f7f\u7528\u7684\u4e8b\u52a1\u6a21\u578b\uff1aPercolator\u3002\\r\\n\\r\\n## \u642d\u5efa\u6d4b\u8bd5\u73af\u5883\\r\\n\\r\\n### Kubernetes \u96c6\u7fa4\\r\\n\\r\\n\u672c\u6b21\u6d4b\u8bd5\u4f7f\u7528\u4e09\u53f0\u865a\u62df\u673a\u8282\u70b9\u90e8\u7f72 Kubernetes \u96c6\u7fa4\uff0c\u5305\u62ec 1 \u4e2a master \u8282\u70b9\u548c 2 \u4e2a worker\u8282\u70b9\u3002Kubelete \u7248\u672c\u4e3a 1.22.0\u3002\\r\\n\\r\\n![k8s cluster](img/k8scluster.png)\\r\\n\\r\\n### HwameiStor \u672c\u5730\u5b58\u50a8\\r\\n\\r\\n1. \u5728 Kubernetes \u96c6\u7fa4\u4e0a\u90e8\u7f72 HwameiStor \u672c\u5730\u5b58\u50a8\\r\\n\\r\\n   ![HwameiStor \u672c\u5730\u5b58\u50a8](img/hwameistor.png)\\r\\n\\r\\n2. \u5728\u4e24\u53f0 worker \u8282\u70b9\u4e0a\u5206\u522b\u4e3a HwameiStor \u914d\u7f6e\u4e00\u5757 100G \u7684\u672c\u5730\u78c1\u76d8 sdb\\r\\n\\r\\n   ![sdb1](img/sdb1.png)\\r\\n\\r\\n   ![sdb2](img/sdb2.png)\\r\\n\\r\\n3. \u521b\u5efa storagClass\\r\\n\\r\\n   ![\u521b\u5efa StorageClass](img/storageclass.png)\\r\\n\\r\\n### \u5728 Kubernetes \u4e0a\u90e8\u7f72 TiDB\\r\\n\\r\\n\u53ef\u4ee5\u4f7f\u7528 TiDB Operator \u5728 Kubernetes \u4e0a\u90e8\u7f72 TiDB\u3002TiDB Operator \u662f Kubernetes \u4e0a\u7684 TiDB \u96c6\u7fa4\u81ea\u52a8\u8fd0\u7ef4\u7cfb\u7edf\uff0c\u63d0\u4f9b\u5305\u62ec\u90e8\u7f72\u3001\u5347\u7ea7\u3001\u6269\u7f29\u5bb9\u3001\u5907\u4efd\u6062\u590d\u3001\u914d\u7f6e\u53d8\u66f4\u7684 TiDB \u5168\u751f\u547d\u5468\u671f\u7ba1\u7406\u3002\u501f\u52a9 TiDB Operator\uff0cTiDB \u53ef\u4ee5\u65e0\u7f1d\u8fd0\u884c\u5728\u516c\u6709\u4e91\u6216\u79c1\u6709\u90e8\u7f72\u7684 Kubernetes \u96c6\u7fa4\u4e0a\u3002\\r\\n\\r\\nTiDB \u4e0e TiDB Operator \u7248\u672c\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a\\r\\n\\r\\n| TiDB  \u7248\u672c         | \u9002\u7528\u7684 TiDB Operator \u7248\u672c |\\r\\n| ------------------ | ------------------------- |\\r\\n| dev                | dev                       |\\r\\n| TiDB  >= 5.4       | 1.3                       |\\r\\n| 5.1  <= TiDB < 5.4 | 1.3\uff08\u63a8\u8350\uff09\uff0c1.2          |\\r\\n| 3.0  <= TiDB < 5.1 | 1.3\uff08\u63a8\u8350\uff09\uff0c1.2\uff0c1.1     |\\r\\n| 2.1  <= TiDB < 3.0 | 1.0\uff08\u505c\u6b62\u7ef4\u62a4\uff09           |\\r\\n\\r\\n#### \u90e8\u7f72 TiDB Operator\\r\\n\\r\\n1. \u5b89\u88c5 TiDB CRDs\\r\\n\\r\\n   ```bash\\r\\n   kubectl apply -f https://raw.githubusercontent.com/pingcap/tidb-operator/master/manifests/crd.yaml\\r\\n   ```\\r\\n\\r\\n2. \u5b89\u88c5 TiDB Operator\\r\\n\\r\\n   ```bash\\r\\n   helm repo add pingcap https://charts.pingcap.org/ \\r\\n   kubectl create namespace tidb-admin \\r\\n   helm install --namespace tidb-admin tidb-operator pingcap/tidb-operator --version v1.3.2 \\\\\\r\\n   --set operatorImage=registry.cn-beijing.aliyuncs.com/tidb/tidb-operator:v1.3.2 \\\\\\r\\n   --set tidbBackupManagerImage=registry.cn-beijing.aliyuncs.com/tidb/tidb-backup-manager:v1.3.2 \\\\\\r\\n   --set scheduler.kubeSchedulerImageName=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler\\r\\n   ```\\r\\n\\r\\n3. \u68c0\u67e5 TiDB Operator \u7ec4\u4ef6\\r\\n\\r\\n   ![\u68c0\u67e5 TiDB Operator \u7ec4\u4ef6](img/check.png)\\r\\n\\r\\n#### \u90e8\u7f72 TiDB \u96c6\u7fa4\\r\\n\\r\\n```bash\\r\\nkubectl create namespace tidb-cluster && \\\\\\r\\nkubectl -n tidb-cluster apply -f https://raw.githubusercontent.com/pingcap/tidb-operator/master/examples/basic/tidb-cluster.yaml \\r\\nkubectl -n tidb-cluster apply -f https://raw.githubusercontent.com /pingcap/tidb-operator/master/examples/basic/tidb-monitor.yaml\\r\\n```\\r\\n![\u90e8\u7f72 TiDB \u96c6\u7fa4](img/deploytidb.png)\\r\\n\\r\\n#### \u8fde\u63a5 TiDB \u96c6\u7fa4\\r\\n\\r\\n```bash\\r\\nyum -y install mysql-client\\r\\n```\\r\\n\\r\\n![connecttidb](img/connecttidb.png)\\r\\n\\r\\n```bash\\r\\nkubectl port-forward -n tidb-cluster svc/basic-tidb 4000 > pf4000.out & \\r\\n```\\r\\n![\u8fde\u63a5 TiDB \u96c6\u7fa4](img/connect1.png)\\r\\n\\r\\n![\u8fde\u63a5 TiDB \u96c6\u7fa4](img/connect2.png)\\r\\n\\r\\n![\u8fde\u63a5 TiDB \u96c6\u7fa4](img/connect3.png)\\r\\n\\r\\n#### \u68c0\u67e5\u5e76\u9a8c\u8bc1 TiDB \u96c6\u7fa4\u72b6\u6001\\r\\n\\r\\n1. \u521b\u5efa Hello_world \u8868\\r\\n\\r\\n   ```sql\\r\\n   create table hello_world (id int unsigned not null auto_increment primary key, v varchar(32)); \\r\\n   ```\\r\\n   ![\u521b\u5efa Hello_world \u8868](img/helloworld.png)\\r\\n\\r\\n2. \u67e5\u8be2 TiDB \u7248\u672c\u53f7\\r\\n\\r\\n   ```\\r\\n   select tidb_version()\\\\G;\\r\\n   ```\\r\\n   ![\u8fde\u63a5 TiDB \u96c6\u7fa4](img/checkversion.png)\\r\\n\\r\\n3. \u67e5\u8be2 Tikv \u5b58\u50a8\u72b6\u6001\\r\\n\\r\\n   ```sql\\r\\n   select * from information_schema.tikv_store_status\\\\G;\\r\\n   ```\\r\\n   ![\u67e5\u8be2 Tikv \u5b58\u50a8\u72b6\u6001](img/checkstorage.png)\\r\\n\\r\\n#### HwameiStor \u5b58\u50a8\u914d\u7f6e\\r\\n\\r\\n\u4ece `storageClass local-storage-hdd-lvm` \u5206\u522b\u4e3a tidb-tikv \u53ca tidb-pd \u521b\u5efa\u4e00\u4e2a PVC:\\r\\n\\r\\n![HwameiStor \u5b58\u50a8\u914d\u7f6e](img/pvc.png)\\r\\n\\r\\n![HwameiStor \u5b58\u50a8\u914d\u7f6e](img/pvc1.png)\\r\\n\\r\\n![HwameiStor \u5b58\u50a8\u914d\u7f6e](img/pvc2.png)\\r\\n\\r\\n```bash\\r\\nkubectl get po basic-tikv-0 -oyaml\\r\\n```\\r\\n\\r\\n![HwameiStor \u5b58\u50a8\u914d\u7f6e](img/mountpvc.png)\\r\\n\\r\\n```bash\\r\\nkubectl get po basic-pd-0 -oyaml\\r\\n```\\r\\n\\r\\n![HwameiStor \u5b58\u50a8\u914d\u7f6e](img/mountpvc1.png)\\r\\n\\r\\n## \u6d4b\u8bd5\u5185\u5bb9\\r\\n\\r\\n### \u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\\r\\n\\r\\n\u5b8c\u6210\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u540e\uff0c\u6267\u884c\u4e86\u4ee5\u4e0b\u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\uff0c\u5168\u90e8\u901a\u8fc7\u3002\\r\\n\\r\\n#### \u5206\u5e03\u5f0f\u4e8b\u52a1\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u652f\u6301\u5728\u591a\u79cd\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5b9e\u73b0\u5206\u5e03\u5f0f\u6570\u636e\u64cd\u4f5c\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u5373 ACID\u5c5e\u6027\\r\\n\\r\\n\u6d4b\u8bd5\u6b65\u9aa4\uff1a\\r\\n\\r\\n1.\\t\u521b\u5efa\u6d4b\u8bd5\u6570\u636e\u5e93 CREATE DATABASE testdb\\r\\n\\r\\n2.\\t\u521b\u5efa\u6d4b\u8bd5\u7528\u8868 CREATE TABLE `t_test ( id int AUTO_INCREMENT, name varchar(32), PRIMARY KEY (id) )`\\r\\n\\r\\n3.\\t\u8fd0\u884c\u6d4b\u8bd5\u811a\u672c\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u5728\u591a\u79cd\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5b9e\u73b0\u5206\u5e03\u5f0f\u6570\u636e\u64cd\u4f5c\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u5373 ACID \u5c5e\u6027\\r\\n\\r\\n#### \u5bf9\u8c61\u9694\u79bb\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u6d4b\u8bd5\u4e0d\u540c schema \u5b9e\u73b0\u5bf9\u8c61\u9694\u79bb\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\ncreate database if not exists testdb;\\r\\nuse testdb\\r\\ncreate table if not exists t_test\\r\\n( id                   bigint,\\r\\n  name                 varchar(200),\\r\\n  sale_time            datetime default current_timestamp,\\r\\n  constraint pk_t_test primary key (id)\\r\\n);\\r\\ninsert into t_test(id,name) values (1,\'a\'),(2,\'b\'),(3,\'c\');\\r\\ncreate user \'readonly\'@\'%\' identified by \\"readonly\\";\\r\\ngrant select on testdb.* to readonly@\'%\';\\r\\nselect * from testdb.t_test;\\r\\nupdate testdb.t_test set name=\'aaa\';\\r\\ncreate user \'otheruser\'@\'%\' identified by \\"otheruser\\";\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u521b\u5efa\u4e0d\u540c schema \u5b9e\u73b0\u5bf9\u8c61\u9694\u79bb\\r\\n\\r\\n#### \u8868\u64cd\u4f5c\u652f\u6301\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u6d4b\u8bd5\u662f\u5426\u652f\u6301\u521b\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u8868\u6570\u636e\u3001DML\u3001\u5217\u3001\u5206\u533a\u8868\\r\\n\\r\\n\u6d4b\u8bd5\u6b65\u9aa4\uff1a\u8fde\u63a5\u6570\u636e\u5e93\u540e\u6309\u6b65\u9aa4\u6267\u884c\u6d4b\u8bd5\u811a\u672c\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\n# \u521b\u5efa\u548c\u5220\u9664\u8868\\r\\ndrop table if exists t_test;\\r\\ncreate table if not exists t_test\\r\\n( id                   bigint default \'0\',\\r\\n  name                 varchar(200) default \'\' ,\\r\\n  sale_time            datetime default current_timestamp,\\r\\n  constraint pk_t_test primary key (id)\\r\\n);\\r\\n# \u5220\u9664\u548c\u4fee\u6539\\r\\ninsert into t_test(id,name) values (1,\'a\'),(2,\'b\'),(3,\'c\'),(4,\'d\'),(5,\'e\');\\r\\nupdate t_test set name=\'aaa\' where id=1;\\r\\nupdate t_test set name=\'bbb\' where id=2;\\r\\ndelete from t_dml where id=5;\\r\\n# \u4fee\u6539\u3001\u589e\u52a0\u3001\u5220\u9664\u5217\\r\\nalter table t_test modify column name varchar(250);\\r\\nalter table t_test add column col varchar(255);\\r\\ninsert into t_test(id,name,col) values(10,\'test\',\'new_col\');     \\r\\nalter table t_test add column colwithdefault varchar(255) default \'aaaa\';\\r\\ninsert into t_test(id,name) values(20,\'testdefault\');\\r\\ninsert into t_test(id,name,colwithdefault ) values(10,\'test\',\'non-default \');     \\r\\nalter table t_test drop column colwithdefault;\\r\\n# \u5206\u533a\u8868\u7c7b\u578b\uff08\u4ec5\u6458\u5f55\u90e8\u5206\u811a\u672c\uff09\\r\\nCREATE TABLE employees (\\r\\n    id INT NOT NULL,\\r\\nfname VARCHAR(30),\\r\\nlname VARCHAR(30),\\r\\n    hired DATE NOT NULL DEFAULT \'1970-01-01\',\\r\\n    separated DATE NOT NULL DEFAULT \'9999-12-31\',\\r\\njob_code INT NOT NULL,\\r\\nstore_id INT NOT NULL\\r\\n)\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u521b\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u8868\u6570\u636e\u3001DML\u3001\u5217\u3001\u5206\u533a\u8868\\r\\n\\r\\n#### \u7d22\u5f15\u652f\u6301\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u591a\u79cd\u7c7b\u578b\u7684\u7d22\u5f15\uff08\u552f\u4e00\u3001\u805a\u7c07\u3001\u5206\u533a\u3001Bidirectional indexes\u3001Expression-based indexes\u3001\u54c8\u5e0c\u7d22\u5f15\u7b49\u7b49\uff09\u4ee5\u53ca\u7d22\u5f15\u91cd\u5efa\u64cd\u4f5c\u3002\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nalter table t_test add unique index udx_t_test (name);\\r\\n# \u9ed8\u8ba4\u5c31\u662f\u4e3b\u952e\u805a\u7c07\u7d22\u5f15\\r\\nADMIN CHECK TABLE t_test;\\r\\ncreate index time_idx on t_test(sale_time);\\r\\nalter table t_test drop index time_idx;\\r\\nadmin show ddl jobs;\\r\\nadmin show ddl job queries 156;\\r\\ncreate index time_idx on t_test(sale_time);\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u521b\u5efa\u3001\u5220\u9664\u3001\u7ec4\u5408\u3001\u5355\u5217\u3001\u552f\u4e00\u7d22\u5f15\\r\\n\\r\\n#### \u8868\u8fbe\u5f0f\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u8868\u8fbe\u5f0f\u652f\u6301 if\u3001casewhen\u3001forloop\u3001whileloop\u3001loop exit when \u7b49\u8bed\u53e5\uff08\u4e0a\u9650 5 \u7c7b\uff09\\r\\n\\r\\n\u524d\u63d0\u6761\u4ef6\uff1a\u6570\u636e\u5e93\u96c6\u7fa4\u5df2\u7ecf\u90e8\u7f72\u5b8c\u6210\u3002\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nSELECT CASE id WHEN 1 THEN \'first\' WHEN 2 THEN \'second\' ELSE \'OTHERS\' END AS id_new  FROM t_test;\\r\\nSELECT IF(id>2,\'int2+\',\'int2-\') from t_test;\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301 if\u3001case when\u3001for loop\u3001while loop\u3001loop exit when \u7b49\u8bed\u53e5\uff08\u4e0a\u9650 5 \u7c7b\uff09\\r\\n\\r\\n#### \u6267\u884c\u8ba1\u5212\u89e3\u6790\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6267\u884c\u8ba1\u5212\u89e3\u6790\u652f\u6301\\r\\n\\r\\n\u524d\u63d0\u6761\u4ef6\uff1a\u6570\u636e\u5e93\u96c6\u7fa4\u5df2\u7ecf\u90e8\u7f72\u5b8c\u6210\u3002\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nexplain analyze select * from t_test where id NOT IN (1,2,4);\\r\\nexplain analyze select * from t_test a where EXISTS (select * from t_test b where a.id=b.id and b.id<3);\\r\\nexplain analyze SELECT IF(id>2,\'int2+\',\'int2-\') from t_test;\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u6267\u884c\u8ba1\u5212\u7684\u89e3\u6790\\r\\n\\r\\n#### \u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\u529f\u80fd\\r\\n\\r\\n\u6d4b\u8bd5\u6b65\u9aa4\uff1a\\r\\n\\r\\n1. \u67e5\u770b sql \u8bed\u53e5\u7684\u5f53\u524d\u6267\u884c\u8ba1\u5212\\r\\n\\r\\n2. \u4f7f\u7528\u7ed1\u5b9a\u7279\u6027\\r\\n\\r\\n3. \u67e5\u770b\u8be5 sql \u8bed\u53e5\u7ed1\u5b9a\u540e\u7684\u6267\u884c\u8ba1\u5212\\r\\n\\r\\n4. \u5220\u9664\u7ed1\u5b9a\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nexplain select * from employees3 a join employees4 b on a.id = b.id where a.lname=\'Johnson\';\\r\\nexplain select /*+ hash_join(a,b) */ * from employees3 a join employees4 b on a.id = b.id where a.lname=\'Johnson\';\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u6ca1\u6709\u4f7f\u7528 hint \u65f6\u53ef\u80fd\u4e0d\u662f hash_join\uff0c\u4f7f\u7528 hint \u540e\u4e00\u5b9a\u662f hash_join\u3002\\r\\n\\r\\n#### \u5e38\u7528\u51fd\u6570\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6807\u51c6\u7684\u6570\u636e\u5e93\u51fd\u6570(\u652f\u6301\u7684\u51fd\u6570\u7c7b\u578b\uff09\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u6807\u51c6\u7684\u6570\u636e\u5e93\u51fd\u6570\\r\\n\\r\\n#### \u663e\u5f0f/\u9690\u5f0f\u4e8b\u52a1\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u652f\u6301\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u663e\u793a\u4e0e\u9690\u5f0f\u4e8b\u52a1\\r\\n\\r\\n#### \u5b57\u7b26\u96c6\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6570\u636e\u7c7b\u578b\u652f\u6301\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u76ee\u524d\u53ea\u652f\u6301 UTF-8 mb4 \u5b57\u7b26\u96c6\\r\\n\\r\\n#### \u9501\u652f\u6301\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u9501\u5b9e\u73b0\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u63cf\u8ff0\u4e86\u9501\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0cR-R/R-W/W-W \u60c5\u51b5\u4e0b\u963b\u585e\u60c5\u51b5\uff0c\u6b7b\u9501\u5904\u7406\u65b9\u5f0f\\r\\n\\r\\n#### \u9694\u79bb\u7ea7\u522b\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301 si \u9694\u79bb\u7ea7\u522b\uff0c\u652f\u6301 rc \u9694\u79bb\u7ea7\u522b\uff084.0 GA \u7248\u672c\uff09\\r\\n\\r\\n#### \u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2\u80fd\u529b\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u8de8\u8282\u70b9 join \u7b49\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2\u3001\u64cd\u4f5c\u7b49\uff0c\u652f\u6301\u7a97\u53e3\u51fd\u6570\u3001\u5c42\u6b21\u67e5\u8be2\\r\\n\\r\\n### \u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5\\r\\n\\r\\n\u8fd9\u90e8\u5206\u6d4b\u8bd5\u7cfb\u7edf\u5b89\u5168\uff0c\u5b8c\u6210\u6570\u636e\u5e93\u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u4ee5\u4e0b\u5b89\u5168\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\u3002\\r\\n\\r\\n#### \u8d26\u53f7\u7ba1\u7406\u4e0e\u6743\u9650\u6d4b\u8bd5\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u8d26\u53f7\u6743\u9650\u7ba1\u7406\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nselect host,user,authentication_string from mysql.user;\\r\\ncreate user tidb IDENTIFIED by \'tidb\'; \\r\\nselect host,user,authentication_string from mysql.user;\\r\\nset password for tidb =password(\'tidbnew\');\\r\\nselect host,user,authentication_string,Select_priv from mysql.user;\\r\\ngrant select on *.* to tidb;\\r\\nflush privileges ;\\r\\nselect host,user,authentication_string,Select_priv from mysql.user;\\r\\ngrant all privileges on *.* to tidb;\\r\\nflush privileges ;\\r\\nselect * from  mysql.user where user=\'tidb\';\\r\\nrevoke select on *.* from tidb; \\r\\nflush privileges ;\\r\\nrevoke all privileges on *.* from tidb;\\r\\nflush privileges ;\\r\\ngrant select(id) on test.TEST_HOTSPOT to tidb;\\r\\ndrop user tidb;\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\\r\\n\\r\\n- \u652f\u6301\u521b\u5efa\u3001\u4fee\u6539\u5220\u9664\u8d26\u53f7\uff0c\u5e76\u914d\u7f6e\u548c\u5bc6\u7801\uff0c\u652f\u6301\u5b89\u5168\u3001\u5ba1\u8ba1\u548c\u6570\u636e\u7ba1\u7406\u4e09\u6743\u5206\u7acb\\r\\n\\r\\n- \u6839\u636e\u4e0d\u540c\u8d26\u53f7\uff0c\u5bf9\u6570\u5e93\u5404\u4e2a\u7ea7\u522b\u6743\u9650\u63a7\u5236\u5305\u62ec\uff1a\u5b9e\u4f8b/\u5e93/\u8868/\u5217\u7ea7\u522b\\r\\n\\r\\n#### \u8bbf\u95ee\u63a7\u5236\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6743\u9650\u8bbf\u95ee\u63a7\u5236\uff0c\u6570\u636e\u5e93\u6570\u636e\u901a\u8fc7\u8d4b\u4e88\u57fa\u672c\u589e\u5220\u6539\u67e5\u8bbf\u95ee\u6743\u9650\u63a7\u5236\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nmysql -u root -h 172.17.49.222 -P 4000\\r\\ndrop user tidb;\\r\\ndrop user tidb1;\\r\\ncreate user tidb IDENTIFIED by \'tidb\'; \\r\\ngrant select on tidb.* to tidb;\\r\\ngrant insert on tidb.* to tidb;\\r\\ngrant update on tidb.* to tidb;\\r\\ngrant delete on tidb.* to tidb;\\r\\nflush privileges;\\r\\nshow grants for tidb;\\r\\nexit;\\r\\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e \'select * from aa;\'\\r\\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e \'insert into aa values(2);\'\\r\\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e \'update aa set id=3;\'\\r\\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e \'delete from aa where id=3;\'\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u6570\u636e\u5e93\u6570\u636e\u901a\u8fc7\u8d4b\u4e88\u57fa\u672c\u589e\u5220\u6539\u67e5\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u3002\\r\\n\\r\\n#### \u767d\u540d\u5355\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u767d\u540d\u5355\u529f\u80fd\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nmysql -u root -h 172.17.49.102 -P 4000\\r\\ndrop user tidb;\\r\\ncreate user tidb@\'127.0.0.1\' IDENTIFIED by \'tidb\'; \\r\\nflush privileges;\\r\\nselect * from mysql.user where user=\'tidb\';\\r\\nmysql -u tidb -h 127.0.0.1 -P 4000 -ptidb\\r\\nmysql -u tidb -h 172.17.49.102 -P 4000 -ptidb\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301 IP \u767d\u540d\u5355\u529f\u80fd\uff0c\u652f\u6301 IP \u6bb5\u901a\u914d\u64cd\u4f5c\\r\\n\\r\\n#### \u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u76d1\u63a7\u80fd\u529b\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a`kubectl -ntidb-cluster logs tidb-test-pd-2 --tail 22`\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u8bb0\u5f55\u7528\u6237\u901a\u8fc7\u8fd0\u7ef4\u7ba1\u7406\u63a7\u5236\u53f0\u6216\u8005 API \u6267\u884c\u7684\u5173\u952e\u64cd\u4f5c\u6216\u8005\u9519\u8bef\u64cd\u4f5c\\r\\n\\r\\n### \u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\\r\\n\\r\\n\u8fd9\u90e8\u5206\u6d4b\u8bd5\u7cfb\u7edf\u8fd0\u7ef4\uff0c\u5b8c\u6210\u6570\u636e\u5e93\u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u4ee5\u4e0b\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\u3002\\r\\n\\r\\n#### \u6570\u636e\u5bfc\u5165\u5bfc\u51fa\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6570\u636e\u5bfc\u5165\u5bfc\u51fa\u7684\u5de5\u5177\u652f\u6301\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nselect * from sbtest1 into outfile \'/sbtest1.csv\';\\r\\nload data local infile \'/sbtest1.csv\' into table test100;\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u6309\u8868\u3001schema\u3001database \u7ea7\u522b\u7684\u903b\u8f91\u5bfc\u51fa\u5bfc\u5165\\r\\n\\r\\n#### \u6162\u65e5\u5fd7\u67e5\u8be2\\r\\n\\r\\n\u6d4b\u8bd5\u76ee\u7684\uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u7684 SQL \u4fe1\u606f\\r\\n\\r\\n\u524d\u63d0\u6761\u4ef6\uff1aSQL \u6267\u884c\u65f6\u95f4\u9700\u5927\u4e8e\u914d\u7f6e\u7684\u6162\u67e5\u8be2\u8bb0\u5f55\u9608\u503c,\u4e14 SQL \u6267\u884c\u5b8c\u6bd5\\r\\n\\r\\n\u6d4b\u8bd5\u6b65\u9aa4\uff1a\\r\\n\\r\\n1. \u8c03\u6574\u6162\u67e5\u8be2\u9608\u503c\u5230 100ms\\r\\n\\r\\n2. \u6267\u884c sql\\r\\n\\r\\n3. \u67e5\u770b log/\u7cfb\u7edf\u8868/dashboard \u4e2d\u7684\u6162\u67e5\u8be2\u4fe1\u606f\\r\\n\\r\\n\u6d4b\u8bd5\u811a\u672c\uff1a\\r\\n\\r\\n```sql\\r\\nshow variables like \'tidb_slow_log_threshold\';\\r\\nset tidb_slow_log_threshold=100;\\r\\nselect query_time, query from information_schema.slow_query where is_internal = false order by query_time desc limit 3;\\r\\n```\\r\\n\\r\\n\u6d4b\u8bd5\u7ed3\u679c\uff1a\u53ef\u4ee5\u83b7\u53d6\u6162\u67e5\u8be2\u4fe1\u606f\\r\\n\\r\\n> \u6709\u5173\u6d4b\u8bd5\u8be6\u60c5\uff0c\u8bf7\u67e5\u9605 [TiDB on hwameiStor \u90e8\u7f72\u53ca\u6d4b\u8bd5\u8bb0\u5f55](file/TiDBonHwameiStor.docx)\u3002"},{"id":"3","metadata":{"permalink":"/cn/blog/3","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-05-24_lv-and-lvreplica.md","source":"@site/i18n/cn/docusaurus-plugin-content-blog/2022-05-24_lv-and-lvreplica.md","title":"LV \u548c LVReplica","description":"\u5728 Kubernetes \u4e2d\uff0c\u5f53\u7528\u6237\u521b\u5efa\u4e00\u4e2a PVC\uff0c\u5e76\u6307\u5b9a\u4f7f\u7528 HwameiStor \u4f5c\u4e3a\u5e95\u5c42\u5b58\u50a8\u65f6\uff0cHwameiStor \u4f1a\u521b\u5efa\u4e24\u7c7b CR\uff0c\u5373\u672c\u6587\u7684\u4e3b\u89d2LocalVolume \u548c LocalVolumeReplica\u3002HwameiStor \u4e3a\u4ec0\u4e48\u4e3a\u4e00\u4e2a PV \u521b\u5efa\u8fd9\u4e24\u7c7b\u8d44\u6e90\u5462\uff1f\u672c\u6587\u5c06\u4e3a\u60a8\u63ed\u5f00\u8c1c\u56e2\u3002","date":"2022-05-24T00:00:00.000Z","formattedDate":"May 24, 2022","tags":[{"label":"hello","permalink":"/cn/blog/tags/hello"},{"label":"LVs","permalink":"/cn/blog/tags/l-vs"}],"readingTime":2.805,"hasTruncateMarker":false,"authors":[{"name":"\u725b\u4e50\u5ddd","title":"\u5f00\u53d1\u8005","url":"https://github.com/niulechuan","imageURL":"https://avatars.githubusercontent.com/u/81207605?v=4","key":"Niulechuan"}],"frontMatter":{"slug":"3","title":"LV \u548c LVReplica","authors":"Niulechuan","tags":["hello","LVs"]},"prevItem":{"title":"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5","permalink":"/cn/blog/test"},"nextItem":{"title":"HwameiStor Reliable Helper System \u5f00\u6e90\u4e0a\u7ebf","permalink":"/cn/blog/2"}},"content":"\u5728 Kubernetes \u4e2d\uff0c\u5f53\u7528\u6237\u521b\u5efa\u4e00\u4e2a PVC\uff0c\u5e76\u6307\u5b9a\u4f7f\u7528 HwameiStor \u4f5c\u4e3a\u5e95\u5c42\u5b58\u50a8\u65f6\uff0cHwameiStor \u4f1a\u521b\u5efa\u4e24\u7c7b CR\uff0c\u5373\u672c\u6587\u7684\u4e3b\u89d2`LocalVolume` \u548c `LocalVolumeReplica`\u3002HwameiStor \u4e3a\u4ec0\u4e48\u4e3a\u4e00\u4e2a PV \u521b\u5efa\u8fd9\u4e24\u7c7b\u8d44\u6e90\u5462\uff1f\u672c\u6587\u5c06\u4e3a\u60a8\u63ed\u5f00\u8c1c\u56e2\u3002\\n\\n![LV \u526f\u672c](img/lv_replicas_cn.png)\\n\\n## LocalVolume\\n\\n`LocalVolume` \u662f HwameiStor \u5b9a\u4e49\u7684 CRD\uff0c\u4ee3\u8868 HwameiStor \u4e3a\u7528\u6237\u63d0\u4f9b\u7684\u6570\u636e\u5377\u3002`LocalVolume` \u548c Kubernetes \u7684 `PersistentVolume` \u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u542b\u4e49\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u5747\u4ee3\u8868\u4e00\u4e2a\u6570\u636e\u5377\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c`LocalVolume` \u8bb0\u5f55 HwameiStor \u76f8\u5173\u7684\u4fe1\u606f\uff0c\u800c `PersistentVolume` \u8bb0\u5f55 Kubernetes \u5e73\u53f0\u672c\u8eab\u7684\u4fe1\u606f\uff0c\u5e76\u5173\u8054\u5230 `LocalVolume`\u3002\\n\\n\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u4e2d `LocalVolume` \u7684\u8be6\u7ec6\u4fe1\u606f\uff1a\\n\\n```\\n#  check status of local volume and volume replica\\n$ kubectl get lv # or localvolume\\nNAME                                       POOL                   KIND   REPLICAS   CAPACITY     ACCESSIBILITY   STATE      RESOURCE   PUBLISHED   AGE\\npvc-996b05e8-80f2-4240-ace4-5f5f250310e2   LocalStorage_PoolHDD   LVM    1          1073741824   k8s-node1       Ready      -1                     22m\\n```\\n\\n\u65e2\u7136 HwameiStor \u53ef\u4ee5\u901a\u8fc7 `LocalVolume` \u8868\u793a\u4e00\u4e2a\u6570\u636e\u5377\uff0c\u4e3a\u4ec0\u4e48\u8fd8\u9700\u8981 `LocalVolumeReplica` \u5462\uff1f\\n\\n## LocalVolumeReplica\\n\\n`LocalVolumeReplica` \u4e5f\u662f HwameiStor \u5b9a\u4e49\u7684 CRD\u3002\u4f46\u662f\u4e0e `LocalVolume` \u4e0d\u540c\uff0c`LocalVolumeReplica` \u4ee3\u8868\u6570\u636e\u5377\u7684\u526f\u672c\u3002\\n\\n\u5728 HwameiStor \u4e2d\uff0c`LocalVolume` \u4f1a\u6307\u5b9a\u67d0\u4e2a\u5c5e\u4e8e\u5b83\u7684 `LocalVolumeReplica` \u4f5c\u4e3a\u5f53\u524d\u6fc0\u6d3b\u7684\u526f\u672c\u3002\u53ef\u4ee5\u770b\u51fa`LocalVolume` \u53ef\u4ee5\u62e5\u6709\u591a\u4e2a `LocalVolumeReplica`\uff0c\u5373\u4e00\u4e2a\u6570\u636e\u5377\u53ef\u4ee5\u6709\u591a\u4e2a\u526f\u672c\u3002\u76ee\u524d HwameiStor \u4f1a\u5728\u4f17\u591a\u526f\u672c\u4e2d\u6fc0\u6d3b\u5176\u4e2d\u4e00\u4e2a\uff0c\u88ab\u5e94\u7528\u7a0b\u5e8f\u6302\u8f7d\uff0c\u5176\u4ed6\u526f\u672c\u4f5c\u4e3a\u70ed\u5907\u526f\u672c\u3002\\n\\n\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u4e2d `LocalVolumeReplica` \u7684\u8be6\u7ec6\u4fe1\u606f\uff1a\\n\\n```\\n$ kubectl get lvr # or localvolumereplica\\nNAME                                              KIND   CAPACITY     NODE        STATE   SYNCED   DEVICE                                                               AGE\\npvc-996b05e8-80f2-4240-ace4-5f5f250310e2-v5scm9   LVM    1073741824   k8s-node1   Ready   true     /dev/LocalStorage_PoolHDD/pvc-996b05e8-80f2-4240-ace4-5f5f250310e2   80s\\n```\\n\\n\u6709\u4e86\u5377\u526f\u672c\uff08LocalVolumeReplica\uff09\u7684\u6982\u5ff5\u540e\uff0cHwameiStor \u4f5c\u4e3a\u4e00\u6b3e\u672c\u5730\u5b58\u50a8\u7cfb\u7edf\uff0c\u5177\u5907\u4e86\u4e00\u4e9b\u5f88\u6709\u7ade\u4e89\u529b\u7684\u7279\u6027\uff0c\u4f8b\u5982\u6570\u636e\u5377\u7684HA\uff0c\u8fc1\u79fb\uff0c\u70ed\u5907\uff0cKubernetes \u5e94\u7528\u5feb\u901f\u6062\u590d\u7b49\u7b49\u3002\\n\\n## \u603b\u7ed3\\n\\n\u5176\u5b9e `LocalVolume` \u548c `LocalVolumeReplica` \u5728\u5f88\u591a\u5b58\u50a8\u7cfb\u7edf\u4e2d\u90fd\u6709\u5f15\u5165\uff0c\u662f\u4e2a\u5f88\u901a\u7528\u7684\u6982\u5ff5\u3002\u53ea\u662f\u901a\u8fc7\u8fd9\u4e00\u6982\u5ff5\uff0c\u5b9e\u73b0\u4e86\u5404\u5177\u7279\u8272\u7684\u4ea7\u54c1\uff0c\u5728\u89e3\u51b3\u67d0\u4e2a\u6280\u672f\u96be\u70b9\u7684\u65f6\u5019\u4e5f\u53ef\u80fd\u91c7\u53d6\u4e0d\u540c\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u800c\u9002\u5408\u4e8e\u4e0d\u540c\u7684\u751f\u4ea7\u573a\u666f\u3002\\n\\n\u968f\u7740 HwameiStor \u7684\u8fed\u4ee3\u548c\u6f14\u8fdb\uff0c\u6211\u4eec\u5c06\u4f1a\u63d0\u4f9b\u66f4\u591a\u7684\u80fd\u529b\uff0c\u4ece\u800c\u9002\u914d\u8d8a\u6765\u8d8a\u591a\u7684\u4f7f\u7528\u573a\u666f\u3002\u65e0\u8bba\u60a8\u662f\u7528\u6237\u8fd8\u662f\u5f00\u53d1\u8005\uff0c\u6b22\u8fce\u60a8\u52a0\u5165 HwameiStor \u7684\u5927\u5bb6\u5ead\uff01"},{"id":"2","metadata":{"permalink":"/cn/blog/2","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-05-19_helper-system-post.md","source":"@site/i18n/cn/docusaurus-plugin-content-blog/2022-05-19_helper-system-post.md","title":"HwameiStor Reliable Helper System \u5f00\u6e90\u4e0a\u7ebf","description":"\u4eca\u65e5\u64ad\u62a5\uff1a","date":"2022-05-19T00:00:00.000Z","formattedDate":"May 19, 2022","tags":[{"label":"hello","permalink":"/cn/blog/tags/hello"},{"label":"Helpers","permalink":"/cn/blog/tags/helpers"}],"readingTime":2.45,"hasTruncateMarker":false,"authors":[{"name":"\u674e\u6d01","title":"\u5f00\u53d1\u8005","url":"https://github.com/angel0507","imageURL":"https://avatars.githubusercontent.com/u/39614083?v=4","key":"JieLi"}],"frontMatter":{"slug":"2","title":"HwameiStor Reliable Helper System \u5f00\u6e90\u4e0a\u7ebf","authors":"JieLi","tags":["hello","Helpers"]},"prevItem":{"title":"LV \u548c LVReplica","permalink":"/cn/blog/3"},"nextItem":{"title":"\u81ea\u52a8\u5316\u3001\u9ad8\u53ef\u7528\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7cfb\u7edf \u2014\u2014 HwameiStor \u5f00\u6e90\u4e0a\u7ebf","permalink":"/cn/blog/1"}},"content":"> \u4eca\u65e5\u64ad\u62a5\uff1a\\n> \u72ec\u5c5e\u4e8e\u7cfb\u7edf\u8fd0\u7ef4\u5b9e\u65bd\u4eba\u5458\u7684\u81ea\u52a8\u53ef\u9760\u7684\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7ef4\u62a4\u7cfb\u7edf \u2014 HwameiStor Reliable Helper System \u5df2\u4e0a\u7ebf \u3002\\n\\n**\u300cDaoCloud  \u9053\u5ba2\u300d\u6b63\u5f0f\u5f00\u6e90\u300c\u4e91\u539f\u751f\u81ea\u52a8\u53ef\u9760\u672c\u5730\u5b58\u50a8\u7ef4\u62a4\u7cfb\u7edfHwameiStor Reliable Helper System\u300d**\u3002\u76ee\u524d\u5c1a\u5728 Alpha \u9636\u6bb5\u3002\\n\\nHwameiStor \u5c06 HDD\u3001SSD \u548c NVMe \u78c1\u76d8\u5f62\u6210\u672c\u5730\u5b58\u50a8\u8d44\u6e90\u6c60\u8fdb\u884c\u7edf\u4e00\u7ba1\u7406\uff0c\u800c\u5728\u78c1\u76d8\u4f5c\u4e3a\u4e0a\u5c42\u5e94\u7528\u4f7f\u7528\u7684\u5e95\u5c42\u6570\u636e\u5e95\u5ea7\uff0c\u9762\u4e34\u81ea\u7136\u548c\u4eba\u4e3a\u635f\u574f\u7b49\u98ce\u9669\uff0c\u56e0\u800c\u78c1\u76d8\u8fd0\u7ef4\u7ef4\u62a4\u7ba1\u7406\u7cfb\u7edfReliable Helper System \u8bde\u751f\u3002\\n\\n**\u6b22\u8fce\u5e7f\u5927\u6280\u672f\u5f00\u53d1\u8005\u548c\u7231\u597d\u8005\u524d\u6765[\u8bd5\u7528](https://github.com/hwameistor/reliable-helper-system)**\u3002\\n\\n![\u7cfb\u7edf\u67b6\u6784](img/HwameiStor-replace-disk-arch.jpg)\\n\\n\u5728\u4e91\u539f\u751f\u65f6\u4ee3\uff0c \u5e94\u7528\u5f00\u53d1\u8005\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u903b\u8f91\u672c\u8eab\uff0c\u800c\u5e94\u7528\u8fd0\u884c\u65f6\u6240\u9700\u7684\u654f\u6377\u6027\u3001\u6269\u5c55\u6027\u3001\u53ef\u9760\u6027\u7b49\uff0c\u5219\u4e0b\u6c89\u5230\u57fa\u7840\u8bbe\u65bd\u8f6f\u4ef6\u548c\u8fd0\u7ef4\u56e2\u961f\u3002**HwameiStor Reliable Helper System \u6b63\u662f\u6ee1\u8db3\u4e91\u539f\u751f\u65f6\u4ee3\u8981\u6c42\u7684\u53ef\u9760\u6027\u8fd0\u7ef4\u7cfb\u7edf\uff0c\u76ee\u524d\u652f\u6301\u4e00\u952e\u66f4\u6362\u78c1\u76d8\u529f\u80fd**\u3002\\n\\n## \u5168\u9762\u589e\u5f3a\u8fd0\u7ef4\u53ef\u9760\u7ef4\u62a4\u7cfb\u7edf\\n\\n## \u53ef\u9760\u3001\u4e00\u952e\u66f4\u6362\u3001\u544a\u8b66\u63d0\u793a\\n\\n- \u53ef\u9760\u6570\u636e\u8fc1\u79fb\u53ca\u6570\u636e\u56de\u586b\\n\\n  \u53ef\u4ee5\u901a\u8fc7\u81ea\u52a8\u8bc6\u522braid\u78c1\u76d8\u4e0e\u5426\uff0c\u8fdb\u884c\u5224\u65ad\u662f\u5426\u9700\u8981\u6570\u636e\u8fc1\u79fb\u548c\u56de\u586b\uff0c\u4fdd\u969c\u6570\u636e\u53ef\u9760\u6027\u3002\\n\\n- \u4e00\u952e\u786c\u76d8\u66f4\u6362\\n\\n  \u901a\u8fc7\u65b0\u65e7\u786c\u76d8\u552f\u4e00uuid\u6765\u5b9e\u73b0\u4e00\u952e\u786c\u76d8\u66f4\u6362\u64cd\u4f5c\u3002\\n\\n- \u76f4\u89c2\u544a\u8b66\u63d0\u793a\\n\\n  \u4e00\u952e\u6362\u76d8\u8fc7\u7a0b\u4e2d\uff0c\u5b58\u5728\u6362\u76d8\u5f02\u5e38\u4fe1\u606f\uff0c\u8fdb\u884c\u53ca\u65f6\u9884\u8b66\u3002\\n\\n## \u52a0\u5165\u6211\u4eec\\n\\n\u5982\u679c\u8bf4\u672a\u6765\u662f\u667a\u80fd\u4e92\u8054\u65f6\u4ee3\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5458\u5c31\u662f\u901a\u5f80\u672a\u6765\u7684\u9886\u8def\u4eba\uff0c\u5f00\u6e90\u793e\u533a\u5c31\u662f\u7a0b\u5e8f\u5458\u4eec\u7684 \u201c\u5143\u5b87\u5b99\u201d\u3002\\n\\n\u76ee\u524d\uff0c\u300cHwameiStor \u4e91\u539f\u751f\u672c\u5730\u50a8\u5b58\u7cfb\u7edf\u300d\u5df2\u7ecf\u6b63\u5f0f\u5728 Github \u5f00\u6e90\u4e0a\u7ebf\uff0c\u5bf9\u5b83\u611f\u5174\u8da3\u7684\u8bdd\uff0c\u5c31\u6765\u52a0\u5165\u6211\u4eec\u5427\uff0c\u4e00\u8d77\u5f00\u57a6\u8fd9\u5757\u5c5e\u4e8e\u7a0b\u5e8f\u5458\u7684 \u201c\u5143\u5b87\u5b99\u201d \u65b0\u571f\u5730\uff0c\u6210\u4e3a\u672a\u6765\u884c\u9053\u8005\u3002"},{"id":"1","metadata":{"permalink":"/cn/blog/1","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-04-25_long-blog-post.md","source":"@site/i18n/cn/docusaurus-plugin-content-blog/2022-04-25_long-blog-post.md","title":"\u81ea\u52a8\u5316\u3001\u9ad8\u53ef\u7528\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7cfb\u7edf \u2014\u2014 HwameiStor \u5f00\u6e90\u4e0a\u7ebf","description":"HwameiStor","date":"2022-04-25T00:00:00.000Z","formattedDate":"April 25, 2022","tags":[{"label":"hello","permalink":"/cn/blog/tags/hello"},{"label":"HwameiStor","permalink":"/cn/blog/tags/hwamei-stor"}],"readingTime":3.985,"hasTruncateMarker":false,"authors":[{"name":"\u8981\u6d77\u5cf0","title":"\u7f16\u8f91","url":"https://github.com/windsonsea","imageURL":"https://github.com/windsonsea.png","key":"Michael"}],"frontMatter":{"slug":"1","title":"\u81ea\u52a8\u5316\u3001\u9ad8\u53ef\u7528\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7cfb\u7edf \u2014\u2014 HwameiStor \u5f00\u6e90\u4e0a\u7ebf","authors":"Michael","tags":["hello","HwameiStor"]},"prevItem":{"title":"HwameiStor Reliable Helper System \u5f00\u6e90\u4e0a\u7ebf","permalink":"/cn/blog/2"},"nextItem":{"title":"Welcome","permalink":"/cn/blog/welcome"}},"content":"![HwameiStor](img/hwameistor.png)\\n> \u4eca\u65e5\u64ad\u62a5\uff1a\\n> \u72ec\u5c5e\u4e8e\u7a0b\u5e8f\u5458\u4eec\u7684\u3001\u81ea\u7531\u6f14\u5316\u7684 \u201c\u5143\u5b87\u5b99\u201d \u65b0\u571f\u5730 \u2014 HwameiStor \u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7cfb\u7edf\uff0c\u7b49\u60a8\u6765\u5f00\u57a6\u3002\\n\\n**\u300cDaoCloud  \u9053\u5ba2\u300d\u6b63\u5f0f\u5f00\u6e90\u300c\u4e91\u539f\u751f\u672c\u5730\u50a8\u5b58\u7cfb\u7edfHwameiStor\u300d**\u3002HwameiStor \u5c06 HDD\u3001SSD \u548c NVMe \u78c1\u76d8\u5f62\u6210\u672c\u5730\u5b58\u50a8\u8d44\u6e90\u6c60\u8fdb\u884c\u7edf\u4e00\u7ba1\u7406\uff0c\u4f7f\u7528 CSI \u67b6\u6784\u63d0\u4f9b\u5206\u5e03\u5f0f\u7684\u672c\u5730\u6570\u636e\u5377\u670d\u52a1\uff0c\u4e3a\u6709\u72b6\u6001\u7684\u4e91\u539f\u751f\u5e94\u7528\u6216\u7ec4\u4ef6\u63d0\u4f9b\u6570\u636e\u6301\u4e45\u5316\u80fd\u529b\uff0c**\u6b22\u8fce\u5e7f\u5927\u6280\u672f\u5f00\u53d1\u8005\u548c\u7231\u597d\u8005\u524d\u53bb\u8bd5\u7528**\u3002\\n\\n![\u7cfb\u7edf\u67b6\u6784](img/architect.jpg)\\n\\n\u5728\u4e91\u539f\u751f\u65f6\u4ee3\uff0c \u5e94\u7528\u5f00\u53d1\u8005\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u903b\u8f91\u672c\u8eab\uff0c\u800c\u5e94\u7528\u8fd0\u884c\u65f6\u6240\u9700\u7684\u654f\u6377\u6027\u3001\u6269\u5c55\u6027\u3001\u53ef\u9760\u6027\u7b49\uff0c\u5219\u4e0b\u6c89\u5230\u57fa\u7840\u8bbe\u65bd\u8f6f\u4ef6\u548c\u8fd0\u7ef4\u56e2\u961f\u3002**HwameiStor \u6b63\u662f\u6ee1\u8db3\u4e91\u539f\u751f\u65f6\u4ee3\u8981\u6c42\u7684\u50a8\u5b58\u7cfb\u7edf\u3002 \u5b83\u5177\u6709\u9ad8\u53ef\u7528\u3001\u81ea\u52a8\u5316\u3001\u4f4e\u6210\u672c\u3001\u5feb\u901f\u90e8\u7f72\u3001\u9ad8\u6027\u80fd\u7b49\u4f18\u70b9\uff0c\u53ef\u4ee5\u66ff\u4ee3\u6602\u8d35\u7684\u4f20\u7edf SAN \u5b58\u50a8**\u3002\\n\\n## \u667a\u3001\u7a33\u3001\u654f \u5168\u9762\u589e\u5f3a\u672c\u5730\u5b58\u50a8\\n\\n- \u81ea\u52a8\u5316\u8fd0\u7ef4\u7ba1\u7406\\n\\n  \u53ef\u4ee5\u81ea\u52a8\u53d1\u73b0\u3001\u8bc6\u522b\u3001\u7ba1\u7406\u3001\u5206\u914d\u78c1\u76d8\u3002 \u6839\u636e\u4eb2\u548c\u6027\uff0c\u667a\u80fd\u8c03\u5ea6\u5e94\u7528\u548c\u6570\u636e\u3002\u81ea\u52a8\u76d1\u6d4b\u78c1\u76d8\u72b6\u6001\uff0c\u5e76\u53ca\u65f6\u9884\u8b66\u3002\\n\\n- \u9ad8\u53ef\u7528\u7684\u6570\u636e\\n\\n  \u4f7f\u7528\u8de8\u8282\u70b9\u526f\u672c\u540c\u6b65\u6570\u636e\uff0c \u5b9e\u73b0\u9ad8\u53ef\u7528\u3002\u53d1\u751f\u95ee\u9898\u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u5e94\u7528\u8c03\u5ea6\u5230\u9ad8\u53ef\u7528\u6570\u636e\u8282\u70b9\u4e0a\uff0c\u4fdd\u8bc1\u5e94\u7528\u7684\u8fde\u7eed\u6027\u3002\\n\\n- \u4e30\u5bcc\u7684\u6570\u636e\u5377\u7c7b\u578b\\n\\n  \u805a\u5408 HDD\u3001SSD\u3001NVMe \u7c7b\u578b\u7684\u78c1\u76d8\uff0c\u63d0\u4f9b\u975e\u4f4e\u5ef6\u65f6\uff0c\u9ad8\u541e\u5410\u7684\u6570\u636e\u670d\u52a1\u3002\\n\\n- \u7075\u6d3b\u52a8\u6001\u7684\u7ebf\u6027\u6269\u5c55\\n\\n  \u53ef\u4ee5\u6839\u636e\u96c6\u7fa4\u89c4\u6a21\u5927\u5c0f\u8fdb\u884c\u52a8\u6001\u7684\u6269\u5bb9\uff0c\u7075\u6d3b\u6ee1\u8db3\u5e94\u7528\u7684\u6570\u636e\u6301\u4e45\u5316\u9700\u6c42\u3002\\n\\n## \u4e30\u5bcc\u5e94\u7528\u573a\u666f \u5e7f\u6cdb\u9002\u914d\u4f01\u4e1a\u9700\u6c42\\n\\n- \u9002\u914d\u9ad8\u53ef\u7528\u67b6\u6784\u4e2d\u95f4\u4ef6\\n\\n  Kafka\u3001ElasticSearch\u3001Redis\u7b49\uff0c\u8fd9\u7c7b\u4e2d\u95f4\u4ef6\u5e94\u7528\u81ea\u8eab\u5177\u5907\u9ad8\u53ef\u7528\u67b6\u6784\uff0c\u540c\u65f6\u5bf9\u6570\u636e\u7684 IO \u8bbf\u95ee\u6709\u5f88\u9ad8\u8981\u6c42\u3002HwameiStor \u63d0\u4f9b\u7684\u57fa\u4e8e LVM \u7684\u5355\u526f\u672c\u672c\u5730\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u6ee1\u8db3\u5b83\u4eec\u7684\u8981\u6c42\u3002\\n\\n- \u4e3a\u5e94\u7528\u63d0\u4f9b\u9ad8\u53ef\u7528\u6570\u636e\u5377\\n\\n  MySQL \u7b49 OLTP \u6570\u636e\u5e93\uff0c\u8981\u6c42\u5e95\u5c42\u5b58\u50a8\u63d0\u4f9b\u9ad8\u53ef\u7528\u7684\u6570\u636e\u5b58\u50a8\uff0c\u5f53\u53d1\u751f\u95ee\u9898\u65f6\u53ef\u5feb\u901f\u6062\u590d\u6570\u636e\uff0c\u540c\u65f6\uff0c\u4e5f\u8981\u6c42\u4fdd\u8bc1\u9ad8\u6027\u80fd\u7684\u6570\u636e\u8bbf\u95ee\u3002HwameiStor \u63d0\u4f9b\u7684\u53cc\u526f\u672c\u7684\u9ad8\u53ef\u7528\u6570\u636e\u5377\uff0c\u53ef\u4ee5\u5f88\u597d\u5730\u6ee1\u8db3\u6b64\u7c7b\u9700\u6c42\u3002\\n\\n- \u81ea\u52a8\u5316\u8fd0\u7ef4\u4f20\u7edf\u5b58\u50a8\u8f6f\u4ef6\\n\\n  MinIO\u3001Ceph \u7b49\u5b58\u50a8\u8f6f\u4ef6\uff0c\u9700\u8981\u4f7f\u7528 Kubernetes \u8282\u70b9\u4e0a\u7684\u78c1\u76d8\uff0c\u53ef\u4ee5\u91c7\u7528 PVC/PV \u7684\u65b9\u5f0f\uff0c\u901a\u8fc7 CSI \u9a71\u52a8\u81ea\u52a8\u5316\u5730\u4f7f\u7528 HwameiStor \u7684\u5355\u526f\u672c\u672c\u5730\u5377\uff0c\u5feb\u901f\u54cd\u5e94\u4e1a\u52a1\u7cfb\u7edf\u63d0\u51fa\u7684\u90e8\u7f72\u3001\u6269\u5bb9\u3001\u8fc1\u79fb\u7b49\u9700\u6c42\uff0c\u5b9e\u73b0\u57fa\u4e8e Kubernetes \u7684\u81ea\u52a8\u5316\u8fd0\u7ef4\u3002\\n\\n## \u52a0\u5165\u6211\u4eec\\n\\n\u5982\u679c\u8bf4\u672a\u6765\u662f\u667a\u80fd\u4e92\u8054\u65f6\u4ee3\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5458\u5c31\u662f\u901a\u5f80\u672a\u6765\u7684\u9886\u8def\u4eba\uff0c\u5f00\u6e90\u793e\u533a\u5c31\u662f\u7a0b\u5e8f\u5458\u4eec\u7684 \u201c\u5143\u5b87\u5b99\u201d\u3002\\n\\n\u76ee\u524d\uff0c\u300cHwameiStor \u4e91\u539f\u751f\u672c\u5730\u50a8\u5b58\u7cfb\u7edf\u300d\u5df2\u7ecf\u6b63\u5f0f\u5728 Github \u5f00\u6e90\u4e0a\u7ebf\uff0c\u5bf9\u5b83\u611f\u5174\u8da3\u7684\u8bdd\uff0c\u5c31\u6765\u52a0\u5165\u6211\u4eec\u5427\uff0c\u4e00\u8d77\u5f00\u57a6\u8fd9\u5757\u5c5e\u4e8e\u7a0b\u5e8f\u5458\u7684 \u201c\u5143\u5b87\u5b99\u201d \u65b0\u571f\u5730\uff0c\u6210\u4e3a\u672a\u6765\u884c\u9053\u8005\u3002"},{"id":"welcome","metadata":{"permalink":"/cn/blog/welcome","editUrl":"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-04-22-welcome.md","source":"@site/blog/2022-04-22-welcome.md","title":"Welcome","description":"Welcome to the Hwameistor blog space.","date":"2022-04-22T00:00:00.000Z","formattedDate":"April 22, 2022","tags":[{"label":"hello","permalink":"/cn/blog/tags/hello"},{"label":"Hwameistor","permalink":"/cn/blog/tags/hwameistor"}],"readingTime":0.4,"hasTruncateMarker":false,"authors":[{"name":"\u8981\u6d77\u5cf0","title":"\u7f16\u8f91","url":"https://github.com/windsonsea","imageURL":"https://github.com/windsonsea.png","key":"Michael"}],"frontMatter":{"slug":"welcome","title":"Welcome","authors":["Michael"],"tags":["hello","Hwameistor"]},"prevItem":{"title":"\u81ea\u52a8\u5316\u3001\u9ad8\u53ef\u7528\u4e91\u539f\u751f\u672c\u5730\u5b58\u50a8\u7cfb\u7edf \u2014\u2014 HwameiStor \u5f00\u6e90\u4e0a\u7ebf","permalink":"/cn/blog/1"}},"content":"Welcome to the Hwameistor blog space.\\n\\nHere you can keep up with the progress of the Hwameistor open source project and recent hot topics.\\n\\nWe also plan to include release notes for major releases, guidance articles, community-related events, and possibly some development tips, and interesting topics within the team.\\n\\nIf you are interested in contributing to this open source project and would like to join the discussion or make some guest blog posts, please contact us.\\n\\nGitHub address is: https://github.com/hwameistor"}]}')}}]);