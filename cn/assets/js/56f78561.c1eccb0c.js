"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4520],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var l=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},i=Object.keys(e);for(l=0;l<i.length;l++)a=i[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)a=i[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=l.createContext({}),o=function(e){var t=l.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=o(e.components);return l.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},u=l.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,p=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=o(a),c=n,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||i;return a?l.createElement(k,r(r({ref:t},d),{},{components:a})):l.createElement(k,r({ref:t},d))}));function c(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,r=new Array(i);r[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:n,r[1]=s;for(var o=2;o<i;o++)r[o]=a[o];return l.createElement.apply(null,r)}return l.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4583:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var l=a(7462),n=(a(7294),a(3905));const i={slug:"test",title:"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5",authors:["Simon","Michael"],tags:["Test"]},r=void 0,s={permalink:"/cn/blog/test",editUrl:"https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-06-06_tidb-test.md",source:"@site/i18n/cn/docusaurus-plugin-content-blog/2022-06-06_tidb-test.md",title:"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5",description:"\u672c\u6b21\u6d4b\u8bd5\u73af\u5883\u4e3a Kubernetes 1.22\uff0c\u5bf9\u63a5 HwameiStor \u672c\u5730\u5b58\u50a8\u540e\uff0c\u6210\u529f\u90e8\u7f72 TiDB 1.3\uff0c\u968f\u540e\u6267\u884c\u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\u3001\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5\u53ca\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u3002",date:"2022-06-06T00:00:00.000Z",formattedDate:"June 6, 2022",tags:[{label:"Test",permalink:"/cn/blog/tags/test"}],readingTime:19.785,hasTruncateMarker:!1,authors:[{name:"\u8d75\u71d5\u5b81",title:"\u5f00\u53d1\u8005",url:"https://github.com/zhaosimon",imageURL:"https://avatars.githubusercontent.com/u/36882380?v=4",key:"Simon"},{name:"\u8981\u6d77\u5cf0",title:"\u7f16\u8f91",url:"https://github.com/windsonsea",imageURL:"https://github.com/windsonsea.png",key:"Michael"}],frontMatter:{slug:"test",title:"HwameiStor \u80fd\u529b\u3001\u5b89\u5168\u53ca\u8fd0\u7ef4\u6d4b\u8bd5",authors:["Simon","Michael"],tags:["Test"]},prevItem:{title:"\u76f4\u64ad\u56de\u987e\u8bba\u9053\u539f\u751f\uff1a\u4e91\u539f\u751f\u5b58\u50a8",permalink:"/cn/blog/live"},nextItem:{title:"LV \u548c LVReplica",permalink:"/cn/blog/3"}},p={authorsImageUrls:[void 0,void 0]},o=[{value:"TiDB \u7b80\u4ecb",id:"tidb-\u7b80\u4ecb",level:2},{value:"TiDB \u6574\u4f53\u67b6\u6784",id:"tidb-\u6574\u4f53\u67b6\u6784",level:3},{value:"TiDB \u6570\u636e\u5e93\u7684\u5b58\u50a8",id:"tidb-\u6570\u636e\u5e93\u7684\u5b58\u50a8",level:3},{value:"\u642d\u5efa\u6d4b\u8bd5\u73af\u5883",id:"\u642d\u5efa\u6d4b\u8bd5\u73af\u5883",level:2},{value:"Kubernetes \u96c6\u7fa4",id:"kubernetes-\u96c6\u7fa4",level:3},{value:"HwameiStor \u672c\u5730\u5b58\u50a8",id:"hwameistor-\u672c\u5730\u5b58\u50a8",level:3},{value:"\u5728 Kubernetes \u4e0a\u90e8\u7f72 TiDB",id:"\u5728-kubernetes-\u4e0a\u90e8\u7f72-tidb",level:3},{value:"\u90e8\u7f72 TiDB Operator",id:"\u90e8\u7f72-tidb-operator",level:4},{value:"\u90e8\u7f72 TiDB \u96c6\u7fa4",id:"\u90e8\u7f72-tidb-\u96c6\u7fa4",level:4},{value:"\u8fde\u63a5 TiDB \u96c6\u7fa4",id:"\u8fde\u63a5-tidb-\u96c6\u7fa4",level:4},{value:"\u68c0\u67e5\u5e76\u9a8c\u8bc1 TiDB \u96c6\u7fa4\u72b6\u6001",id:"\u68c0\u67e5\u5e76\u9a8c\u8bc1-tidb-\u96c6\u7fa4\u72b6\u6001",level:4},{value:"HwameiStor \u5b58\u50a8\u914d\u7f6e",id:"hwameistor-\u5b58\u50a8\u914d\u7f6e",level:4},{value:"\u6d4b\u8bd5\u5185\u5bb9",id:"\u6d4b\u8bd5\u5185\u5bb9",level:2},{value:"\u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5",id:"\u6570\u636e\u5e93-sql-\u57fa\u672c\u80fd\u529b\u6d4b\u8bd5",level:3},{value:"\u5206\u5e03\u5f0f\u4e8b\u52a1",id:"\u5206\u5e03\u5f0f\u4e8b\u52a1",level:4},{value:"\u5bf9\u8c61\u9694\u79bb",id:"\u5bf9\u8c61\u9694\u79bb",level:4},{value:"\u8868\u64cd\u4f5c\u652f\u6301",id:"\u8868\u64cd\u4f5c\u652f\u6301",level:4},{value:"\u7d22\u5f15\u652f\u6301",id:"\u7d22\u5f15\u652f\u6301",level:4},{value:"\u8868\u8fbe\u5f0f",id:"\u8868\u8fbe\u5f0f",level:4},{value:"\u6267\u884c\u8ba1\u5212\u89e3\u6790",id:"\u6267\u884c\u8ba1\u5212\u89e3\u6790",level:4},{value:"\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a",id:"\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a",level:4},{value:"\u5e38\u7528\u51fd\u6570",id:"\u5e38\u7528\u51fd\u6570",level:4},{value:"\u663e\u5f0f/\u9690\u5f0f\u4e8b\u52a1",id:"\u663e\u5f0f\u9690\u5f0f\u4e8b\u52a1",level:4},{value:"\u5b57\u7b26\u96c6",id:"\u5b57\u7b26\u96c6",level:4},{value:"\u9501\u652f\u6301",id:"\u9501\u652f\u6301",level:4},{value:"\u9694\u79bb\u7ea7\u522b",id:"\u9694\u79bb\u7ea7\u522b",level:4},{value:"\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2",id:"\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2",level:4},{value:"\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5",id:"\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5",level:3},{value:"\u8d26\u53f7\u7ba1\u7406\u4e0e\u6743\u9650\u6d4b\u8bd5",id:"\u8d26\u53f7\u7ba1\u7406\u4e0e\u6743\u9650\u6d4b\u8bd5",level:4},{value:"\u8bbf\u95ee\u63a7\u5236",id:"\u8bbf\u95ee\u63a7\u5236",level:4},{value:"\u767d\u540d\u5355",id:"\u767d\u540d\u5355",level:4},{value:"\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55",id:"\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55",level:4},{value:"\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5",id:"\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5",level:3},{value:"\u6570\u636e\u5bfc\u5165\u5bfc\u51fa",id:"\u6570\u636e\u5bfc\u5165\u5bfc\u51fa",level:4},{value:"\u6162\u65e5\u5fd7\u67e5\u8be2",id:"\u6162\u65e5\u5fd7\u67e5\u8be2",level:4}],d={toc:o};function m(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,l.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"\u672c\u6b21\u6d4b\u8bd5\u73af\u5883\u4e3a Kubernetes 1.22\uff0c\u5bf9\u63a5 HwameiStor \u672c\u5730\u5b58\u50a8\u540e\uff0c\u6210\u529f\u90e8\u7f72 TiDB 1.3\uff0c\u968f\u540e\u6267\u884c\u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\u3001\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5\u53ca\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u3002"),(0,n.kt)("p",null,"\u5168\u90e8\u6d4b\u8bd5\u6210\u529f\u901a\u8fc7\uff0c\u8bc1\u5b9e HwameiStor \u80fd\u591f\u5b8c\u7f8e\u652f\u6491 TiDB \u8fd9\u7c7b\u9ad8\u53ef\u7528\u3001\u5f3a\u4e00\u81f4\u8981\u6c42\u8f83\u9ad8\u3001\u6570\u636e\u89c4\u6a21\u8f83\u5927\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5e94\u7528\u573a\u666f\u3002"),(0,n.kt)("h2",{id:"tidb-\u7b80\u4ecb"},"TiDB \u7b80\u4ecb"),(0,n.kt)("p",null,"TiDB \u662f\u4e00\u6b3e\u540c\u65f6\u652f\u6301\u5728\u7ebf\u4e8b\u52a1\u5904\u7406 (OLTP) \u4e0e\u5728\u7ebf\u5206\u6790\u5904\u7406 (OATP) \u7684\u878d\u5408\u578b\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u4ea7\u54c1\uff0c\u5177\u5907\u6c34\u5e73\u6269\u7f29\u5bb9\u3001\u91d1\u878d\u7ea7\u9ad8\u53ef\u7528\u3001\u5b9e\u65f6 HTAP\uff08\u5373\u540c\u65f6\u652f\u6301 OLTP \u548c OATP\uff09\u3001\u4e91\u539f\u751f\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\uff0c\u517c\u5bb9 MySQL 5.7 \u534f\u8bae\u548c MySQL \u751f\u6001\u7b49\u91cd\u8981\u7279\u6027\u3002TiDB \u7684\u76ee\u6807\u662f\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u7ad9\u5f0f\u7684 OLTP\u3001OLAP\u3001HTAP \u89e3\u51b3\u65b9\u6848\uff0c\u9002\u5408\u9ad8\u53ef\u7528\u3001\u5f3a\u4e00\u81f4\u8981\u6c42\u8f83\u9ad8\u3001\u6570\u636e\u89c4\u6a21\u8f83\u5927\u7b49\u5404\u79cd\u5e94\u7528\u573a\u666f\u3002"),(0,n.kt)("h3",{id:"tidb-\u6574\u4f53\u67b6\u6784"},"TiDB \u6574\u4f53\u67b6\u6784"),(0,n.kt)("p",null,"TiDB \u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5c06\u6574\u4f53\u67b6\u6784\u62c6\u5206\u6210\u4e86\u591a\u4e2a\u6a21\u5757\uff0c\u5404\u6a21\u5757\u4e4b\u95f4\u4e92\u76f8\u901a\u4fe1\uff0c\u7ec4\u6210\u5b8c\u6574\u7684 TiDB \u7cfb\u7edf\u3002\u5bf9\u5e94\u7684\u67b6\u6784\u56fe\u5982\u4e0b\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"TiDB \u67b6\u6784\u56fe",src:a(5464).Z,width:"2163",height:"1269"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"TiDB Server")),(0,n.kt)("p",{parentName:"li"},"SQL \u5c42\u5bf9\u5916\u66b4\u9732 MySQL \u534f\u8bae\u7684\u8fde\u63a5\u7aef\u70b9\uff0c\u8d1f\u8d23\u63a5\u53d7\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\uff0c\u6267\u884c SQL \u89e3\u6790\u548c\u4f18\u5316\uff0c\u6700\u7ec8\u751f\u6210\u5206\u5e03\u5f0f\u6267\u884c\u8ba1\u5212\u3002TiDB \u5c42\u672c\u8eab\u662f\u65e0\u72b6\u6001\u7684\uff0c\u5b9e\u8df5\u4e2d\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a TiDB \u5b9e\u4f8b\uff0c\u901a\u8fc7\u8d1f\u8f7d\u5747\u8861\u7ec4\u4ef6\uff08\u5982 LVS\u3001HAProxy \u6216 F5\uff09\u5bf9\u5916\u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u5165\u5730\u5740\uff0c\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u53ef\u4ee5\u5747\u5300\u5730\u5206\u644a\u5728\u591a\u4e2a TiDB \u5b9e\u4f8b\u4e0a\u4ee5\u8fbe\u5230\u8d1f\u8f7d\u5747\u8861\u7684\u6548\u679c\u3002TiDB Server \u672c\u8eab\u5e76\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u53ea\u662f\u89e3\u6790 SQL\uff0c\u5c06\u5b9e\u9645\u7684\u6570\u636e\u8bfb\u53d6\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5e95\u5c42\u7684\u5b58\u50a8\u8282\u70b9 TiKV\uff08\u6216 TiFlash\uff09\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"PD (Placement Driver) Server")),(0,n.kt)("p",{parentName:"li"},"\u6574\u4e2a TiDB \u96c6\u7fa4\u7684\u5143\u4fe1\u606f\u7ba1\u7406\u6a21\u5757\uff0c\u8d1f\u8d23\u5b58\u50a8\u6bcf\u4e2a TiKV \u8282\u70b9\u5b9e\u65f6\u7684\u6570\u636e\u5206\u5e03\u60c5\u51b5\u548c\u96c6\u7fa4\u7684\u6574\u4f53\u62d3\u6251\u7ed3\u6784\uff0c\u63d0\u4f9b TiDB Dashboard \u7ba1\u63a7\u754c\u9762\uff0c\u5e76\u4e3a\u5206\u5e03\u5f0f\u4e8b\u52a1\u5206\u914d\u4e8b\u52a1 ID\u3002PD \u4e0d\u4ec5\u5b58\u50a8\u5143\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u4f1a\u6839\u636e TiKV \u8282\u70b9\u5b9e\u65f6\u4e0a\u62a5\u7684\u6570\u636e\u5206\u5e03\u72b6\u6001\uff0c\u4e0b\u53d1\u6570\u636e\u8c03\u5ea6\u547d\u4ee4\u7ed9\u5177\u4f53\u7684 TiKV \u8282\u70b9\uff0c\u53ef\u4ee5\u8bf4\u662f\u6574\u4e2a\u96c6\u7fa4\u7684\u201c\u5927\u8111\u201d\u3002\u6b64\u5916\uff0cPD \u672c\u8eab\u4e5f\u662f\u7531\u81f3\u5c11 3 \u4e2a\u8282\u70b9\u6784\u6210\uff0c\u62e5\u6709\u9ad8\u53ef\u7528\u7684\u80fd\u529b\u3002\u5efa\u8bae\u90e8\u7f72\u5947\u6570\u4e2a PD \u8282\u70b9\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u5b58\u50a8\u8282\u70b9")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"TiKV Server\uff1a\u8d1f\u8d23\u5b58\u50a8\u6570\u636e\uff0c\u4ece\u5916\u90e8\u770b TiKV \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7684\u63d0\u4f9b\u4e8b\u52a1\u7684 Key-Value \u5b58\u50a8\u5f15\u64ce\u3002\u5b58\u50a8\u6570\u636e\u7684\u57fa\u672c\u5355\u4f4d\u662f Region\uff0c\u6bcf\u4e2a Region \u8d1f\u8d23\u5b58\u50a8\u4e00\u4e2a Key Range\uff08\u4ece StartKey \u5230 EndKey \u7684\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\uff09\u7684\u6570\u636e\uff0c\u6bcf\u4e2a TiKV \u8282\u70b9\u4f1a\u8d1f\u8d23\u591a\u4e2a Region\u3002TiKV \u7684 API \u5728 KV \u952e\u503c\u5bf9\u5c42\u9762\u63d0\u4f9b\u5bf9\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u539f\u751f\u652f\u6301\uff0c\u9ed8\u8ba4\u63d0\u4f9b\u4e86 SI (Snapshot Isolation) \u7684\u9694\u79bb\u7ea7\u522b\uff0c\u8fd9\u4e5f\u662f TiDB \u5728 SQL \u5c42\u9762\u652f\u6301\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u6838\u5fc3\u3002TiDB \u7684 SQL \u5c42\u505a\u5b8c SQL \u89e3\u6790\u540e\uff0c\u4f1a\u5c06 SQL \u7684\u6267\u884c\u8ba1\u5212\u8f6c\u6362\u4e3a\u5bf9 TiKV API \u7684\u5b9e\u9645\u8c03\u7528\u3002\u6240\u4ee5\uff0c\u6570\u636e\u90fd\u5b58\u50a8\u5728 TiKV \u4e2d\u3002\u53e6\u5916\uff0cTiKV \u4e2d\u7684\u6570\u636e\u90fd\u4f1a\u81ea\u52a8\u7ef4\u62a4\u591a\u526f\u672c\uff08\u9ed8\u8ba4\u4e3a\u4e09\u526f\u672c\uff09\uff0c\u5929\u7136\u652f\u6301\u9ad8\u53ef\u7528\u548c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"TiFlash\uff1aTiFlash \u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u5b58\u50a8\u8282\u70b9\u3002\u548c\u666e\u901a TiKV \u8282\u70b9\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u5728 TiFlash \u5185\u90e8\uff0c\u6570\u636e\u662f\u4ee5\u5217\u5f0f\u7684\u5f62\u5f0f\u8fdb\u884c\u5b58\u50a8\uff0c\u4e3b\u8981\u7684\u529f\u80fd\u662f\u4e3a\u5206\u6790\u578b\u7684\u573a\u666f\u52a0\u901f\u3002"))))),(0,n.kt)("h3",{id:"tidb-\u6570\u636e\u5e93\u7684\u5b58\u50a8"},"TiDB \u6570\u636e\u5e93\u7684\u5b58\u50a8"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"TiDB\u6570\u636e\u5e93\u7684\u5b58\u50a8",src:a(5409).Z,width:"1923",height:"1761"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u952e\u503c\u5bf9 (Key-Value Pair)")),(0,n.kt)("p",{parentName:"li"},"TiKV \u7684\u9009\u62e9\u662f Key-Value \u6a21\u578b\uff0c\u5e76\u4e14\u63d0\u4f9b\u6709\u5e8f\u904d\u5386\u65b9\u6cd5\u3002TiKV \u6570\u636e\u5b58\u50a8\u7684\u4e24\u4e2a\u5173\u952e\u70b9\uff1a"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8fd9\u662f\u4e00\u4e2a\u5de8\u5927\u7684 Map\uff08\u53ef\u4ee5\u7c7b\u6bd4\u4e00\u4e0b C++ \u7684 std::map\uff09\uff0c\u4e5f\u5c31\u662f\u5b58\u50a8\u7684\u662f Key-Value Pairs\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8fd9\u4e2a Map \u4e2d\u7684 Key-Value pair \u6309\u7167 Key \u7684\u4e8c\u8fdb\u5236\u987a\u5e8f\u6709\u5e8f\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5 Seek \u5230\u67d0\u4e00\u4e2a Key \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u4e0d\u65ad\u5730\u8c03\u7528 Next \u65b9\u6cd5\u4ee5\u9012\u589e\u7684\u987a\u5e8f\u83b7\u53d6\u6bd4\u8fd9\u4e2a Key \u5927\u7684 Key-Value\u3002")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u672c\u5730\u5b58\u50a8\uff08Rocks DB\uff09")),(0,n.kt)("p",{parentName:"li"},"\u4efb\u4f55\u6301\u4e45\u5316\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u6570\u636e\u7ec8\u5f52\u8981\u4fdd\u5b58\u5728\u78c1\u76d8\u4e0a\uff0cTiKV \u4e5f\u4e0d\u4f8b\u5916\u3002\u4f46\u662f TiKV \u6ca1\u6709\u9009\u62e9\u76f4\u63a5\u5411\u78c1\u76d8\u4e0a\u5199\u6570\u636e\uff0c\u800c\u662f\u628a\u6570\u636e\u4fdd\u5b58\u5728 RocksDB \u4e2d\uff0c\u5177\u4f53\u7684\u6570\u636e\u843d\u5730\u7531 RocksDB \u8d1f\u8d23\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u662f\u5f00\u53d1\u4e00\u4e2a\u5355\u673a\u5b58\u50a8\u5f15\u64ce\u5de5\u4f5c\u91cf\u5f88\u5927\uff0c\u7279\u522b\u662f\u8981\u505a\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684\u5355\u673a\u5f15\u64ce\uff0c\u9700\u8981\u505a\u5404\u79cd\u7ec6\u81f4\u7684\u4f18\u5316\uff0c\u800c RocksDB \u662f\u7531 Facebook \u5f00\u6e90\u7684\u4e00\u4e2a\u975e\u5e38\u4f18\u79c0\u7684\u5355\u673a KV \u5b58\u50a8\u5f15\u64ce\uff0c\u53ef\u4ee5\u6ee1\u8db3 TiKV \u5bf9\u5355\u673a\u5f15\u64ce\u7684\u5404\u79cd\u8981\u6c42\u3002\u8fd9\u91cc\u53ef\u4ee5\u7b80\u5355\u5730\u8ba4\u4e3a RocksDB \u662f\u4e00\u4e2a\u5355\u673a\u7684\u6301\u4e45\u5316 Key-Value Map\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Raft \u534f\u8bae")),(0,n.kt)("p",{parentName:"li"},"TiKV \u9009\u62e9\u4e86 Raft \u7b97\u6cd5\u6765\u4fdd\u8bc1\u5355\u673a\u5931\u6548\u7684\u60c5\u51b5\u4e0b\u6570\u636e\u4e0d\u4e22\u5931\u4e0d\u51fa\u9519\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u628a\u6570\u636e\u590d\u5236\u5230\u591a\u53f0\u673a\u5668\u4e0a\uff0c\u8fd9\u6837\u67d0\u4e00\u53f0\u673a\u5668\u65e0\u6cd5\u63d0\u4f9b\u670d\u52a1\u65f6\uff0c\u5176\u4ed6\u673a\u5668\u4e0a\u7684\u526f\u672c\u8fd8\u80fd\u63d0\u4f9b\u670d\u52a1\u3002\u8fd9\u4e2a\u6570\u636e\u590d\u5236\u65b9\u6848\u53ef\u9760\u5e76\u4e14\u9ad8\u6548\uff0c\u80fd\u5904\u7406\u526f\u672c\u5931\u6548\u7684\u60c5\u51b5\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"Region")),(0,n.kt)("p",{parentName:"li"},"TiKV \u9009\u62e9\u4e86\u6309\u7167 Key \u5212\u5206 Range\u3002\u67d0\u4e00\u6bb5\u8fde\u7eed\u7684 Key \u90fd\u4fdd\u5b58\u5728\u4e00\u4e2a\u5b58\u50a8\u8282\u70b9\u4e0a\u3002\u5c06\u6574\u4e2a Key-Value \u7a7a\u95f4\u5206\u6210\u5f88\u591a\u6bb5\uff0c\u6bcf\u4e00\u6bb5\u662f\u4e00\u7cfb\u5217\u8fde\u7eed\u7684 Key\uff0c\u79f0\u4e3a\u4e00\u4e2a Region\u3002\u5c3d\u91cf\u8ba9\u6bcf\u4e2a Region \u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u4e0d\u8d85\u8fc7\u4e00\u5b9a\u7684\u5927\u5c0f\uff0c\u76ee\u524d\u5728 TiKV \u4e2d\u9ed8\u8ba4\u662f\u4e0d\u8d85\u8fc7 96MB\u3002\u6bcf\u4e00\u4e2a Region \u90fd\u53ef\u4ee5\u7528 ","[StartKey\uff0cEndKey]"," \u8fd9\u6837\u7684\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\u6765\u63cf\u8ff0\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"MVCC")),(0,n.kt)("p",{parentName:"li"},"TiKV\u5b9e\u73b0\u4e86\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236 (MVCC)\u3002")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u5206\u5e03\u5f0f ACID \u4e8b\u52a1")),(0,n.kt)("p",{parentName:"li"},"TiKV \u7684\u4e8b\u52a1\u91c7\u7528\u7684\u662f Google \u5728 BigTable \u4e2d\u4f7f\u7528\u7684\u4e8b\u52a1\u6a21\u578b\uff1aPercolator\u3002"))),(0,n.kt)("h2",{id:"\u642d\u5efa\u6d4b\u8bd5\u73af\u5883"},"\u642d\u5efa\u6d4b\u8bd5\u73af\u5883"),(0,n.kt)("h3",{id:"kubernetes-\u96c6\u7fa4"},"Kubernetes \u96c6\u7fa4"),(0,n.kt)("p",null,"\u672c\u6b21\u6d4b\u8bd5\u4f7f\u7528\u4e09\u53f0\u865a\u62df\u673a\u8282\u70b9\u90e8\u7f72 Kubernetes \u96c6\u7fa4\uff0c\u5305\u62ec 1 \u4e2a master \u8282\u70b9\u548c 2 \u4e2a worker\u8282\u70b9\u3002Kubelete \u7248\u672c\u4e3a 1.22.0\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"k8s cluster",src:a(477).Z,width:"1032",height:"202"})),(0,n.kt)("h3",{id:"hwameistor-\u672c\u5730\u5b58\u50a8"},"HwameiStor \u672c\u5730\u5b58\u50a8"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5728 Kubernetes \u96c6\u7fa4\u4e0a\u90e8\u7f72 HwameiStor \u672c\u5730\u5b58\u50a8"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"HwameiStor \u672c\u5730\u5b58\u50a8",src:a(1854).Z,width:"900",height:"383"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5728\u4e24\u53f0 worker \u8282\u70b9\u4e0a\u5206\u522b\u4e3a HwameiStor \u914d\u7f6e\u4e00\u5757 100G \u7684\u672c\u5730\u78c1\u76d8 sdb"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"sdb1",src:a(4871).Z,width:"1106",height:"504"})),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"sdb2",src:a(109).Z,width:"1262",height:"846"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa storagClass"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"\u521b\u5efa StorageClass",src:a(5222).Z,width:"1846",height:"116"})))),(0,n.kt)("h3",{id:"\u5728-kubernetes-\u4e0a\u90e8\u7f72-tidb"},"\u5728 Kubernetes \u4e0a\u90e8\u7f72 TiDB"),(0,n.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528 TiDB Operator \u5728 Kubernetes \u4e0a\u90e8\u7f72 TiDB\u3002TiDB Operator \u662f Kubernetes \u4e0a\u7684 TiDB \u96c6\u7fa4\u81ea\u52a8\u8fd0\u7ef4\u7cfb\u7edf\uff0c\u63d0\u4f9b\u5305\u62ec\u90e8\u7f72\u3001\u5347\u7ea7\u3001\u6269\u7f29\u5bb9\u3001\u5907\u4efd\u6062\u590d\u3001\u914d\u7f6e\u53d8\u66f4\u7684 TiDB \u5168\u751f\u547d\u5468\u671f\u7ba1\u7406\u3002\u501f\u52a9 TiDB Operator\uff0cTiDB \u53ef\u4ee5\u65e0\u7f1d\u8fd0\u884c\u5728\u516c\u6709\u4e91\u6216\u79c1\u6709\u90e8\u7f72\u7684 Kubernetes \u96c6\u7fa4\u4e0a\u3002"),(0,n.kt)("p",null,"TiDB \u4e0e TiDB Operator \u7248\u672c\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"TiDB  \u7248\u672c"),(0,n.kt)("th",{parentName:"tr",align:null},"\u9002\u7528\u7684 TiDB Operator \u7248\u672c"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"dev"),(0,n.kt)("td",{parentName:"tr",align:null},"dev")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"TiDB  >= 5.4"),(0,n.kt)("td",{parentName:"tr",align:null},"1.3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"5.1  <= TiDB < 5.4"),(0,n.kt)("td",{parentName:"tr",align:null},"1.3\uff08\u63a8\u8350\uff09\uff0c1.2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"3.0  <= TiDB < 5.1"),(0,n.kt)("td",{parentName:"tr",align:null},"1.3\uff08\u63a8\u8350\uff09\uff0c1.2\uff0c1.1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2.1  <= TiDB < 3.0"),(0,n.kt)("td",{parentName:"tr",align:null},"1.0\uff08\u505c\u6b62\u7ef4\u62a4\uff09")))),(0,n.kt)("h4",{id:"\u90e8\u7f72-tidb-operator"},"\u90e8\u7f72 TiDB Operator"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5b89\u88c5 TiDB CRDs"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f https://raw.githubusercontent.com/pingcap/tidb-operator/master/manifests/crd.yaml\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5b89\u88c5 TiDB Operator"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add pingcap https://charts.pingcap.org/ \nkubectl create namespace tidb-admin \nhelm install --namespace tidb-admin tidb-operator pingcap/tidb-operator --version v1.3.2 \\\n--set operatorImage=registry.cn-beijing.aliyuncs.com/tidb/tidb-operator:v1.3.2 \\\n--set tidbBackupManagerImage=registry.cn-beijing.aliyuncs.com/tidb/tidb-backup-manager:v1.3.2 \\\n--set scheduler.kubeSchedulerImageName=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u68c0\u67e5 TiDB Operator \u7ec4\u4ef6"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"\u68c0\u67e5 TiDB Operator \u7ec4\u4ef6",src:a(8521).Z,width:"2008",height:"180"})))),(0,n.kt)("h4",{id:"\u90e8\u7f72-tidb-\u96c6\u7fa4"},"\u90e8\u7f72 TiDB \u96c6\u7fa4"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl create namespace tidb-cluster && \\\nkubectl -n tidb-cluster apply -f https://raw.githubusercontent.com/pingcap/tidb-operator/master/examples/basic/tidb-cluster.yaml \nkubectl -n tidb-cluster apply -f https://raw.githubusercontent.com /pingcap/tidb-operator/master/examples/basic/tidb-monitor.yaml\n")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"\u90e8\u7f72 TiDB \u96c6\u7fa4",src:a(3551).Z,width:"2054",height:"352"})),(0,n.kt)("h4",{id:"\u8fde\u63a5-tidb-\u96c6\u7fa4"},"\u8fde\u63a5 TiDB \u96c6\u7fa4"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum -y install mysql-client\n")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"connecttidb",src:a(9071).Z,width:"2430",height:"719"})),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl port-forward -n tidb-cluster svc/basic-tidb 4000 > pf4000.out & \n")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"\u8fde\u63a5 TiDB \u96c6\u7fa4",src:a(901).Z,width:"2592",height:"124"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"\u8fde\u63a5 TiDB \u96c6\u7fa4",src:a(764).Z,width:"696",height:"162"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"\u8fde\u63a5 TiDB \u96c6\u7fa4",src:a(4712).Z,width:"2499",height:"749"})),(0,n.kt)("h4",{id:"\u68c0\u67e5\u5e76\u9a8c\u8bc1-tidb-\u96c6\u7fa4\u72b6\u6001"},"\u68c0\u67e5\u5e76\u9a8c\u8bc1 TiDB \u96c6\u7fa4\u72b6\u6001"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa Hello_world \u8868"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"create table hello_world (id int unsigned not null auto_increment primary key, v varchar(32)); \n")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"\u521b\u5efa Hello_world \u8868",src:a(2925).Z,width:"1660",height:"1110"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u8be2 TiDB \u7248\u672c\u53f7"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"select tidb_version()\\G;\n")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"\u8fde\u63a5 TiDB \u96c6\u7fa4",src:a(792).Z,width:"952",height:"418"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u8be2 Tikv \u5b58\u50a8\u72b6\u6001"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"select * from information_schema.tikv_store_status\\G;\n")),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"\u67e5\u8be2 Tikv \u5b58\u50a8\u72b6\u6001",src:a(3779).Z,width:"1014",height:"854"})))),(0,n.kt)("h4",{id:"hwameistor-\u5b58\u50a8\u914d\u7f6e"},"HwameiStor \u5b58\u50a8\u914d\u7f6e"),(0,n.kt)("p",null,"\u4ece ",(0,n.kt)("inlineCode",{parentName:"p"},"storageClass local-storage-hdd-lvm")," \u5206\u522b\u4e3a tidb-tikv \u53ca tidb-pd \u521b\u5efa\u4e00\u4e2a PVC:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"HwameiStor \u5b58\u50a8\u914d\u7f6e",src:a(1184).Z,width:"2498",height:"248"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"HwameiStor \u5b58\u50a8\u914d\u7f6e",src:a(4261).Z,width:"556",height:"773"})),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"HwameiStor \u5b58\u50a8\u914d\u7f6e",src:a(4089).Z,width:"555",height:"743"})),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get po basic-tikv-0 -oyaml\n")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"HwameiStor \u5b58\u50a8\u914d\u7f6e",src:a(2970).Z,width:"525",height:"856"})),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get po basic-pd-0 -oyaml\n")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"HwameiStor \u5b58\u50a8\u914d\u7f6e",src:a(2309).Z,width:"569",height:"871"})),(0,n.kt)("h2",{id:"\u6d4b\u8bd5\u5185\u5bb9"},"\u6d4b\u8bd5\u5185\u5bb9"),(0,n.kt)("h3",{id:"\u6570\u636e\u5e93-sql-\u57fa\u672c\u80fd\u529b\u6d4b\u8bd5"},"\u6570\u636e\u5e93 SQL \u57fa\u672c\u80fd\u529b\u6d4b\u8bd5"),(0,n.kt)("p",null,"\u5b8c\u6210\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u540e\uff0c\u6267\u884c\u4e86\u4ee5\u4e0b\u57fa\u672c\u80fd\u529b\u6d4b\u8bd5\uff0c\u5168\u90e8\u901a\u8fc7\u3002"),(0,n.kt)("h4",{id:"\u5206\u5e03\u5f0f\u4e8b\u52a1"},"\u5206\u5e03\u5f0f\u4e8b\u52a1"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u652f\u6301\u5728\u591a\u79cd\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5b9e\u73b0\u5206\u5e03\u5f0f\u6570\u636e\u64cd\u4f5c\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u5373 ACID\u5c5e\u6027"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u6b65\u9aa4\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa\u6d4b\u8bd5\u6570\u636e\u5e93 CREATE DATABASE testdb")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efa\u6d4b\u8bd5\u7528\u8868 CREATE TABLE ",(0,n.kt)("inlineCode",{parentName:"p"},"t_test ( id int AUTO_INCREMENT, name varchar(32), PRIMARY KEY (id) )"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u8fd0\u884c\u6d4b\u8bd5\u811a\u672c"))),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u5728\u591a\u79cd\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5b9e\u73b0\u5206\u5e03\u5f0f\u6570\u636e\u64cd\u4f5c\u7684\u5b8c\u6574\u6027\u7ea6\u675f\u5373 ACID \u5c5e\u6027"),(0,n.kt)("h4",{id:"\u5bf9\u8c61\u9694\u79bb"},"\u5bf9\u8c61\u9694\u79bb"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u6d4b\u8bd5\u4e0d\u540c schema \u5b9e\u73b0\u5bf9\u8c61\u9694\u79bb"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"create database if not exists testdb;\nuse testdb\ncreate table if not exists t_test\n( id                   bigint,\n  name                 varchar(200),\n  sale_time            datetime default current_timestamp,\n  constraint pk_t_test primary key (id)\n);\ninsert into t_test(id,name) values (1,'a'),(2,'b'),(3,'c');\ncreate user 'readonly'@'%' identified by \"readonly\";\ngrant select on testdb.* to readonly@'%';\nselect * from testdb.t_test;\nupdate testdb.t_test set name='aaa';\ncreate user 'otheruser'@'%' identified by \"otheruser\";\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u521b\u5efa\u4e0d\u540c schema \u5b9e\u73b0\u5bf9\u8c61\u9694\u79bb"),(0,n.kt)("h4",{id:"\u8868\u64cd\u4f5c\u652f\u6301"},"\u8868\u64cd\u4f5c\u652f\u6301"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u6d4b\u8bd5\u662f\u5426\u652f\u6301\u521b\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u8868\u6570\u636e\u3001DML\u3001\u5217\u3001\u5206\u533a\u8868"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u6b65\u9aa4\uff1a\u8fde\u63a5\u6570\u636e\u5e93\u540e\u6309\u6b65\u9aa4\u6267\u884c\u6d4b\u8bd5\u811a\u672c"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"# \u521b\u5efa\u548c\u5220\u9664\u8868\ndrop table if exists t_test;\ncreate table if not exists t_test\n( id                   bigint default '0',\n  name                 varchar(200) default '' ,\n  sale_time            datetime default current_timestamp,\n  constraint pk_t_test primary key (id)\n);\n# \u5220\u9664\u548c\u4fee\u6539\ninsert into t_test(id,name) values (1,'a'),(2,'b'),(3,'c'),(4,'d'),(5,'e');\nupdate t_test set name='aaa' where id=1;\nupdate t_test set name='bbb' where id=2;\ndelete from t_dml where id=5;\n# \u4fee\u6539\u3001\u589e\u52a0\u3001\u5220\u9664\u5217\nalter table t_test modify column name varchar(250);\nalter table t_test add column col varchar(255);\ninsert into t_test(id,name,col) values(10,'test','new_col');     \nalter table t_test add column colwithdefault varchar(255) default 'aaaa';\ninsert into t_test(id,name) values(20,'testdefault');\ninsert into t_test(id,name,colwithdefault ) values(10,'test','non-default ');     \nalter table t_test drop column colwithdefault;\n# \u5206\u533a\u8868\u7c7b\u578b\uff08\u4ec5\u6458\u5f55\u90e8\u5206\u811a\u672c\uff09\nCREATE TABLE employees (\n    id INT NOT NULL,\nfname VARCHAR(30),\nlname VARCHAR(30),\n    hired DATE NOT NULL DEFAULT '1970-01-01',\n    separated DATE NOT NULL DEFAULT '9999-12-31',\njob_code INT NOT NULL,\nstore_id INT NOT NULL\n)\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u521b\u5efa\u3001\u5220\u9664\u548c\u4fee\u6539\u8868\u6570\u636e\u3001DML\u3001\u5217\u3001\u5206\u533a\u8868"),(0,n.kt)("h4",{id:"\u7d22\u5f15\u652f\u6301"},"\u7d22\u5f15\u652f\u6301"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u591a\u79cd\u7c7b\u578b\u7684\u7d22\u5f15\uff08\u552f\u4e00\u3001\u805a\u7c07\u3001\u5206\u533a\u3001Bidirectional indexes\u3001Expression-based indexes\u3001\u54c8\u5e0c\u7d22\u5f15\u7b49\u7b49\uff09\u4ee5\u53ca\u7d22\u5f15\u91cd\u5efa\u64cd\u4f5c\u3002"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"alter table t_test add unique index udx_t_test (name);\n# \u9ed8\u8ba4\u5c31\u662f\u4e3b\u952e\u805a\u7c07\u7d22\u5f15\nADMIN CHECK TABLE t_test;\ncreate index time_idx on t_test(sale_time);\nalter table t_test drop index time_idx;\nadmin show ddl jobs;\nadmin show ddl job queries 156;\ncreate index time_idx on t_test(sale_time);\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u521b\u5efa\u3001\u5220\u9664\u3001\u7ec4\u5408\u3001\u5355\u5217\u3001\u552f\u4e00\u7d22\u5f15"),(0,n.kt)("h4",{id:"\u8868\u8fbe\u5f0f"},"\u8868\u8fbe\u5f0f"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u8868\u8fbe\u5f0f\u652f\u6301 if\u3001casewhen\u3001forloop\u3001whileloop\u3001loop exit when \u7b49\u8bed\u53e5\uff08\u4e0a\u9650 5 \u7c7b\uff09"),(0,n.kt)("p",null,"\u524d\u63d0\u6761\u4ef6\uff1a\u6570\u636e\u5e93\u96c6\u7fa4\u5df2\u7ecf\u90e8\u7f72\u5b8c\u6210\u3002"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT CASE id WHEN 1 THEN 'first' WHEN 2 THEN 'second' ELSE 'OTHERS' END AS id_new  FROM t_test;\nSELECT IF(id>2,'int2+','int2-') from t_test;\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301 if\u3001case when\u3001for loop\u3001while loop\u3001loop exit when \u7b49\u8bed\u53e5\uff08\u4e0a\u9650 5 \u7c7b\uff09"),(0,n.kt)("h4",{id:"\u6267\u884c\u8ba1\u5212\u89e3\u6790"},"\u6267\u884c\u8ba1\u5212\u89e3\u6790"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6267\u884c\u8ba1\u5212\u89e3\u6790\u652f\u6301"),(0,n.kt)("p",null,"\u524d\u63d0\u6761\u4ef6\uff1a\u6570\u636e\u5e93\u96c6\u7fa4\u5df2\u7ecf\u90e8\u7f72\u5b8c\u6210\u3002"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"explain analyze select * from t_test where id NOT IN (1,2,4);\nexplain analyze select * from t_test a where EXISTS (select * from t_test b where a.id=b.id and b.id<3);\nexplain analyze SELECT IF(id>2,'int2+','int2-') from t_test;\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u6267\u884c\u8ba1\u5212\u7684\u89e3\u6790"),(0,n.kt)("h4",{id:"\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a"},"\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\u529f\u80fd"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u6b65\u9aa4\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u770b sql \u8bed\u53e5\u7684\u5f53\u524d\u6267\u884c\u8ba1\u5212")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u4f7f\u7528\u7ed1\u5b9a\u7279\u6027")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u770b\u8be5 sql \u8bed\u53e5\u7ed1\u5b9a\u540e\u7684\u6267\u884c\u8ba1\u5212")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5220\u9664\u7ed1\u5b9a"))),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from employees3 a join employees4 b on a.id = b.id where a.lname='Johnson';\nexplain select /*+ hash_join(a,b) */ * from employees3 a join employees4 b on a.id = b.id where a.lname='Johnson';\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u6ca1\u6709\u4f7f\u7528 hint \u65f6\u53ef\u80fd\u4e0d\u662f hash_join\uff0c\u4f7f\u7528 hint \u540e\u4e00\u5b9a\u662f hash_join\u3002"),(0,n.kt)("h4",{id:"\u5e38\u7528\u51fd\u6570"},"\u5e38\u7528\u51fd\u6570"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6807\u51c6\u7684\u6570\u636e\u5e93\u51fd\u6570(\u652f\u6301\u7684\u51fd\u6570\u7c7b\u578b\uff09"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u6807\u51c6\u7684\u6570\u636e\u5e93\u51fd\u6570"),(0,n.kt)("h4",{id:"\u663e\u5f0f\u9690\u5f0f\u4e8b\u52a1"},"\u663e\u5f0f/\u9690\u5f0f\u4e8b\u52a1"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u652f\u6301"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u663e\u793a\u4e0e\u9690\u5f0f\u4e8b\u52a1"),(0,n.kt)("h4",{id:"\u5b57\u7b26\u96c6"},"\u5b57\u7b26\u96c6"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6570\u636e\u7c7b\u578b\u652f\u6301"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u76ee\u524d\u53ea\u652f\u6301 UTF-8 mb4 \u5b57\u7b26\u96c6"),(0,n.kt)("h4",{id:"\u9501\u652f\u6301"},"\u9501\u652f\u6301"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u9501\u5b9e\u73b0"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u63cf\u8ff0\u4e86\u9501\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0cR-R/R-W/W-W \u60c5\u51b5\u4e0b\u963b\u585e\u60c5\u51b5\uff0c\u6b7b\u9501\u5904\u7406\u65b9\u5f0f"),(0,n.kt)("h4",{id:"\u9694\u79bb\u7ea7\u522b"},"\u9694\u79bb\u7ea7\u522b"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301 si \u9694\u79bb\u7ea7\u522b\uff0c\u652f\u6301 rc \u9694\u79bb\u7ea7\u522b\uff084.0 GA \u7248\u672c\uff09"),(0,n.kt)("h4",{id:"\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2"},"\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2\u80fd\u529b"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u8de8\u8282\u70b9 join \u7b49\u5206\u5e03\u5f0f\u590d\u6742\u67e5\u8be2\u3001\u64cd\u4f5c\u7b49\uff0c\u652f\u6301\u7a97\u53e3\u51fd\u6570\u3001\u5c42\u6b21\u67e5\u8be2"),(0,n.kt)("h3",{id:"\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5"},"\u7cfb\u7edf\u5b89\u5168\u6d4b\u8bd5"),(0,n.kt)("p",null,"\u8fd9\u90e8\u5206\u6d4b\u8bd5\u7cfb\u7edf\u5b89\u5168\uff0c\u5b8c\u6210\u6570\u636e\u5e93\u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u4ee5\u4e0b\u5b89\u5168\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\u3002"),(0,n.kt)("h4",{id:"\u8d26\u53f7\u7ba1\u7406\u4e0e\u6743\u9650\u6d4b\u8bd5"},"\u8d26\u53f7\u7ba1\u7406\u4e0e\u6743\u9650\u6d4b\u8bd5"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u8d26\u53f7\u6743\u9650\u7ba1\u7406"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"select host,user,authentication_string from mysql.user;\ncreate user tidb IDENTIFIED by 'tidb'; \nselect host,user,authentication_string from mysql.user;\nset password for tidb =password('tidbnew');\nselect host,user,authentication_string,Select_priv from mysql.user;\ngrant select on *.* to tidb;\nflush privileges ;\nselect host,user,authentication_string,Select_priv from mysql.user;\ngrant all privileges on *.* to tidb;\nflush privileges ;\nselect * from  mysql.user where user='tidb';\nrevoke select on *.* from tidb; \nflush privileges ;\nrevoke all privileges on *.* from tidb;\nflush privileges ;\ngrant select(id) on test.TEST_HOTSPOT to tidb;\ndrop user tidb;\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u652f\u6301\u521b\u5efa\u3001\u4fee\u6539\u5220\u9664\u8d26\u53f7\uff0c\u5e76\u914d\u7f6e\u548c\u5bc6\u7801\uff0c\u652f\u6301\u5b89\u5168\u3001\u5ba1\u8ba1\u548c\u6570\u636e\u7ba1\u7406\u4e09\u6743\u5206\u7acb")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u6839\u636e\u4e0d\u540c\u8d26\u53f7\uff0c\u5bf9\u6570\u5e93\u5404\u4e2a\u7ea7\u522b\u6743\u9650\u63a7\u5236\u5305\u62ec\uff1a\u5b9e\u4f8b/\u5e93/\u8868/\u5217\u7ea7\u522b"))),(0,n.kt)("h4",{id:"\u8bbf\u95ee\u63a7\u5236"},"\u8bbf\u95ee\u63a7\u5236"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6743\u9650\u8bbf\u95ee\u63a7\u5236\uff0c\u6570\u636e\u5e93\u6570\u636e\u901a\u8fc7\u8d4b\u4e88\u57fa\u672c\u589e\u5220\u6539\u67e5\u8bbf\u95ee\u6743\u9650\u63a7\u5236"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"mysql -u root -h 172.17.49.222 -P 4000\ndrop user tidb;\ndrop user tidb1;\ncreate user tidb IDENTIFIED by 'tidb'; \ngrant select on tidb.* to tidb;\ngrant insert on tidb.* to tidb;\ngrant update on tidb.* to tidb;\ngrant delete on tidb.* to tidb;\nflush privileges;\nshow grants for tidb;\nexit;\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e 'select * from aa;'\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e 'insert into aa values(2);'\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e 'update aa set id=3;'\nmysql -u tidb -h 172.17.49.222 -ptidb -P 4000 -D tidb -e 'delete from aa where id=3;'\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u6570\u636e\u5e93\u6570\u636e\u901a\u8fc7\u8d4b\u4e88\u57fa\u672c\u589e\u5220\u6539\u67e5\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u3002"),(0,n.kt)("h4",{id:"\u767d\u540d\u5355"},"\u767d\u540d\u5355"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u767d\u540d\u5355\u529f\u80fd"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"mysql -u root -h 172.17.49.102 -P 4000\ndrop user tidb;\ncreate user tidb@'127.0.0.1' IDENTIFIED by 'tidb'; \nflush privileges;\nselect * from mysql.user where user='tidb';\nmysql -u tidb -h 127.0.0.1 -P 4000 -ptidb\nmysql -u tidb -h 172.17.49.102 -P 4000 -ptidb\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301 IP \u767d\u540d\u5355\u529f\u80fd\uff0c\u652f\u6301 IP \u6bb5\u901a\u914d\u64cd\u4f5c"),(0,n.kt)("h4",{id:"\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55"},"\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u76d1\u63a7\u80fd\u529b"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a",(0,n.kt)("inlineCode",{parentName:"p"},"kubectl -ntidb-cluster logs tidb-test-pd-2 --tail 22")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u8bb0\u5f55\u7528\u6237\u901a\u8fc7\u8fd0\u7ef4\u7ba1\u7406\u63a7\u5236\u53f0\u6216\u8005 API \u6267\u884c\u7684\u5173\u952e\u64cd\u4f5c\u6216\u8005\u9519\u8bef\u64cd\u4f5c"),(0,n.kt)("h3",{id:"\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5"},"\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5"),(0,n.kt)("p",null,"\u8fd9\u90e8\u5206\u6d4b\u8bd5\u7cfb\u7edf\u8fd0\u7ef4\uff0c\u5b8c\u6210\u6570\u636e\u5e93\u96c6\u7fa4\u90e8\u7f72\u540e\uff0c\u4ee5\u4e0b\u8fd0\u7ef4\u7ba1\u7406\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\u3002"),(0,n.kt)("h4",{id:"\u6570\u636e\u5bfc\u5165\u5bfc\u51fa"},"\u6570\u636e\u5bfc\u5165\u5bfc\u51fa"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u9a8c\u8bc1\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u7684\u6570\u636e\u5bfc\u5165\u5bfc\u51fa\u7684\u5de5\u5177\u652f\u6301"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"select * from sbtest1 into outfile '/sbtest1.csv';\nload data local infile '/sbtest1.csv' into table test100;\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u652f\u6301\u6309\u8868\u3001schema\u3001database \u7ea7\u522b\u7684\u903b\u8f91\u5bfc\u51fa\u5bfc\u5165"),(0,n.kt)("h4",{id:"\u6162\u65e5\u5fd7\u67e5\u8be2"},"\u6162\u65e5\u5fd7\u67e5\u8be2"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u76ee\u7684\uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u7684 SQL \u4fe1\u606f"),(0,n.kt)("p",null,"\u524d\u63d0\u6761\u4ef6\uff1aSQL \u6267\u884c\u65f6\u95f4\u9700\u5927\u4e8e\u914d\u7f6e\u7684\u6162\u67e5\u8be2\u8bb0\u5f55\u9608\u503c,\u4e14 SQL \u6267\u884c\u5b8c\u6bd5"),(0,n.kt)("p",null,"\u6d4b\u8bd5\u6b65\u9aa4\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u8c03\u6574\u6162\u67e5\u8be2\u9608\u503c\u5230 100ms")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u6267\u884c sql")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u67e5\u770b log/\u7cfb\u7edf\u8868/dashboard \u4e2d\u7684\u6162\u67e5\u8be2\u4fe1\u606f"))),(0,n.kt)("p",null,"\u6d4b\u8bd5\u811a\u672c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"show variables like 'tidb_slow_log_threshold';\nset tidb_slow_log_threshold=100;\nselect query_time, query from information_schema.slow_query where is_internal = false order by query_time desc limit 3;\n")),(0,n.kt)("p",null,"\u6d4b\u8bd5\u7ed3\u679c\uff1a\u53ef\u4ee5\u83b7\u53d6\u6162\u67e5\u8be2\u4fe1\u606f"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u6709\u5173\u6d4b\u8bd5\u8be6\u60c5\uff0c\u8bf7\u67e5\u9605 ",(0,n.kt)("a",{target:"_blank",href:a(3526).Z},"TiDB on hwameiStor \u90e8\u7f72\u53ca\u6d4b\u8bd5\u8bb0\u5f55"),"\u3002")))}m.isMDXComponent=!0},3526:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/files/TiDBonHwameiStor-906bfd680bcfe09f47e9c9e5ed8bc3ec.docx"},5464:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/architecture-84a02fa042e9dcf9890b7d8cd9e0abf0.png"},8521:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/check-ed419916033fab0905560bd4a2f61af3.png"},3779:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/checkstorage-bdfd2faf28d7fd43cb0ba343b237ccdc.png"},792:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/checkversion-3d5ce2da304da3ad168d5e006fb04573.png"},901:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/connect1-a3321cfd632f9c6972be8c5b479cc74b.png"},764:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/connect2-b8e095de64a1ddeed0081558d1e7df2a.png"},4712:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/connect3-abfb57d8b142dfffe9a51c08bd1b2b49.png"},9071:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/connecttidb-a7581718045137e665d6661f70cfa7ec.png"},3551:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/deploytidb-2d47220e268930b68788f6b5719ff1b6.png"},2925:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/helloworld-ecab0f377f6eff58e4c83330317e02f2.png"},1854:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/hwameistor-b1534b2445747773ba035b59d9a2e4d9.png"},477:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/k8scluster-d66dbdd30a356cd2d92b2b4aa4be67cf.png"},2970:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/mountpvc-ba5f069afefb45a429a80a93300a760e.png"},2309:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/mountpvc1-6efe78023666c7944839572e9a9deabc.png"},1184:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/pvc-72ff9e3fbbb8ab8087d52ab36dd732f7.png"},4261:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/pvc1-17195a3d3fbaf5e8832f6013cb00af45.png"},4089:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/pvc2-c01fe3c4a62af87680a8659b42a5237f.png"},4871:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/sdb1-d44c872aaeec1d38a96fe2b64d614ec7.png"},109:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/sdb2-04c3bbb6819254df2091337943b8a903.png"},5409:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/storage-4a218645dd6de979bc2db8471dc54ead.png"},5222:(e,t,a)=>{a.d(t,{Z:()=>l});const l=a.p+"assets/images/storageclass-2f60d3b59099601a065cad53084b7410.png"}}]);