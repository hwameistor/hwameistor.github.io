<!doctype html>
<html lang="zh-CN" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">HwameiStor 对 Minio 的支持 | HwameiStor</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hwameistor.io/cn/blog/minio"><meta data-rh="true" name="docusaurus_locale" content="cn"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="cn"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="HwameiStor 对 Minio 的支持 | HwameiStor"><meta data-rh="true" name="description" content="本文讲述如何以 HwameiStor 为底座，搭建 MinIO 存储解决方案，实践验证了 MinIO 的各项基本功能和多租户隔离测试。"><meta data-rh="true" property="og:description" content="本文讲述如何以 HwameiStor 为底座，搭建 MinIO 存储解决方案，实践验证了 MinIO 的各项基本功能和多租户隔离测试。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-07-16T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/zhaosimon"><meta data-rh="true" property="article:tag" content="Test"><link data-rh="true" rel="icon" href="/cn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hwameistor.io/cn/blog/minio"><link data-rh="true" rel="alternate" href="https://hwameistor.io/blog/minio" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://hwameistor.io/cn/blog/minio" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://hwameistor.io/blog/minio" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cn/blog/rss.xml" title="HwameiStor RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cn/blog/atom.xml" title="HwameiStor Atom Feed"><link rel="stylesheet" href="/cn/assets/css/styles.b1b5b1e9.css">
<link rel="preload" href="/cn/assets/js/runtime~main.f67f21fc.js" as="script">
<link rel="preload" href="/cn/assets/js/main.4bdc371b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到正文"><a href="#" class="skipToContent_fXgn">跳到正文</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cn/"><div class="navbar__logo"><img src="/cn/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cn/img/logo_dark.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">HwameiStor</b></a><a class="navbar__item navbar__link" href="/cn/docs/intro">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cn/blog">博客</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/blog/minio" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li><li><a href="/cn/blog/minio" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">中文</a></li></ul></div><a href="https://github.com/hwameistor/hwameistor" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换淡色/暗色模式 (当前 淡色模式)" aria-label="切换淡色/暗色模式 (当前 淡色模式)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="浏览最新的博文"><div class="sidebarItemTitle_pO2u margin-bottom--md">最新的博文</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/cn/blog/minio">HwameiStor 对 Minio 的支持</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cn/blog/live">直播回顾论道原生：云原生存储</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cn/blog/test">HwameiStor 能力、安全及运维测试</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cn/blog/3">LV 和 LVReplica</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cn/blog/2">HwameiStor Reliable Helper System 开源上线</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">HwameiStor 对 Minio 的支持</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-07-16T00:00:00.000Z" itemprop="datePublished">July 16, 2022</time> · <!-- -->11 分钟阅读</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/zhaosimon" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/36882380?v=4" alt="赵燕宁"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/zhaosimon" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">赵燕宁</span></a></div><small class="avatar__subtitle" itemprop="description">开发者</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>本文讲述如何以 HwameiStor 为底座，搭建 MinIO 存储解决方案，实践验证了 MinIO 的各项基本功能和多租户隔离测试。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="minio-简介">MinIO 简介<a class="hash-link" href="#minio-简介" title="直接链接到标题">​</a></h2><p>MinIO 是一款高性能、分布式、兼容 S3 的多云对象存储系统套件。MinIO 原生支持 Kubernetes，能够支持所有公有云、私有云及边缘计算环境。
MinIO 是 GNU AGPL v3 开源的软件定义产品，能够很好地运行在标准硬件如 X86 等设备上。</p><p><img loading="lazy" alt="MinIO 架构" src="/cn/assets/images/minio-design-50c5ded4364db203250dc5f007b8f613.png" width="245" height="219" class="img_ev3q"></p><p>MinIO 的架构设计从一开始就是针对性能要求很高的私有云标准，在实现对象存储所需要的全部功能的基础上追求极致的性能。
MinIO 具备易用性、高效性及高性能，能够以更简单的方式提供具有弹性伸缩能力的云原生对象存储服务。</p><p>MinIO 在传统对象存储场景（如辅助存储、灾难恢复和归档）方面表现出色，同时在机器学习、大数据、私有云、混合云等方面的存储技术上也独树一帜，包括数据分析、高性能应用负载、原生云应用等。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minio-架构设计">MinIO 架构设计<a class="hash-link" href="#minio-架构设计" title="直接链接到标题">​</a></h3><p>MinIO 为云原生架构设计，可以作为轻量级容器运行并由外部编排服务如 Kubernetes 管理。
MinIO 整个服务包约为不到 100 MB 的静态二进制文件，即使在很高负载下也可以高效利用 CPU 和内存资源并可以在共享硬件上共同托管大量租户。
对应的架构图如下：</p><p><img loading="lazy" alt="架构图" src="/cn/assets/images/architect-ce129da6d73d13ffdbb0e813bb33fe58.png" width="1092" height="684" class="img_ev3q"></p><p>MinIO 用作云原生应用程序的主要存储，与传统对象存储相比，云原生应用程序需要更高的吞吐量和更低的延迟，而这些都是 MinIO 能够达成的性能指标，读/写速度高达 183 GB/秒和 171 GB/秒。</p><p>MinIO 极致的高性能离不开底层存储基础平台。本地存储在众多的存储协议中具有最高的读写性能无疑能为 MinIO 提供性能保障。
HwameiStor 正是满足云原生时代要求的储存系统。它具有高性能、高可用、自动化、低成本、快速部署等优点，可以替代昂贵的传统 SAN 存储。</p><p>MinIO 可以在带有本地驱动器（JBOD/JBOF）的标准服务器上运行。
集群为完全对称的体系架构，即所有服务器的功能均相同，没有名称节点或元数据服务器。</p><p>MinIO 将数据和元数据作为对象一起写入从而无需使用元数据数据库。
MinIO 以内联、严格一致的操作执行所有功能，包括擦除代码、位 rotrot 检查、加密等。</p><p>每个 MinIO 集群都是分布式 MinIO 服务器的集合，每个节点一个进程。
MinIO 作为单个进程在用户空间中运行，并使用轻量级的协同例程来实现高并发。
将驱动器分组到擦除集（默认情况下，每组 16 个驱动器），然后使用确定性哈希算法将对象放置在这些擦除集上。</p><p>MinIO 专为大规模、多数据中心云存储服务而设计。
每个租户都运行自己的 MinIO 集群，该集群与其他租户完全隔离，从而使租户能够免受升级、更新和安全事件的任何干扰。
每个租户通过联合跨地理区域的集群来独立扩展。</p><p><img loading="lazy" alt="node-distribution-setup" src="/cn/assets/images/node-setup-83bd490fd5bac9fadf3650ed4d61314e.png" width="1271" height="1057" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="以-hwameistor-为底座搭建-minio-的优势">以 HwameiStor 为底座搭建 MinIO 的优势<a class="hash-link" href="#以-hwameistor-为底座搭建-minio-的优势" title="直接链接到标题">​</a></h3><p>以 HwameiStor 为底座搭建 MinIO 存储方案，构建智、稳、敏全面增强本地存储，具备以下优势。</p><ul><li><p>自动化运维管理</p><p>可以自动发现、识别、管理、分配磁盘。 根据亲和性，智能调度应用和数据。自动监测磁盘状态，并及时预警。</p></li><li><p>高可用的数据</p><p>使用跨节点副本同步数据， 实现高可用。发生问题时，会自动将应用调度到高可用数据节点上，保证应用的连续性。</p></li><li><p>丰富的数据卷类型</p><p>聚合 HDD、SSD、NVMe 类型的磁盘，提供非低延时，高吞吐的数据服务。</p></li><li><p>灵活动态的线性扩展</p><p>可以根据集群规模大小进行动态的扩容，灵活满足应用的数据持久化需求。</p></li><li><p>丰富的应用场景，广泛适配企业需求，适配高可用架构中间件</p><p>类似 Kafka、ElasticSearch、Redis 等这类中间件自身具备高可用架构，同时对数据的 IO 访问有很高要求。
HwameiStor 提供的基于 LVM 的单副本本地数据卷，可以很好地满足它们的要求。</p></li><li><p>为应用提供高可用数据卷</p><p>MySQL 等 OLTP 数据库要求底层存储提供高可用的数据存储，当发生问题时可快速恢复数据，同时也要求保证高性能的数据访问。
HwameiStor 提供的双副本的高可用数据卷，可以很好地满足此类需求。</p></li><li><p>自动化运维传统存储软件</p><p>MinIO、Ceph 等存储软件，需要使用 Kubernetes 节点上的磁盘，可以采用 PVC/PV 的方式，
通过 CSI 驱动自动化地使用 HwameiStor 的单副本本地卷，快速响应业务系统提出的部署、扩容、迁移等需求，实现基于 Kubernetes 的自动化运维。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="测试环境">测试环境<a class="hash-link" href="#测试环境" title="直接链接到标题">​</a></h2><p>按照以下步骤依次部署 Kubernetes 集群、HwameiStor 本地存储和 MinIO。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署-kubernetes-集群">部署 Kubernetes 集群<a class="hash-link" href="#部署-kubernetes-集群" title="直接链接到标题">​</a></h3><p>本次测试使用了三台虚拟机节点部署了 Kubernetes 集群：1 Master + 2 Worker 节点，kubelet 版本为 1.22.0。</p><p><img loading="lazy" alt="k8s-cluster" src="/cn/assets/images/k8s-cluster-2e9998ffef1d3a00bad3b7e3a164e4ff.png" width="553" height="117" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署-hwameistor-本地存储">部署 HwameiStor 本地存储<a class="hash-link" href="#部署-hwameistor-本地存储" title="直接链接到标题">​</a></h3><p>在 Kubernetes 上部署 HwameiStor 本地存储。</p><p><img loading="lazy" alt="查看 HwameiStor 本地存储" src="/cn/assets/images/kubectl-get-hwamei-pod-0cd9b8d67e92c776b7bcd8b348f70496.png" width="553" height="87" class="img_ev3q"></p><p>两台 Worker 节点各配置了五块磁盘（SDB、SDC、SDD、SDE、SDF）用于 HwameiStor 本地磁盘管理。</p><p><img loading="lazy" alt="lsblk" src="/cn/assets/images/lsblk01-1b81d8560261b1885437ed9fb82481cc.png" width="553" height="192" class="img_ev3q"></p><p><img loading="lazy" alt="lsblk" src="/cn/assets/images/lsblk02-9d75cd284b90f360762e7b6b4003f1fe.png" width="553" height="147" class="img_ev3q"></p><p>查看 local storage node 状态。</p><p><img loading="lazy" alt="get-lsn" src="/cn/assets/images/kubectl-get-lsn-9655d5b584e42874a92047354ff54c15.png" width="553" height="67" class="img_ev3q"></p><p>创建了 storagClass。</p><p><img loading="lazy" alt="get-sc" src="/cn/assets/images/kubectl-get-sc-860a03c344d7d8b2e26157ca5f6730a9.png" width="553" height="48" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="分布式多租户源码部署安装minio-operator">分布式多租户源码部署安装（minio operator）<a class="hash-link" href="#分布式多租户源码部署安装minio-operator" title="直接链接到标题">​</a></h2><p>本节说明如何部署 minio operator，如何创建租户，如何配置 HwameiStor 本地卷。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署-minio-operator">部署 minio operator<a class="hash-link" href="#部署-minio-operator" title="直接链接到标题">​</a></h3><p>参照以下步骤部署 minio operator。</p><ol><li><p>复制 minio operator 仓库到本地。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone &lt;https://github.com/minio/operator.git&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="helm-repo-list" src="/cn/assets/images/helm-repo-list-f96e598528d3d564bcbb129221360620.png" width="538" height="50" class="img_ev3q"></p><p><img loading="lazy" alt="ls-operator" src="/cn/assets/images/ls-opeartor-2d0c847e0ae10e022f408516d0b15c46.png" width="554" height="47" class="img_ev3q"></p></li><li><p>进入 helm operator 目录：<code>/root/operator/helm/operator</code>。</p><p><img loading="lazy" alt="ls-pwd" src="/cn/assets/images/ls-pwd-177620b3543a6e3211f2ada8d9af1893.png" width="448" height="119" class="img_ev3q"></p></li><li><p>部署 minio-operator 实例。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm install minio-operator \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--namespace minio-operator \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--generate-name .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set persistence.storageClass=local-storage-hdd-lvm .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>检查 minio-operator 资源运行情况。</p><p><img loading="lazy" alt="get-all" src="/cn/assets/images/kubectl-get-all-026455ec24122121ef5763df0c6f1d71.png" width="553" height="252" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建租户">创建租户<a class="hash-link" href="#创建租户" title="直接链接到标题">​</a></h3><p>参照以下步骤创建一个租户。</p><ol><li><p>进入 <code>/root/operator/examples/kustomization/base</code> 目录。如下修改 tenant.yaml。</p><p><img loading="lazy" alt="git-diff-yaml" src="/cn/assets/images/git-diff-tenant-yaml-7ae47ae03222e56b47635aea676dc294.png" width="553" height="489" class="img_ev3q"></p></li><li><p>进入 <code>/root/operator/helm/tenant/</code> 目录。如下修改 <code>values.yaml</code> 文件。</p><p><img loading="lazy" alt="git-diff-values.yaml" src="/cn/assets/images/git-diff-values-yaml-4a948a45aba4b18a76b4938e24b0dfe7.png" width="553" height="576" class="img_ev3q"></p></li><li><p>进入 <code>/root/operator/examples/kustomization/tenant-lite</code> 目录。如下修改 <code>kustomization.yaml</code> 文件。</p><p><img loading="lazy" alt="git-diff-kustomization-yaml" src="/cn/assets/images/git-diff-kustomization-yaml-0ad007bd15ea443b07d8366fb2eb65bd.png" width="553" height="249" class="img_ev3q"></p></li><li><p>如下修改 <code>tenant.yaml</code> 文件。</p><p><img loading="lazy" alt="git-diff-tenant-yaml02" src="/cn/assets/images/git-diff-tenant-yaml02-24937bd8e84cfb6f82a3d4c61f3cb5ff.png" width="553" height="266" class="img_ev3q"></p></li><li><p>如下修改 <code>tenantNamePatch.yaml</code> 文件。</p><p><img loading="lazy" alt="git-diff-tenant-name-patch-yaml" src="/cn/assets/images/git-diff-tenant-name-patch-yaml-4b8be598ff292c9492f86640650d8a0c.png" width="553" height="125" class="img_ev3q"></p></li><li><p>创建租户：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply –k . </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>检查租户 minio-t1 资源状态：</p><p><img loading="lazy" alt="kubectl-get-all-nminio-tenant" src="/cn/assets/images/kubectl-get-all-nminio-tenant-497b2e2eab8bb4d29b3de1c0b1a6dd7b.png" width="553" height="322" class="img_ev3q"></p></li><li><p>如要创建一个新的租户可以在 <code>/root/operator/examples/kustomization</code> 目录下建一个新的 <code>tenant</code> 目录（本案例为 <code>tenant-lite-2</code>）并对相应文件做对应修改。</p><p><img loading="lazy" alt="pwd-ls-ls" src="/cn/assets/images/pwd-ls-ls-3c18ba9e4e0eabed279cac4788adc00e.png" width="1078" height="209" class="img_ev3q"></p></li><li><p>执行 <code>kubectl apply –k .</code> 创建新的租户 <code>minio-t2</code>。</p><p><img loading="lazy" alt="kubectl-get-all-nminio" src="/cn/assets/images/kubectl-get-all-minio-8c0df6d0f7c86bf1ac6260795a55ab3c.png" width="1022" height="659" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置-hwameistor-本地卷">配置 HwameiStor 本地卷<a class="hash-link" href="#配置-hwameistor-本地卷" title="直接链接到标题">​</a></h3><p>依次运行以下命令来配置本地卷。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get statefulset.apps/minio-t1-pool-0 -nminio-tenant -oyaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="local-storage-hdd-lvm" src="/cn/assets/images/local-storage-hdd-lvm-214813a44eb9b94a4a7c12b592bdca77.png" width="437" height="382" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pvc –A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="kubectl-get-pvc" src="/cn/assets/images/kubectl-get-pvc-b00f37660c7a43e7a79d9fdb12116a6b.png" width="553" height="105" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pvc export-minio6-0 -nminio-6 -oyaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="kubectl-get-pvc-export-oyaml" src="/cn/assets/images/kubectl-get-pvc-export-oyaml-bd9d6c3aea26b5e4217bb163f26b68f9.png" width="553" height="371" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="kubectl-get-pv" src="/cn/assets/images/kubectl-get-pv-d6a7f8f8d6abe20eb23588513908066d.png" width="553" height="85" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pvc data0-minio-t1-pool-0-0 -nminio-tenant -oyaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="kubectl-get-pvc-oyaml" src="/cn/assets/images/kubectl-get-pvc-oyaml-71f7f2ebc33ee977d2c399425bab30bd.png" width="553" height="448" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get lv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="kubectl-get-lv" src="/cn/assets/images/kubectl-get-lv-b1a03ec396f97f755f15ad387225c38a.png" width="553" height="95" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubect get lvr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制到剪切板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="kubectl-get-lvr" src="/cn/assets/images/kubectl-get-lvr-aa5334390dd09d70b369178e2a40df54.png" width="553" height="86" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hwameistor-与-minio-测试验证">HwameiStor 与 MinIo 测试验证<a class="hash-link" href="#hwameistor-与-minio-测试验证" title="直接链接到标题">​</a></h2><p>完成上述配置之后，执行了基本功能测试和多租户隔离测试。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本功能测试">基本功能测试<a class="hash-link" href="#基本功能测试" title="直接链接到标题">​</a></h3><p>基本功能测试的步骤如下。</p><ol><li><p>从浏览器登录 <code>minio console：10.6.163.52:30401/login</code>。</p><p><img loading="lazy" alt="minio-opeartor-console-login" src="/cn/assets/images/minio-opeartor-console-login-d2690ef3832515f90e4bb546c515cc0f.png" width="681" height="369" class="img_ev3q"></p></li><li><p>通过 <code>kubectl minio proxy -n minio-operator </code>获取 JWT。</p><p><img loading="lazy" alt="minio-opeartor-console-login" src="/cn/assets/images/kubectl-minio-proxy-jwt-9e10468de2cb3110cccb7949ba403e65.png" width="1144" height="328" class="img_ev3q"></p></li><li><p>浏览及管理创建的租户信息。</p><p><img loading="lazy" alt="tenant01" src="/cn/assets/images/tenant01-823ef226f559957037ea57ed833ef2c2.png" width="1265" height="562" class="img_ev3q"></p><p><img loading="lazy" alt="tenant02" src="/cn/assets/images/tenant02-847ee3e98f7fb5cad5151f28d1624676.png" width="1265" height="715" class="img_ev3q"></p><p><img loading="lazy" alt="tenant03" src="/cn/assets/images/tenant03-39a6e5a9ece83b93a6fc68bdf709db12.png" width="1265" height="583" class="img_ev3q"></p><p><img loading="lazy" alt="tenant04" src="/cn/assets/images/tenant04-517db946c00cc899af5dc790a055f793.png" width="1265" height="748" class="img_ev3q"></p><p><img loading="lazy" alt="tenant05" src="/cn/assets/images/tenant05-3a12444cc96c9cd2dbf73fa722b9b2c0.png" width="1271" height="733" class="img_ev3q"></p><p><img loading="lazy" alt="tenant06" src="/cn/assets/images/tenant06-15e19517c953f7c9820da7c818837250.png" width="1271" height="855" class="img_ev3q"></p></li><li><p>登录 minio-t1 租户（用户名 minio，密码 minio123）。</p><p><img loading="lazy" alt="login-minio" src="/cn/assets/images/login-minio-t1-01-68939a43710d29e15a94152ff248f7a6.png" width="1265" height="760" class="img_ev3q"></p><p><img loading="lazy" alt="login-minio" src="/cn/assets/images/login-minio-t1-02-b65ab20229aa0efd8e586c7467514ab6.png" width="1265" height="754" class="img_ev3q"></p></li><li><p>浏览 bucket bk-1。</p><p><img loading="lazy" alt="view-bucket-1" src="/cn/assets/images/view-bucket-01-50f2dac3e66f455de29df8ea6679f7fc.png" width="1271" height="409" class="img_ev3q"></p><p><img loading="lazy" alt="view-bucket-1" src="/cn/assets/images/view-bucket-02-fb93474795cf22f2edea0fde91a5ad19.png" width="1271" height="378" class="img_ev3q"></p><p><img loading="lazy" alt="view-bucket-1" src="/cn/assets/images/view-bucket-03-313ac3d13919cc855ac4e5e17d9cf61f.png" width="1271" height="467" class="img_ev3q"></p></li><li><p>创建新的 bucket bk-1-1。</p><p><img loading="lazy" alt="create-bucket-1-1" src="/cn/assets/images/create-bucket-1-1-6dd53d944ee882f572e7f1d4599ca021.png" width="1271" height="415" class="img_ev3q"></p><p><img loading="lazy" alt="create-bucket-1-1" src="/cn/assets/images/create-bucket-1-2-16fe74cc6ae2eac86d13da593666f786.png" width="1271" height="669" class="img_ev3q"></p><p><img loading="lazy" alt="create-bucket-1-1" src="/cn/assets/images/create-bucket-1-3-8388f7f0c3ae95ef6086aebd48e9bc8a.png" width="1271" height="354" class="img_ev3q"></p></li><li><p>创建 path path-1-2。</p><p><img loading="lazy" alt="create-path-1-2" src="/cn/assets/images/create-path-1-2-01-a92a560272a856ed5844706f34e201a2.png" width="1265" height="644" class="img_ev3q"></p><p><img loading="lazy" alt="create-path-1-2" src="/cn/assets/images/create-path-1-2-02-dbc0eb8def9147bbbab83a8ded628579.png" width="1271" height="336" class="img_ev3q"></p></li><li><p>上传文件成功：</p><p><img loading="lazy" alt="upload-file" src="/cn/assets/images/upload-file-success-71d39754b906216229e242c7a9691b88.png" width="1271" height="375" class="img_ev3q"></p><p><img loading="lazy" alt="upload-file" src="/cn/assets/images/upload-file-success-02-f26a3be0810b08e933b1a53e894840e7.png" width="1265" height="534" class="img_ev3q"></p><p><img loading="lazy" alt="upload-file" src="/cn/assets/images/upload-file-success-03-94d9c32d8be5cb1fcf7e791f6e0564e6.png" width="1271" height="495" class="img_ev3q"></p></li><li><p>上传文件夹成功：</p><p><img loading="lazy" alt="upload-folder" src="/cn/assets/images/upload-folder-success-01-ce4cca3d1572ed78c4d1445ef8ec5092.png" width="1271" height="406" class="img_ev3q"></p><p><img loading="lazy" alt="upload-folder" src="/cn/assets/images/upload-folder-success-02-8f527aa3a8d07d88c957615746852652.png" width="1271" height="375" class="img_ev3q"></p><p><img loading="lazy" alt="upload-folder" src="/cn/assets/images/upload-folder-success-03-d4251b86ee85bd5792e199680e9bb763.png" width="1265" height="495" class="img_ev3q"></p><p><img loading="lazy" alt="upload-folder" src="/cn/assets/images/upload-folder-success-04-ba90cf6c9b40c242cdb6e7bbd4e77ff1.png" width="1265" height="501" class="img_ev3q"></p></li><li><p>创建只读用户：</p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-readonly-user-01-c0dfec1a26c75309bd158812dfa38440.png" width="1271" height="745" class="img_ev3q"></p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-readonly-user-02-2cf0cf8de540ded84b5d7adca914409e.png" width="1271" height="287" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="多租户隔离测试">多租户隔离测试<a class="hash-link" href="#多租户隔离测试" title="直接链接到标题">​</a></h3><p>执行以下步骤进行多租户隔离测试。</p><ol><li><p>登录 minio-t2 租户。</p><p><img loading="lazy" alt="login-t2" src="/cn/assets/images/login-minio-t2-01-05164403493b1533fd4e66907fcc4e17.png" width="1271" height="715" class="img_ev3q"></p><p><img loading="lazy" alt="login-t2" src="/cn/assets/images/login-minio-t2-02-cb97b40d183a2c04c20d5a1583ba2448.png" width="1265" height="531" class="img_ev3q"></p></li><li><p>此时只能看到 minio-t2 内容，minio-t1 的内容被屏蔽。</p><p><img loading="lazy" alt="only-t2" src="/cn/assets/images/only-t2-cdc2c92d78952f8ef3dac0f0a08c5f4f.png" width="1271" height="748" class="img_ev3q"></p></li><li><p>创建 bucket。</p><p><img loading="lazy" alt="create-bucket" src="/cn/assets/images/create-bucket01-5ff6c1c329b6894a95327fd058418214.png" width="1271" height="641" class="img_ev3q"></p><p><img loading="lazy" alt="create-bucket" src="/cn/assets/images/createbucket02-c74362e3b73378315452553cca4a910d.png" width="1271" height="357" class="img_ev3q"></p></li><li><p>创建 path。</p><p><img loading="lazy" alt="create-path" src="/cn/assets/images/create-path01-6301c1074307216c3715f745ad37862b.png" width="1271" height="589" class="img_ev3q"></p><p><img loading="lazy" alt="create-path" src="/cn/assets/images/create-path02-b3875fbfee991a8c69f8627fbf8988b4.png" width="1265" height="281" class="img_ev3q"></p></li><li><p>上传文件。</p><p><img loading="lazy" alt="upload-file" src="/cn/assets/images/upload-file01-a81dcfaf0cb69e2f3d2b4452fcc8d587.png" width="1271" height="253" class="img_ev3q"></p><p><img loading="lazy" alt="upload-file" src="/cn/assets/images/upload-file02-688141fc03bc83b4884b1e309dc8fec3.png" width="1271" height="440" class="img_ev3q"></p></li><li><p>创建用户。</p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-user01-fdaa9d62a2b77f01b9c25e90947d01b7.png" width="1173" height="565" class="img_ev3q"></p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-user02-02688ec4dcdbfd13c23bde27cbe97adb.png" width="956" height="562" class="img_ev3q"></p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-user03-c8e0e15d94570c56b210a807bea71dbc.png" width="1063" height="330" class="img_ev3q"></p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-user04-a25e1de99cff7c39c5c6074bf99b171e.png" width="1087" height="418" class="img_ev3q"></p><p><img loading="lazy" alt="create-user" src="/cn/assets/images/create-user05-3094cf2cce3288d4b268b168376d9787.png" width="1265" height="436" class="img_ev3q"></p></li><li><p>配置用户 policy。</p><p><img loading="lazy" alt="user-policy" src="/cn/assets/images/user-policy01-d7ff1a7f6daa3180766f2e3f5aadb33a.png" width="1271" height="559" class="img_ev3q"></p><p><img loading="lazy" alt="user-policy" src="/cn/assets/images/user-policy02-52963322402c0fc498c958fc115bf05d.png" width="1271" height="482" class="img_ev3q"></p></li><li><p>删除 bucket。</p><p><img loading="lazy" alt="delete-bucket" src="/cn/assets/images/delete-bk01-ac535d4a12f5d328317e526567bb08a2.png" width="1265" height="620" class="img_ev3q"></p><p><img loading="lazy" alt="delete-bucket" src="/cn/assets/images/delete-bk02-59b03c470e6adf4d1cd9780c949a3e60.png" width="1265" height="666" class="img_ev3q"></p><p><img loading="lazy" alt="delete-bucket" src="/cn/assets/images/delete-bk03-7b7bcdc79caf87744c8b91bcd9e6888f.png" width="1265" height="519" class="img_ev3q"></p><p><img loading="lazy" alt="delete-bucket" src="/cn/assets/images/delete-bk04-3bf4c2f3cf510b65ecf9da53c8f5a5c6.png" width="1265" height="495" class="img_ev3q"></p><p><img loading="lazy" alt="delete-bucket" src="/cn/assets/images/delete-bk05-68ca55612e200403f48078d611d8897f.png" width="1271" height="605" class="img_ev3q"></p><p><img loading="lazy" alt="delete-bucket" src="/cn/assets/images/delete-bk06-eb4f8695cdc29d00bc1c4d59566a0525.png" width="1277" height="369" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="结论">结论<a class="hash-link" href="#结论" title="直接链接到标题">​</a></h2><p>本次测试是在 Kubernetes 1.22 平台上部署了 MinIO 分布式对象存储并对接 HwameiStor 本地存储。在此环境中完成了基本能力测试、系统安全测试及运维管理测试。</p><p>全部测试成功通过，证实了 HwameiStor 能够完美适配 MinIO 存储方案。</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>标签:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/cn/blog/tags/test">Test</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/hwameistor/hwameistor/edit/main/docs/blog/2022-07-16_minio-test/2022-07-16_minio-test.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="浏览博文"><a class="pagination-nav__link pagination-nav__link--next" href="/cn/blog/live"><div class="pagination-nav__sublabel">上一篇博文</div><div class="pagination-nav__label">直播回顾论道原生：云原生存储</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#minio-简介" class="table-of-contents__link toc-highlight">MinIO 简介</a><ul><li><a href="#minio-架构设计" class="table-of-contents__link toc-highlight">MinIO 架构设计</a></li><li><a href="#以-hwameistor-为底座搭建-minio-的优势" class="table-of-contents__link toc-highlight">以 HwameiStor 为底座搭建 MinIO 的优势</a></li></ul></li><li><a href="#测试环境" class="table-of-contents__link toc-highlight">测试环境</a><ul><li><a href="#部署-kubernetes-集群" class="table-of-contents__link toc-highlight">部署 Kubernetes 集群</a></li><li><a href="#部署-hwameistor-本地存储" class="table-of-contents__link toc-highlight">部署 HwameiStor 本地存储</a></li></ul></li><li><a href="#分布式多租户源码部署安装minio-operator" class="table-of-contents__link toc-highlight">分布式多租户源码部署安装（minio operator）</a><ul><li><a href="#部署-minio-operator" class="table-of-contents__link toc-highlight">部署 minio operator</a></li><li><a href="#创建租户" class="table-of-contents__link toc-highlight">创建租户</a></li><li><a href="#配置-hwameistor-本地卷" class="table-of-contents__link toc-highlight">配置 HwameiStor 本地卷</a></li></ul></li><li><a href="#hwameistor-与-minio-测试验证" class="table-of-contents__link toc-highlight">HwameiStor 与 MinIo 测试验证</a><ul><li><a href="#基本功能测试" class="table-of-contents__link toc-highlight">基本功能测试</a></li><li><a href="#多租户隔离测试" class="table-of-contents__link toc-highlight">多租户隔离测试</a></li></ul></li><li><a href="#结论" class="table-of-contents__link toc-highlight">结论</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cn/docs/intro">文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hwameistor/hwameistor" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cn/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">版权所有 © 2022 HwameiStor, 上海道客网络科技有限公司.Linux 基金会拥有注册商标并使用商标,有关 Linux 基金会的商标列表,请参阅我们的商标使用页面:https://www.linuxfoundation.org/trademark-usage.</div></div></div></footer></div>
<script src="/cn/assets/js/runtime~main.f67f21fc.js"></script>
<script src="/cn/assets/js/main.4bdc371b.js"></script>
</body>
</html>